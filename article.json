{"url_obj_id": "2796ee392f681a8f36e227ce37a3b069", "url": "http://blog.jobbole.com/113631/", "title": "邪恶的编程咒语", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg"], "tags": "开发,,编程语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://9tabs.com/random/2017/12/23/evil-coding-incantations.html\">9tabs</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>自从我看了 Gary Bernhardt 备受推崇的一个视频 <a href=\"https://www.destroyallsoftware.com/talks/wat\">Wat</a>，就惊异于特定编程语言的怪异行为。相较于其他编程语言来说，某些编程语言的行为更出乎意料。例如，有<a href=\"http://amzn.to/2zoCGSn\">一整本书</a>是针对 Java 的边缘案例和古怪情况。同样，差不多只要 200 美元你就可以阅读 <a href=\"https://www.iso.org/standard/68564.html\">C++ 规范说明</a>了。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg\"></p>\n<p>下面是我最喜欢的、惊奇的、滑稽的并仍然有效的咒语集合。一般来讲，利用这些古怪的行为被视为<em>坏事</em>，因为代码不应该出乎意料。值得庆幸的是，如果你尝试以下大多数蠢事，有很多代码校检工具（linters）已经准备好嘲笑你了。说了这么多，知识就是力量，那就开始吧。</p>\n<h3>Python 2 中对 True 邪恶的重赋值</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9064034266283\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; True = False\r\n&gt;&gt;&gt; True\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9064034266283-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9064034266283-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9064034266283-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9064034266283-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9064034266283-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9064034266283-3\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>谢天谢地，这在 Python 3 中会导致 <span style=\"text-decoration: underline;\">SyntaxError</span>，因为<a href=\"https://docs.python.org/3.0/whatsnew/3.0.html\"> True、False 和 None 现在是保留字</a>。它仍远没有 C++ 的那个恶作剧那么邪恶，把 <span style=\"text-decoration: underline;\">#define true false</span> 悄悄写进同事的开发机器的标准头文件中。</p>\n<h3>Java 和 Python 中的诡异行为实例</h3>\n<p>对 Java 新手程序员来说，<span style=\"color: #ff0000;\">==</span> 的语义往往使人困惑。甚至在微不足道的情境下，这个操作符的前后矛盾也会使情况变得复杂，即使性能效益是值得的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e906d798528718\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nInteger a = 100;\r\nInteger b = 100;\r\nSystem.out.print(a == b); // prints true\r\n\r\nInteger c = 200;\r\nInteger d = 200;\r\nSystem.out.print(c == d); // prints false</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e906d798528718-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e906d798528718-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e906d798528718-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e906d798528718-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e906d798528718-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e906d798528718-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e906d798528718-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e906d798528718-1\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e906d798528718-2\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e906d798528718-3\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e906d798528718-4\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e906d798528718-5\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e906d798528718-6\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e906d798528718-7\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints false</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>JVM 会对区间 [-128, 127] 内的值使用相同的引用。更奇怪的是，Python 中也有同样的行为。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9071678115706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = 256\r\n&gt;&gt;&gt; y = 256\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = 257\r\n&gt;&gt;&gt; y = 257\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9071678115706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9071678115706-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9071678115706-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9071678115706-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9071678115706-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9071678115706-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9071678115706-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9071678115706-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9071678115706-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9071678115706-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9071678115706-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9071678115706-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9071678115706-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9071678115706-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9071678115706-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9071678115706-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9071678115706-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9071678115706-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>目前为止，还没有特别出乎意料的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9075388374487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -5\r\n&gt;&gt;&gt; y = -5\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = -6\r\n&gt;&gt;&gt; y = -6\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9075388374487-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9075388374487-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9075388374487-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9075388374487-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9075388374487-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9075388374487-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9075388374487-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9075388374487-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9075388374487-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9075388374487-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9075388374487-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9075388374487-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9075388374487-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9075388374487-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9075388374487-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9075388374487-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9075388374487-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9075388374487-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎 python 解释器使用相同例子的下限是……-5。区间 [-5, 256] 内的整数有同样的 ID。不知怎地，这变得更奇怪了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9078786163541\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -10\r\n&gt;&gt;&gt; y = -10\r\n&gt;&gt;&gt; x is y\r\nFalse\r\n&gt;&gt;&gt; x, y = [-10, -10]\r\n&gt;&gt;&gt; x is y\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9078786163541-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9078786163541-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9078786163541-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9078786163541-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9078786163541-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9078786163541-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9078786163541-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9078786163541-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9078786163541-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9078786163541-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9078786163541-4\"><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9078786163541-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9078786163541-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9078786163541-7\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎使用解构赋值改变了这里的规则。我不确定为什么是这样。事实上，我在 <a href=\"https://stackoverflow.com/questions/47958141/what-is-the-difference-between-destructured-assignment-and-normal-assignment\" target=\"_blank\">Stack Overflow 上提了一个问题</a>来试着理解它。我的猜测是，一个列表中的重复值指向同一个对象，用以节省内存。</p>\n<h3>C 中颠倒的下标符号</h3>\n<p>颠倒的下标符号，会使所有开发者都头疼。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e907c200560511\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x[1] = { 0xdeadbeef };\r\n\r\nprintf(\"%xn\", 0[x]); // prints deadbeef</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e907c200560511-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e907c200560511-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e907c200560511-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e907c200560511-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0xdeadbeef</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e907c200560511-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e907c200560511-3\"><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%xn\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints deadbeef</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这行得通的原因是，<span style=\"text-decoration: underline;\">array[index]</span> 确实只是 <span style=\"text-decoration: underline;\">*(array + index)</span> 的语法糖。由于加法的交换性，我们可以交换数组和索引，并得到同样的结果。</p>\n<h3>C 中的“倒数”操作符</h3>\n<p><span style=\"color: #ff0000;\">–&gt;</span> 操作符第一次被看到时，似乎是句法错误。在你意识到它可编译时，它看起来像未被记载的语言特性。幸运的是，两者都不是。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e907f165667139\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (x = 3; x --&gt; 0;) {\r\n    printf(\"%d \", x); // prints 2 1 0\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e907f165667139-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e907f165667139-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e907f165667139-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e907f165667139-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e907f165667139-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints 2 1 0</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e907f165667139-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><span style=\"color: #ff0000;\">–&gt;</span> “操作符”实际上是两个操作符，在这个背景下解析为<span style=\"text-decoration: underline;\"> (x–) &gt; 0</span>。众所周知，大量使用会导致困惑，这完全是邪恶的。</p>\n<h3>C 中的 <span style=\"text-decoration: underline;\">sizeof</span> 操作符</h3>\n<p><span style=\"text-decoration: underline;\">sizeof</span> 操作符是一个编译时操作符，这给予了它有趣的属性。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9083320214596\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x = 0;\r\nsizeof(x += 1);\r\nif (x == 0) {\r\n    printf(\"wtf?\"); // this will be printed\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9083320214596-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9083320214596-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9083320214596-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e9083320214596-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9083320214596-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9083320214596-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9083320214596-2\"><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9083320214596-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e9083320214596-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"wtf?\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// this will be printed</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9083320214596-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>由于 <span style=\"text-decoration: underline;\">sizeof</span> 操作符的例子是对编译时进行评估的，<span style=\"text-decoration: underline;\">(x += 1) </span>不会运行。另一件趣事是，研究表明 <span style=\"text-decoration: underline;\">printf(“wtf?”)</span> 是最普遍的没有被 push 的代码。</p>\n<h3>Lua、Smalltalk、MATLAB 及其他语言，索引由 1 开始</h3>\n<p><a href=\"https://www.reddit.com/r/ProgrammerHumor/\">/r/programminghumor</a> 一直在用“<a href=\"https://goo.gl/QreBLU\">indexing</a> <a href=\"https://goo.gl/bm8Akz\">starts</a> <a href=\"https://goo.gl/joQ9gt\">at</a> <a href=\"https://goo.gl/MM5BwP\">1</a>”表情包取乐。令人震惊的是，有大量编程语言使用从 1 开始的数组索引。可以在<a href=\"https://goo.gl/kASpE7\">这里</a>找到更全面的清单。</p>\n<h3>Ruby 中的 0 被判为 true</h3>\n<p>… and only Ruby. *</p>\n<p>在 Ruby 中是这样。*</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e9087522772986\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif 0 then print 'thanks, ruby' end # prints thanks, ruby</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e9087522772986-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e9087522772986-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'thanks, ruby'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints thanks, ruby</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>* edit: It was pointed out on <a href=\"https://goo.gl/gnm654\">reddit</a> that this is true for Lua, Lisp, and Erlang as well.</p>\n<p>* 修订：Reddit 上有人指出，这在 Lua、Lisp 和 Erlang 中也成立。</p>\n<p>Trigraph, Digraphs, and Tokens in C</p>\n<h3>C 中的 Trigraph、Digraph 和 Token</h3>\n<p>由于历史原因，C 语言中的非字母符号有替代品。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fo80hoo0iij20cz0993zc.jpg\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa29a8e908a075337008\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif (true and true) { // same as if (true &amp;&amp; true)\r\n    printf(\"thanks, c\");\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e908a075337008-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa29a8e908a075337008-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa29a8e908a075337008-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa29a8e908a075337008-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// same as if (true &amp;&amp; true)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa29a8e908a075337008-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"thanks, c\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aaa29a8e908a075337008-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>有些外国设备，例如 IBM 3270，在 C/C++ 中不提供某些常用符号，所以提供了 digraph、trigraph 和 token 来避免排斥特定字符集。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113631\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113631votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113631\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "fav_nums": 2, "create_date": "2018-03-12", "praise_nums": 2}
{"url_obj_id": "b49b820d1a88139adbc0e923d2f824f6", "url": "http://blog.jobbole.com/113735/", "title": "Linux 跟踪器之选", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.brendangregg.com/blog/2015-07-08/choosing-a-linux-tracer.html\">Brendan Gregg</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9424-1.html\">Linux中国/qhwdw</a>   </div><blockquote><p>Linux 跟踪很神奇！</p></blockquote>\n<p>跟踪器tracer是一个高级的性能分析和调试工具，如果你使用过 <code>strace(1)</code> 或者 <code>tcpdump(8)</code>，你不应该被它吓到 … 你使用的就是跟踪器。系统跟踪器能让你看到很多的东西，而不仅是系统调用或者数据包，因为常见的跟踪器都可以跟踪内核或者应用程序的任何东西。</p>\n<p>有大量的 Linux 跟踪器可供你选择。由于它们中的每个都有一个官方的（或者非官方的）的吉祥物，我们有足够多的选择给孩子们展示。</p>\n<p>你喜欢使用哪一个呢？</p>\n<p>我从两类读者的角度来回答这个问题：大多数人和性能/内核工程师。当然，随着时间的推移，这也可能会发生变化，因此，我需要及时去更新本文内容，或许是每年一次，或者更频繁。（LCTT 译注：本文最后更新于 2015 年）</p>\n<h3 id=\"toc_1\">对于大多数人</h3>\n<p>大多数人（开发者、系统管理员、运维人员、网络可靠性工程师（SRE）…）是不需要去学习系统跟踪器的底层细节的。以下是你需要去了解和做的事情：</p>\n<h4 id=\"toc_2\">1. 使用 perf_events 进行 CPU 剖析</h4>\n<p>可以使用 perf_events 进行 CPU 剖析profiling。它可以用一个 <a href=\"http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html\">火焰图</a> 来形象地表示。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99ed0dbfa5311464165\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone --depth 1 https://github.com/brendangregg/FlameGraph\r\nperf record -F 99 -a -g -- sleep 30\r\nperf script | ./FlameGraph/stackcollapse-perf.pl | ./FlameGraph/flamegraph.pl &gt; perf.svg\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfa5311464165-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfa5311464165-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfa5311464165-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfa5311464165-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfa5311464165-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">depth</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/brendangregg/FlameGraph</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfa5311464165-2\"><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span></div><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfa5311464165-3\"><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">script</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FlameGraph</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">stackcollapse</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">perf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FlameGraph</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">flamegraph</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">perf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">svg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfa5311464165-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a5247adc2d78d2586e73f049d6d2347c.png\" alt=\"\"></p>\n<p>Linux 的 perf_events（即 <code>perf</code>，后者是它的命令）是官方为 Linux 用户准备的跟踪器/分析器。它位于内核源码中，并且维护的非常好（而且现在它的功能还在快速变强）。它一般是通过 linux-tools-common 这个包来添加的。</p>\n<p><code>perf</code> 可以做的事情很多，但是，如果我只能建议你学习其中的一个功能的话，那就是 CPU 剖析。虽然从技术角度来说，这并不是事件“跟踪”，而是采样sampling。最难的部分是获得完整的栈和符号，这部分在我的 <a href=\"http://www.brendangregg.com/blog/2015-02-27/linux-profiling-at-netflix.html\">Linux Profiling at Netflix</a> 中针对 Java 和 Node.js 讨论过。</p>\n<h4 id=\"toc_3\">2. 知道它能干什么</h4>\n<p>正如一位朋友所说的：“你不需要知道 X 光机是如何工作的，但你需要明白的是，如果你吞下了一个硬币，X 光机是你的一个选择！”你需要知道使用跟踪器能够做什么，因此，如果你在业务上确实需要它，你可以以后再去学习它，或者请会使用它的人来做。</p>\n<p>简单地说：几乎任何事情都可以通过跟踪来了解它。内部文件系统、TCP/IP 处理过程、设备驱动、应用程序内部情况。阅读我在 lwn.net 上的 <a href=\"http://lwn.net/Articles/608497/\">ftrace</a> 的文章，也可以去浏览 <a href=\"http://www.brendangregg.com/perf.html\">perf_events 页面</a>，那里有一些跟踪（和剖析）能力的示例。</p>\n<h4 id=\"toc_4\">3. 需要一个前端工具</h4>\n<p>如果你要购买一个性能分析工具（有许多公司销售这类产品），并要求支持 Linux 跟踪。想要一个直观的“点击”界面去探查内核的内部，以及包含一个在不同堆栈位置的延迟热力图。就像我在 <a href=\"http://www.brendangregg.com/blog/2015-06-23/netflix-instance-analysis-requirements.html\">Monitorama 演讲</a> 中描述的那样。</p>\n<p>我创建并开源了我自己的一些前端工具，虽然它是基于 CLI 的（不是图形界面的）。这样可以使其它人使用跟踪器更快更容易。比如，我的 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">perf-tools</a>，跟踪新进程是这样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99ed0dbfb2511810543\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ./execsnoop\r\nTracing exec()s. Ctrl-C to end.\r\n PID PPID ARGS\r\n 22898 22004 man ls\r\n 22905 22898 preconv -e UTF-8\r\n 22908 22898 pager -s\r\n 22907 22898 nroff -mandoc -rLL=164n -rLT=164n -Tutf8\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa99ed0dbfb2511810543-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfb2511810543-1\"><span class=\"crayon-p\"># ./execsnoop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfb2511810543-2\"><span class=\"crayon-e\">Tracing </span><span class=\"crayon-e\">exec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ctrl</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfb2511810543-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">PPID </span><span class=\"crayon-i\">ARGS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfb2511810543-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22004</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfb2511810543-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22905</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preconv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UTF</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfb2511810543-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22908</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pager</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfb2511810543-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22907</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nroff</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mandoc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rLL</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">164n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rLT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">164n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Tutf8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99ed0dbfb2511810543-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aa99ed0dbfb2511810543-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>在 Netflix 公司，我正在开发 <a href=\"http://techblog.netflix.com/2015/04/introducing-vector-netflixs-on-host.html\">Vector</a>，它是一个实例分析工具，实际上它也是一个 Linux 跟踪器的前端。</p>\n<h3 id=\"toc_5\">对于性能或者内核工程师</h3>\n<p>一般来说，我们的工作都非常难，因为大多数人或许要求我们去搞清楚如何去跟踪某个事件，以及因此需要选择使用哪个跟踪器。为完全理解一个跟踪器，你通常需要花至少一百多个小时去使用它。理解所有的 Linux 跟踪器并能在它们之间做出正确的选择是件很难的事情。（我或许是唯一接近完成这件事的人）</p>\n<p>在这里我建议选择如下，要么：</p>\n<p>A）选择一个全能的跟踪器，并以它为标准。这需要在一个测试环境中花大量的时间来搞清楚它的细微差别和安全性。我现在的建议是 SystemTap 的最新版本（例如，从 <a href=\"https://sourceware.org/git/?p=systemtap.git;a=blob_plain;f=README;hb=HEAD\">源代码</a> 构建）。我知道有的公司选择的是 LTTng ，尽管它并不是很强大（但是它很安全），但他们也用的很好。如果在 <code>sysdig</code> 中添加了跟踪点或者是 kprobes，它也是另外的一个候选者。</p>\n<p>B）按我的 <a href=\"http://www.slideshare.net/brendangregg/velocity-2015-linux-perf-tools\">Velocity 教程中</a> 的流程图。这意味着尽可能使用 ftrace 或者 perf_events，eBPF 已经集成到内核中了，然后用其它的跟踪器，如 SystemTap/LTTng 作为对 eBPF 的补充。我目前在 Netflix 的工作中就是这么做的。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e8c50ccc72d9f49c3f75c3d34f139c65.png\" alt=\"\"></p>\n<p>以下是我对各个跟踪器的评价：</p>\n<h4 id=\"toc_6\">1. ftrace</h4>\n<p>我爱 <a href=\"http://lwn.net/Articles/370423/\">ftrace</a>，它是内核黑客最好的朋友。它被构建进内核中，它能够利用跟踪点、kprobes、以及 uprobes，以提供一些功能：使用可选的过滤器和参数进行事件跟踪；事件计数和计时，内核概览；函数流步进function-flow walking。关于它的示例可以查看内核源代码树中的 <a href=\"https://www.kernel.org/doc/Documentation/trace/ftrace.txt\">ftrace.txt</a>。它通过 <code>/sys</code> 来管理，是面向单一的 root 用户的（虽然你可以使用缓冲实例以让其支持多用户），它的界面有时很繁琐，但是它比较容易调校hackable，并且有个前端：ftrace 的主要创建者 Steven Rostedt 设计了一个 trace-cmd，而且我也创建了 perf-tools 集合。我最诟病的就是它不是可编程的programmable，因此，举个例子说，你不能保存和获取时间戳、计算延迟，以及将其保存为直方图。你需要转储事件到用户级以便于进行后期处理，这需要花费一些成本。它也许可以通过 eBPF 实现可编程。</p>\n<h4 id=\"toc_7\">2. perf_events</h4>\n<p><a href=\"https://perf.wiki.kernel.org/index.php/Main_Page\">perf_events</a> 是 Linux 用户的主要跟踪工具，它的源代码位于 Linux 内核中，一般是通过 linux-tools-common 包来添加的。它又称为 <code>perf</code>，后者指的是它的前端，它相当高效（动态缓存），一般用于跟踪并转储到一个文件中（perf.data），然后可以在之后进行后期处理。它可以做大部分 ftrace 能做的事情。它不能进行函数流步进，并且不太容易调校（而它的安全/错误检查做的更好一些）。但它可以做剖析（采样）、CPU 性能计数、用户级的栈转换、以及使用本地变量利用调试信息debuginfo进行行级跟踪line tracing。它也支持多个并发用户。与 ftrace 一样，它也不是内核可编程的，除非 eBPF 支持（补丁已经在计划中）。如果只学习一个跟踪器，我建议大家去学习 perf，它可以解决大量的问题，并且它也相当安全。</p>\n<h4 id=\"toc_8\">3. eBPF</h4>\n<p>扩展的伯克利包过滤器extended Berkeley Packet Filter（eBPF）是一个内核内in-kernel的虚拟机，可以在事件上运行程序，它非常高效（JIT）。它可能最终为 ftrace 和 perf_events 提供内核内编程in-kernel programming，并可以去增强其它跟踪器。它现在是由 Alexei Starovoitov 开发的，还没有实现完全的整合，但是对于一些令人印象深刻的工具，有些内核版本（比如，4.1）已经支持了：比如，块设备 I/O 的延迟热力图latency heat map。更多参考资料，请查阅 Alexei 的 <a href=\"http://www.phoronix.com/scan.php?page=news_item&amp;px=BPF-Understanding-Kernel-VM\">BPF 演示</a>，和它的 <a href=\"https://github.com/torvalds/linux/tree/master/samples/bpf\">eBPF 示例</a>。</p>\n<h4 id=\"toc_9\">4. SystemTap</h4>\n<p><a href=\"https://sourceware.org/systemtap/wiki\">SystemTap</a> 是一个非常强大的跟踪器。它可以做任何事情：剖析、跟踪点、kprobes、uprobes（它就来自 SystemTap）、USDT、内核内编程等等。它将程序编译成内核模块并加载它们 —— 这是一种很难保证安全的方法。它开发是在内核代码树之外进行的，并且在过去出现过很多问题（内核崩溃或冻结）。许多并不是 SystemTap 的过错 —— 它通常是首次对内核使用某些跟踪功能，并率先遇到 bug。最新版本的 SystemTap 是非常好的（你需要从它的源代码编译），但是，许多人仍然没有从早期版本的问题阴影中走出来。如果你想去使用它，花一些时间去测试环境，然后，在 irc.freenode.net 的 #systemtap 频道与开发者进行讨论。（Netflix 有一个容错架构，我们使用了 SystemTap，但是我们或许比起你来说，更少担心它的安全性）我最诟病的事情是，它似乎假设你有办法得到内核调试信息，而我并没有这些信息。没有它我实际上可以做很多事情，但是缺少相关的文档和示例（我现在自己开始帮着做这些了）。</p>\n<h4 id=\"toc_10\">5. LTTng</h4>\n<p><a href=\"http://lttng.org/\">LTTng</a> 对事件收集进行了优化，性能要好于其它的跟踪器，也支持许多的事件类型，包括 USDT。它的开发是在内核代码树之外进行的。它的核心部分非常简单：通过一个很小的固定指令集写入事件到跟踪缓冲区。这样让它既安全又快速。缺点是做内核内编程不太容易。我觉得那不是个大问题，由于它优化的很好，可以充分的扩展，尽管需要后期处理。它也探索了一种不同的分析技术。很多的“黑匣子”记录了所有感兴趣的事件，以便可以在 GUI 中以后分析它。我担心该记录会错失之前没有预料的事件，我真的需要花一些时间去看看它在实践中是如何工作的。这个跟踪器上我花的时间最少（没有特别的原因）。</p>\n<h4 id=\"toc_11\">6. ktap</h4>\n<p><a href=\"http://ktap.org/\">ktap</a> 是一个很有前途的跟踪器，它在内核中使用了一个 lua 虚拟机，不需要调试信息和在嵌入时设备上可以工作的很好。这使得它进入了人们的视野，在某个时候似乎要成为 Linux 上最好的跟踪器。然而，由于 eBPF 开始集成到了内核，而 ktap 的集成工作被推迟了，直到它能够使用 eBPF 而不是它自己的虚拟机。由于 eBPF 在几个月过去之后仍然在集成过程中，ktap 的开发者已经等待了很长的时间。我希望在今年的晚些时间它能够重启开发。</p>\n<h4 id=\"toc_12\">7. dtrace4linux</h4>\n<p><a href=\"https://github.com/dtrace4linux/linux\">dtrace4linux</a> 主要由一个人（Paul Fox）利用业务时间将 Sun DTrace 移植到 Linux 中的。它令人印象深刻，一些供应器provider可以工作，还不是很完美，它最多应该算是实验性的工具（不安全）。我认为对于许可证的担心，使人们对它保持谨慎：它可能永远也进入不了 Linux 内核，因为 Sun 是基于 CDDL 许可证发布的 DTrace；Paul 的方法是将它作为一个插件。我非常希望看到 Linux 上的 DTrace，并且希望这个项目能够完成，我想我加入 Netflix 时将花一些时间来帮它完成。但是，我一直在使用内置的跟踪器 ftrace 和 perf_events。</p>\n<h4 id=\"toc_13\">8. OL DTrace</h4>\n<p><a href=\"http://docs.oracle.com/cd/E37670_01/E38608/html/index.html\">Oracle Linux DTrace</a> 是将 DTrace 移植到 Linux （尤其是 Oracle Linux）的重大努力。过去这些年的许多发布版本都一直稳定的进步，开发者甚至谈到了改善 DTrace 测试套件，这显示出这个项目很有前途。许多有用的功能已经完成：系统调用、剖析、sdt、proc、sched、以及 USDT。我一直在等待着 fbt（函数边界跟踪，对内核的动态跟踪），它将成为 Linux 内核上非常强大的功能。它最终能否成功取决于能否吸引足够多的人去使用 Oracle Linux（并为支持付费）。另一个羁绊是它并非完全开源的：内核组件是开源的，但用户级代码我没有看到。</p>\n<h4 id=\"toc_14\">9. sysdig</h4>\n<p><a href=\"http://www.sysdig.org/\">sysdig</a> 是一个很新的跟踪器，它可以使用类似 <code>tcpdump</code> 的语法来处理系统调用syscall事件，并用 lua 做后期处理。它也是令人印象深刻的，并且很高兴能看到在系统跟踪领域的创新。它的局限性是，它的系统调用只能是在当时，并且，它转储所有事件到用户级进行后期处理。你可以使用系统调用来做许多事情，虽然我希望能看到它去支持跟踪点、kprobes、以及 uprobes。我也希望看到它支持 eBPF 以查看内核内概览。sysdig 的开发者现在正在增加对容器的支持。可以关注它的进一步发展。</p>\n<h3 id=\"toc_15\">深入阅读</h3>\n<p>我自己的工作中使用到的跟踪器包括：</p>\n<ul>\n<li><strong>ftrace</strong> ： 我的 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">perf-tools</a> 集合（查看示例目录）；我的 lwn.net 的 <a href=\"http://lwn.net/Articles/608497/\">ftrace 跟踪器的文章</a>； 一个 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">LISA14</a> 演讲；以及帖子： <a href=\"http://www.brendangregg.com/blog/2014-07-13/linux-ftrace-function-counting.html\">函数计数</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-16/iosnoop-for-linux.html\">iosnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-25/opensnoop-for-linux.html\">opensnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-28/execsnoop-for-linux.html\">execsnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-09-06/linux-ftrace-tcp-retransmit-tracing.html\">TCP retransmits</a>、 <a href=\"http://www.brendangregg.com/blog/2015-06-28/linux-ftrace-uprobe.html\">uprobes</a> 和 <a href=\"http://www.brendangregg.com/blog/2015-07-03/hacking-linux-usdt-ftrace.html\">USDT</a>。</li>\n<li><strong>perf_events</strong> ： 我的 <a href=\"http://www.brendangregg.com/perf.html\">perf_events 示例</a> 页面；在 SCALE 的一个 <a href=\"http://www.brendangregg.com/blog/2015-02-27/linux-profiling-at-netflix.html\">Linux Profiling at Netflix</a> 演讲；和帖子：<a href=\"http://www.brendangregg.com/blog/2014-06-22/perf-cpu-sample.html\">CPU 采样</a>、<a href=\"http://www.brendangregg.com/blog/2014-06-29/perf-static-tracepoints.html\">静态跟踪点</a>、<a href=\"http://www.brendangregg.com/blog/2014-07-01/perf-heat-maps.html\">热力图</a>、<a href=\"http://www.brendangregg.com/blog/2014-07-03/perf-counting.html\">计数</a>、<a href=\"http://www.brendangregg.com/blog/2014-09-11/perf-kernel-line-tracing.html\">内核行级跟踪</a>、<a href=\"http://www.brendangregg.com/blog/2015-02-26/linux-perf-off-cpu-flame-graph.html\">off-CPU 时间火焰图</a>。</li>\n<li><strong>eBPF</strong> : 帖子 <a href=\"http://www.brendangregg.com/blog/2015-05-15/ebpf-one-small-step.html\">eBPF：一个小的进步</a>，和一些 <a href=\"https://github.com/brendangregg/BPF-tools\">BPF-tools</a> （我需要发布更多）。</li>\n<li><strong>SystemTap</strong> ： 很久以前，我写了一篇 <a href=\"http://dtrace.org/blogs/brendan/2011/10/15/using-systemtap/\">使用 SystemTap</a> 的文章，它有点过时了。最近我发布了一些 <a href=\"https://github.com/brendangregg/systemtap-lwtools\">systemtap-lwtools</a>，展示了在没有内核调试信息的情况下，SystemTap 是如何使用的。</li>\n<li><strong>LTTng</strong> ： 我使用它的时间很短，不足以发布什么文章。</li>\n<li><strong>ktap</strong> ： 我的 <a href=\"http://www.brendangregg.com/ktap.html\">ktap 示例</a> 页面包括一行程序和脚本，虽然它是早期的版本。</li>\n<li><strong>dtrace4linux</strong> ： 在我的 <a href=\"http://www.brendangregg.com/sysperfbook.html\">系统性能</a> 书中包含了一些示例，并且在过去我为了某些事情开发了一些小的修补，比如， <a href=\"https://github.com/dtrace4linux/linux/issues/55\">timestamps</a>。</li>\n<li><strong>OL DTrace</strong> ： 因为它是对 DTrace 的直接移植，我早期 DTrace 的工作大多与之相关（链接太多了，可以去 <a href=\"http://www.brendangregg.com\">我的主页</a> 上搜索）。一旦它更加完美，我可以开发很多专用工具。</li>\n<li><strong>sysdig</strong> ： 我贡献了 <a href=\"https://github.com/brendangregg/sysdig/commit/d0eeac1a32d6749dab24d1dc3fffb2ef0f9d7151\">fileslower</a> 和 <a href=\"https://github.com/brendangregg/sysdig/commit/2f21604dce0b561407accb9dba869aa19c365952\">subsecond offset spectrogram</a> 的 chisel。</li>\n<li><strong>其它</strong> ： 关于 <a href=\"http://www.brendangregg.com/blog/2014-05-11/strace-wow-much-syscall.html\">strace</a>，我写了一些告诫文章。</li>\n</ul>\n<p>不好意思，没有更多的跟踪器了！ … 如果你想知道为什么 Linux 中的跟踪器不止一个，或者关于 DTrace 的内容，在我的 <a href=\"http://www.brendangregg.com/blog/2015-02-28/from-dtrace-to-linux.html\">从 DTrace 到 Linux</a> 的演讲中有答案，从 <a href=\"http://www.slideshare.net/brendangregg/from-dtrace-to-linux/28\">第 28 张幻灯片</a> 开始。</p>\n<p>感谢 <a href=\"http://www.beginningwithi.com/\">Deirdre Straughan</a> 的编辑，以及跟踪小马的创建（General Zoi 是小马的创建者）。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113735\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113735votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113735\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 2, "create_date": "2018-03-10", "praise_nums": 1}
{"url_obj_id": "8dc9c672255230d0cfa267884f1e9bb5", "url": "http://blog.jobbole.com/113707/", "title": "利用 DB 实现分布式锁的思路", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/07/8266f93c2d45d97e0d52e71428ca372e.png"], "tags": "IT技术,,分布式", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h3>概述</h3>\n<p>以前参加过一个库存系统，由于其业务复杂性，搞了很多个应用来支撑。这样的话一份库存数据就有可能同时有多个应用来修改库存数据。比如说，有定时任务域xx.cron，和SystemA域和SystemB域这几个JAVA应用，可能同时修改同一份库存数据。如果不做协调的话，就会有脏数据出现。对于跨JAVA进程的线程协调，可以借助外部环境，例如DB或者Redis。下文介绍一下如何使用DB来实现分布式锁。</p>\n<h3>设计</h3>\n<p>本文设计的分布式锁的交互方式如下：<br>\n1、根据业务字段生成<code>transaction_id</code>，并线程安全的创建锁资源<br>\n2、根据<code>transaction_id</code>申请锁<br>\n3、释放锁</p>\n<h3>动态创建锁资源</h3>\n<p>在使用<code>synchronized</code>关键字的时候，必须指定一个锁对象。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb929d920096045\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsynchronized(obj) {\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb929d920096045-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb929d920096045-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb929d920096045-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb929d920096045-1\"><span class=\"crayon-e\">synchronized</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb929d920096045-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb929d920096045-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>进程内的线程可以基于obj来实现同步。obj在这里可以理解为一个锁对象。如果线程要进入<code>synchronized</code>代码块里，必须先持有obj对象上的锁。这种锁是JAVA里面的内置锁，创建的过程是线程安全的。那么借助DB，如何保证创建锁的过程是线程安全的呢？可以利用DB中的<code>UNIQUE KEY</code>特性，一旦出现了重复的key，由于<code>UNIQUE KEY</code>的唯一性，会抛出异常的。在JAVA里面，是<code>SQLIntegrityConstraintViolationException</code>异常。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92a7896946864\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncreate table distributed_lock\r\n(\r\n    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT COMMENT '自增主键',\r\n    transaction_id varchar(128) NOT NULL DEFAULT '' COMMENT '事务id',\r\n    last_update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL COMMENT '最后更新时间',\r\n    create_time TIMESTAMP DEFAULT '0000-00-00 00:00:00' NOT NULL COMMENT '创建时间',\r\n    UNIQUE KEY `idx_transaction_id` (`transaction_id`)\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92a7896946864-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92a7896946864-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92a7896946864-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92a7896946864-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92a7896946864-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92a7896946864-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92a7896946864-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92a7896946864-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92a7896946864-1\"><span class=\"crayon-e\">create </span><span class=\"crayon-e\">table </span><span class=\"crayon-e\">distributed_lock</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92a7896946864-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92a7896946864-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">id </span><span class=\"crayon-e\">BIGINT </span><span class=\"crayon-t\">UNSIGNED</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'自增主键'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92a7896946864-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">transaction_id </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">128</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'事务id'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92a7896946864-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">last_update_time </span><span class=\"crayon-e\">TIMESTAMP </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CURRENT_TIMESTAMP </span><span class=\"crayon-e\">ON </span><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">CURRENT_TIMESTAMP </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'最后更新时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92a7896946864-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">create_time </span><span class=\"crayon-e\">TIMESTAMP </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0000-00-00 00:00:00'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'创建时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92a7896946864-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">idx_transaction_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">transaction_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92a7896946864-8\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><code>transaction_id</code>是事务Id，比如说，可以用</p>\n<blockquote><p>仓库 + 条码 + 销售模式</p></blockquote>\n<p>来组装一个<code>transaction_id</code>，表示某仓库某销售模式下的某个条码资源。不同条码，当然就有不同的<code>transaction_id</code>。如果有两个应用，拿着相同的<code>transaction_id</code>来创建锁资源的时候，只能有一个应用创建成功。</p>\n<blockquote><p>一条<code>distributed_lock</code>记录插入成功了，就表示一份锁资源创建成功了。</p></blockquote>\n<h3>DB连接池列表设计</h3>\n<p>在写操作频繁的业务系统中，通常会进行分库，以降低单数据库写入的压力，并提高写操作的吞吐量。如果使用了分库，那么业务数据自然也都分配到各个数据库上了。在这种水平切分的多数据库上使用DB分布式锁，可以自定义一个<code>DataSouce</code>列表。并暴露一个<code>getConnection(String transactionId)</code>方法，按照<code>transactionId</code>找到对应的<code>Connection</code>。</p>\n<p>实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92ac770666786\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage dlock;\r\n\r\nimport com.alibaba.druid.pool.DruidDataSource;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.sql.Connection;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Properties;\r\n\r\n@Component\r\npublic class DataSourcePool {\r\n    private List dlockDataSources = new ArrayList();\r\n\r\n    @PostConstruct\r\n    private void initDataSourceList() throws IOException {\r\n        Properties properties = new Properties();\r\n        FileInputStream fis = new FileInputStream(\"db.properties\");\r\n        properties.load(fis);\r\n\r\n        Integer lockNum = Integer.valueOf(properties.getProperty(\"DLOCK_NUM\"));\r\n        for (int i = 0; i \"DLOCK_USER_\" + i);\r\n            String password = properties.getProperty(\"DLOCK_PASS_\" + i);\r\n            Integer initSize = Integer.valueOf(properties.getProperty(\"DLOCK_INIT_SIZE_\" + i));\r\n            Integer maxSize = Integer.valueOf(properties.getProperty(\"DLOCK_MAX_SIZE_\" + i));\r\n            String url = properties.getProperty(\"DLOCK_URL_\" + i);\r\n\r\n            DruidDataSource dataSource = createDataSource(user,password,initSize,maxSize,url);\r\n            dlockDataSources.add(dataSource);\r\n        }\r\n    }\r\n\r\n    private DruidDataSource createDataSource(String user, String password, Integer initSize, Integer maxSize, String url) {\r\n        DruidDataSource dataSource = new DruidDataSource();\r\n        dataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\r\n        dataSource.setUsername(user);\r\n        dataSource.setPassword(password);\r\n        dataSource.setUrl(url);\r\n        dataSource.setInitialSize(initSize);\r\n        dataSource.setMaxActive(maxSize);\r\n\r\n        return dataSource;\r\n    }\r\n\r\n    public Connection getConnection(String transactionId) throws Exception {\r\n        if (dlockDataSources.size() 0) {\r\n            return null;\r\n        }\r\n\r\n        if (transactionId == null || \"\".equals(transactionId)) {\r\n            throw new RuntimeException(\"transactionId是必须的\");\r\n        }\r\n\r\n        int hascode = transactionId.hashCode();\r\n        if (hascode 0) {\r\n            hascode = - hascode;\r\n        }\r\n\r\n        return dlockDataSources.get(hascode % dlockDataSources.size()).getConnection();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92ac770666786-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92ac770666786-64\">64</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">alibaba</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">druid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DruidDataSource</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stereotype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Component</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">javax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">annotation</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PostConstruct</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FileInputStream</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">IOException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-9\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Connection</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-10\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-11\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-12\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Properties</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-14\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Component</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-15\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DataSourcePool</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ArrayList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">PostConstruct</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-19\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">initDataSourceList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Properties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Properties</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">FileInputStream </span><span class=\"crayon-v\">fis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FileInputStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"db.properties\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">load</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fis</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lockNum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_NUM\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"DLOCK_USER_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_PASS_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">initSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_INIT_SIZE_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_MAX_SIZE_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_URL_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-30\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">createDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-e\">createDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DruidDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setDriverClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"com.mysql.jdbc.Driver\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setUsername</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setPassword</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setUrl</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setInitialSize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setMaxActive</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-44\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-50\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-52\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-54\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RuntimeException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transactionId是必须的\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-56\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hashCode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-59\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-61\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-62\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92ac770666786-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92ac770666786-64\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0108 seconds] -->\r\n<p>首先编写一个<code>initDataSourceList</code>方法，并利用Spring的<code>PostConstruct</code>注解初始化一个<code>DataSource</code> 列表。相关的DB配置从<code>db.properties</code>读取。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92b1651125582\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDLOCK_NUM=2\r\n\r\nDLOCK_USER_0=\"user1\"\r\nDLOCK_PASS_0=\"pass1\"\r\nDLOCK_INIT_SIZE_0=2\r\nDLOCK_MAX_SIZE_0=10\r\nDLOCK_URL_0=\"jdbc:mysql://localhost:3306/test1\"\r\n\r\nDLOCK_USER_1=\"user1\"\r\nDLOCK_PASS_1=\"pass1\"\r\nDLOCK_INIT_SIZE_1=2\r\nDLOCK_MAX_SIZE_1=10\r\nDLOCK_URL_1=\"jdbc:mysql://localhost:3306/test2\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b1651125582-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b1651125582-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-1\"><span class=\"crayon-v\">DLOCK_NUM</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-3\"><span class=\"crayon-v\">DLOCK_USER_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-4\"><span class=\"crayon-v\">DLOCK_PASS_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"pass1\"</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-5\"><span class=\"crayon-v\">DLOCK_INIT_SIZE_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-6\"><span class=\"crayon-v\">DLOCK_MAX_SIZE_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-7\"><span class=\"crayon-v\">DLOCK_URL_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"jdbc:mysql://localhost:3306/test1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-8\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-9\"><span class=\"crayon-v\">DLOCK_USER_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-10\"><span class=\"crayon-v\">DLOCK_PASS_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"pass1\"</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-11\"><span class=\"crayon-v\">DLOCK_INIT_SIZE_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b1651125582-12\"><span class=\"crayon-v\">DLOCK_MAX_SIZE_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b1651125582-13\"><span class=\"crayon-v\">DLOCK_URL_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"jdbc:mysql://localhost:3306/test2\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><code>DataSource</code>使用阿里的<code>DruidDataSource</code>。</p>\n<p>接着最重要的一个实现<code>getConnection(String transactionId)</code>方法。实现原理很简单，获取<code>transactionId</code>的hashcode，并对<code>DataSource</code>的长度取模即可。</p>\n<p>连接池列表设计好后，就可以实现往<code>distributed_lock</code>表插入数据了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92b5290291310\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage dlock;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.sql.*;\r\n\r\n@Component\r\npublic class DistributedLock {\r\n\r\n    @Autowired\r\n    private DataSourcePool dataSourcePool;\r\n\r\n    /**\r\n     * 根据transactionId创建锁资源\r\n     */\r\n    public String createLock(String transactionId) throws Exception{\r\n        if (transactionId == null) {\r\n            throw new RuntimeException(\"transactionId是必须的\");\r\n        }\r\n        Connection connection = null;\r\n        Statement statement = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            connection.setAutoCommit(false);\r\n            statement = connection.createStatement();\r\n            statement.executeUpdate(\"INSERT INTO distributed_lock(transaction_id) VALUES ('\" + transactionId + \"')\");\r\n            connection.commit();\r\n            return transactionId;\r\n        }\r\n        catch (SQLIntegrityConstraintViolationException icv) {\r\n            //说明已经生成过了。\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            return transactionId;\r\n        }\r\n        catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (statement != null) {\r\n                statement.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b5290291310-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b5290291310-54\">54</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beans</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">annotation</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Autowired</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stereotype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Component</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-8\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Component</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-9\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DistributedLock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-10\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Autowired</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-12\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DataSourcePool </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-15\"><span class=\"crayon-c\">     * 根据transactionId创建锁资源</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-16\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">createLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RuntimeException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transactionId是必须的\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Statement </span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setAutoCommit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">statement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"INSERT INTO distributed_lock(transaction_id) VALUES ('\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"')\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SQLIntegrityConstraintViolationException </span><span class=\"crayon-v\">icv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">//说明已经生成过了。</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-34\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-40\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-41\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">statement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-48\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-49\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-50\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b5290291310-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b5290291310-54\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p></p>\n<h3>根据transactionId锁住线程</h3>\n<p>接下来利用DB的<code>select for update</code>特性来锁住线程。当多个线程根据相同的<code>transactionId</code>并发同时操作<code>select for update</code>的时候，只有一个线程能成功，其他线程都<code>block</code>住，直到<code>select for update</code>成功的线程使用<code>commit</code>操作后，<code>block</code>住的所有线程的其中一个线程才能开始干活。我们在上面的<code>DistributedLock</code>类中创建一个<code>lock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92b9933929446\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public boolean lock(String transactionId) throws Exception {\r\n        Connection connection = null;\r\n        PreparedStatement preparedStatement = null;\r\n        ResultSet resultSet = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            preparedStatement = connection.prepareStatement(\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \");\r\n            preparedStatement.setString(1,transactionId);\r\n            resultSet = preparedStatement.executeQuery();\r\n            if (!resultSet.next()) {\r\n                connection.rollback();\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (preparedStatement != null) {\r\n                preparedStatement.close();\r\n            }\r\n\r\n            if (resultSet != null) {\r\n                resultSet.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92b9933929446-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92b9933929446-34\">34</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">PreparedStatement </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ResultSet </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prepareStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeQuery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92b9933929446-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92b9933929446-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0048 seconds] -->\r\n<p></p>\n<h3>实现解锁操作</h3>\n<p>当线程执行完任务后，必须手动的执行解锁操作，之前被锁住的线程才能继续干活。在我们上面的实现中，其实就是获取到当时<code>select for update</code>成功的线程对应的<code>Connection</code>，并实行<code>commit</code>操作即可。</p>\n<p>那么如何获取到呢？我们可以利用<code>ThreadLocal</code>。首先在<code>DistributedLock</code>类中定义</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92be372382383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate ThreadLocal threadLocalConn = new ThreadLocal();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92be372382383-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92be372382383-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ThreadLocal </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ThreadLocal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>每次调用<code>lock</code>方法的时候，把<code>Connection</code>放置到<code>ThreadLocal</code>里面。我们修改<code>lock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92c1568675573\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public boolean lock(String transactionId) throws Exception {\r\n        Connection connection = null;\r\n        PreparedStatement preparedStatement = null;\r\n        ResultSet resultSet = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            threadLocalConn.set(connection);\r\n            preparedStatement = connection.prepareStatement(\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \");\r\n            preparedStatement.setString(1,transactionId);\r\n            resultSet = preparedStatement.executeQuery();\r\n            if (!resultSet.next()) {\r\n                connection.rollback();\r\n                threadLocalConn.remove();\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n                threadLocalConn.remove();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (preparedStatement != null) {\r\n                preparedStatement.close();\r\n            }\r\n\r\n            if (resultSet != null) {\r\n                resultSet.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c1568675573-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c1568675573-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">PreparedStatement </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ResultSet </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prepareStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeQuery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-19\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-20\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-28\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-32\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-34\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c1568675573-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c1568675573-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>这样子，当获取到<code>Connection</code>后，将其设置到<code>ThreadLocal</code>中，如果<code>lock</code>方法出现异常，则将其从<code>ThreadLocal</code>中移除掉。</p>\n<p>有了这几步后，我们可以来实现解锁操作了。我们在<code>DistributedLock</code>添加一个<code>unlock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9f03eb92c5224070196\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public void unlock() throws Exception {\r\n        Connection connection = null;\r\n        try {\r\n            connection = threadLocalConn.get();\r\n            if (!connection.isClosed()) {\r\n                connection.commit();\r\n                connection.close();\r\n                threadLocalConn.remove();\r\n            }\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n                connection.close();\r\n            }\r\n            threadLocalConn.remove();\r\n            throw e;\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9f03eb92c5224070196-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9f03eb92c5224070196-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isClosed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-6\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9f03eb92c5224070196-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9f03eb92c5224070196-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p></p>\n<h3>缺点</h3>\n<p>毕竟是利用DB来实现分布式锁，对DB还是造成一定的压力。当时考虑使用DB做分布式的一个重要原因是，我们的应用是后端应用，平时流量不大的，反而关键的是要保证库存数据的正确性。对于像前端库存系统，比如添加购物车占用库存等操作，最好别使用DB来实现分布式锁了。</p>\n<h3>进一步思考</h3>\n<p>如果想锁住多份数据该怎么实现？比如说，某个库存操作，既要修改物理库存，又要修改虚拟库存，想锁住物理库存的同时，又锁住虚拟库存。其实也不是很难，参考<code>lock</code>方法，写一个<code>multiLock</code>方法，提供多个<code>transactionId</code>的入参，for循环处理就可以了。这个后续有时间再补上。</p>\n</div>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/54f7206fd1f1907bec78ddf32f50d66d.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113707\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113707votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113707\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/3660a090181b2b6ae3bd8c07d393aa36.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网技术爱好者，目前就职于广州唯品会担任JAVA高级开发。个人的csdn技术博客如下：http://blog.csdn.net/linsongbin1本人伯乐在线的文章，都出自这个csdn博客        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/sam-2/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 4, "fav_nums": 3, "create_date": "2018-03-09", "praise_nums": 1}
{"url_obj_id": "44f879688ac007f05bd74cdf86522e39", "url": "http://blog.jobbole.com/113737/", "title": "给 “rm” 命令添加个“垃圾桶”", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "tags": "IT技术,,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.2daygeek.com/rm-command-to-move-files-to-trash-can-rm-alias/\">2daygeek</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9425-1.html\">Linux中国/amwps290</a>   </div><p>人类犯错误是因为我们不是一个可编程设备，所以，在使用 <code>rm</code> 命令时要额外注意，不要在任何时候使用 <code>rm -rf *</code>。当你使用 <code>rm</code> 命令时，它会永久删除文件，不会像文件管理器那样将这些文件移动到 “垃圾箱”。</p>\n<p>有时我们会将不应该删除的文件删除掉，所以当错误地删除了文件时该怎么办？ 你必须看看恢复工具（Linux 中有很多数据恢复工具），但我们不知道是否能将它百分之百恢复，所以要如何解决这个问题？</p>\n<p>我们最近发表了一篇关于 <a href=\"https://www.2daygeek.com/trash-cli-command-line-trashcan-linux-system/\">Trash-Cli</a> 的文章，在评论部分，我们从用户 Eemil Lgz 那里获得了一个关于 <a href=\"https://github.com/lagerspetz/linux-stuff/blob/master/scripts/saferm.sh\">saferm.sh</a> 脚本的更新，它可以帮助我们将文件移动到“垃圾箱”而不是永久删除它们。</p>\n<p>将文件移动到“垃圾桶”是一个好主意，当你无意中运行 <code>rm</code> 命令时，可以拯救你；但是很少有人会说这是一个坏习惯，如果你不注意“垃圾桶”，它可能会在一定的时间内被文件和文件夹堆积起来。在这种情况下，我建议你按照你的意愿去做一个定时任务。</p>\n<p>这适用于服务器和桌面两种环境。 如果脚本检测到 GNOME 、KDE、Unity 或 LXDE 桌面环境（DE），则它将文件或文件夹安全地移动到默认垃圾箱 <code>$HOME/.local/share/Trash/files</code>，否则会在您的主目录中创建垃圾箱文件夹 <code>$HOME/Trash</code>。</p>\n<p><code>saferm.sh</code> 脚本托管在 Github 中，可以从仓库中克隆，也可以创建一个名为 <code>saferm.sh</code> 的文件并复制其上的代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9faa368574480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git clone https://github.com/lagerspetz/linux-stuff\r\n$ sudo mv linux-stuff/scripts/saferm.sh /bin\r\n$ rm -Rf linux-stuff\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9faa368574480-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9faa368574480-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9faa368574480-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9faa368574480-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9faa368574480-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/lagerspetz/linux-stuff</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9faa368574480-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">stuff</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">scripts</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9faa368574480-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Rf </span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">stuff</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9faa368574480-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>在 <code>.bashrc</code> 文件中设置别名，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9fb7926505088\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalias rm=saferm.sh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fb7926505088-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fb7926505088-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fb7926505088-1\"><span class=\"crayon-e\">alias </span><span class=\"crayon-v\">rm</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fb7926505088-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>执行下面的命令使其生效，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9fbb005678191\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ source ~/.bashrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fbb005678191-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fbb005678191-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fbb005678191-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fbb005678191-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>一切就绪，现在你可以执行 <code>rm</code> 命令，自动将文件移动到”垃圾桶”，而不是永久删除它们。</p>\n<p>测试一下，我们将删除一个名为 <code>magi.txt</code> 的文件，命令行明确的提醒了 <code>Moving magi.txt to $HOME/.local/share/Trash/file</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9fbf015647490\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ rm -rf magi.txt\r\nMoving magi.txt to /home/magi/.local/share/Trash/files\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fbf015647490-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fbf015647490-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fbf015647490-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fbf015647490-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rf </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fbf015647490-2\"><span class=\"crayon-e\">Moving </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">magi</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Trash</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">files</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fbf015647490-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>也可以通过 <code>ls</code> 命令或 <code>trash-cli</code> 进行验证。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9fc2981190481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -lh /home/magi/.local/share/Trash/files\r\nPermissions Size User Date Modified Name\r\n.rw-r--r-- 32 magi 11 Oct 16:24 magi.txt    \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc2981190481-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc2981190481-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc2981190481-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc2981190481-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc2981190481-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">magi</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Trash</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">files</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc2981190481-2\"><span class=\"crayon-e\">Permissions </span><span class=\"crayon-e\">Size </span><span class=\"crayon-e\">User </span><span class=\"crayon-e\">Date </span><span class=\"crayon-e\">Modified </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc2981190481-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">magi</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc2981190481-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>或者我们可以通过文件管理器界面中查看相同的内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a21377f62f1d9e9057d4bd7380a6acf7.png\" alt=\"![][3]\"></p>\n<p>（LCTT 译注：原文此处混淆了部分 trash-cli 的内容，考虑到文章衔接和逻辑，此处略。）</p>\n<p>要了解 <code>saferm.sh</code> 的其他选项，请查看帮助。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1875a9fc6255907414\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ saferm.sh -h\r\nThis is saferm.sh 1.16. LXDE and Gnome3 detection.\r\nWill ask to unsafe-delete instead of cross-fs move. Allows unsafe (regular rm) delete (ignores trashinfo).\r\nCreates trash and trashinfo directories if they do not exist. Handles symbolic link deletion.\r\nDoes not complain about different user any more.\r\n\r\nUsage: /path/to/saferm.sh [OPTIONS] [--] files and dirs to safely remove\r\nOPTIONS:\r\n-r      allows recursively removing directories.\r\n-f      Allow deleting special files (devices, ...).\r\n-u      Unsafe mode, bypass trash and delete files permanently.\r\n-v      Verbose, prints more messages. Default in this version.\r\n-q      Quiet mode. Opposite of verbose.\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1875a9fc6255907414-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1875a9fc6255907414-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-2\"><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.16.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LXDE </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Gnome3 </span><span class=\"crayon-v\">detection</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-3\"><span class=\"crayon-e\">Will </span><span class=\"crayon-e\">ask </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unsafe</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">delete </span><span class=\"crayon-e\">instead </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">cross</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">move</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Allows </span><span class=\"crayon-e\">unsafe</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">regular </span><span class=\"crayon-v\">rm</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">ignores </span><span class=\"crayon-v\">trashinfo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-4\"><span class=\"crayon-e\">Creates </span><span class=\"crayon-e\">trash </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">trashinfo </span><span class=\"crayon-e\">directories </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">they </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Handles </span><span class=\"crayon-e\">symbolic </span><span class=\"crayon-e\">link </span><span class=\"crayon-v\">deletion</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-5\"><span class=\"crayon-e\">Does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complain </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">different </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">any </span><span class=\"crayon-v\">more</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-6\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-7\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTIONS</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">files </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirs </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">safely </span><span class=\"crayon-e\">remove</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-8\"><span class=\"crayon-v\">OPTIONS</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-9\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">allows </span><span class=\"crayon-e\">recursively </span><span class=\"crayon-e\">removing </span><span class=\"crayon-v\">directories</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-10\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Allow </span><span class=\"crayon-e\">deleting </span><span class=\"crayon-e\">special </span><span class=\"crayon-e\">files</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">devices</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-11\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Unsafe </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bypass </span><span class=\"crayon-e\">trash </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete </span><span class=\"crayon-e\">files </span><span class=\"crayon-v\">permanently</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-12\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">prints </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">messages</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">Default</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">version</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-13\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">q</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Quiet </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Opposite </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1875a9fc6255907414-14\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1875a9fc6255907414-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113737\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113737votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113737\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "fav_nums": 1, "create_date": "2018-03-11", "praise_nums": 1}
{"url_obj_id": "20d0b326ed26dff7f3c5708bdf46c1a5", "url": "http://blog.jobbole.com/113768/", "title": "Linux 启动过程分析", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/analyzing-linux-boot-process\">Alison Chaiken</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9437-1.html\">Linux中国/jessie-pang</a>   </div><blockquote><p>理解运转良好的系统对于处理不可避免的故障是最好的准备。</p></blockquote>\n<p>关于开源软件最古老的笑话是：“代码是自具文档化的self-documenting”。经验表明，阅读源代码就像听天气预报一样：明智的人依然出门会看看室外的天气。本文讲述了如何运用调试工具来观察和分析 Linux 系统的启动。分析一个功能正常的系统启动过程，有助于用户和开发人员应对不可避免的故障。</p>\n<p>从某些方面看，启动过程非常简单。内核在单核上以单线程和同步状态启动，似乎可以理解。但内核本身是如何启动的呢？<a href=\"https://en.wikipedia.org/wiki/Initial_ramdisk\">initrd（initial ramdisk）</a> 和引导程序bootloader具有哪些功能？还有，为什么以太网端口上的 LED 灯是常亮的呢？</p>\n<p>请继续阅读寻找答案。在 GitHub 上也提供了 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">介绍演示和练习的代码</a>。</p>\n<h3 id=\"toc_1\">启动的开始：OFF 状态</h3>\n<h4 id=\"toc_2\">局域网唤醒Wake-on-LAN</h4>\n<p>OFF 状态表示系统没有上电，没错吧？表面简单，其实不然。例如，如果系统启用了局域网唤醒机制（WOL），以太网指示灯将亮起。通过以下命令来检查是否是这种情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da429684295700\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool &lt;interface name&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da429684295700-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da429684295700-1\"><span class=\"crayon-p\"># sudo ethtool &lt;interface name&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>其中 &lt;interface name&gt;<code></code> 是网络接口的名字，比如 <code>eth0</code>。（<code>ethtool</code> 可以在同名的 Linux 软件包中找到。）如果输出中的 <code>Wake-on</code> 显示 <code>g</code>，则远程主机可以通过发送 <a href=\"https://en.wikipedia.org/wiki/Wake-on-LAN\">魔法数据包MagicPacket</a> 来启动系统。如果您无意远程唤醒系统，也不希望其他人这样做，请在系统 BIOS 菜单中将 WOL 关闭，或者用以下方式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da433921533929\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool -s &lt;interface name&gt; wol d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da433921533929-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da433921533929-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da433921533929-1\"><span class=\"crayon-p\"># sudo ethtool -s &lt;interface name&gt; wol d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da433921533929-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p>响应魔法数据包的处理器可能是网络接口的一部分，也可能是 <a href=\"https://lwn.net/Articles/630778/\">底板管理控制器Baseboard Management Controller</a>（BMC）。</p>\n<h4 id=\"toc_3\">英特尔管理引擎、平台控制器单元和 Minix</h4>\n<p>BMC 不是唯一的在系统关闭时仍在监听的微控制器（MCU）。x86_64 系统还包含了用于远程管理系统的英特尔管理引擎（IME）软件套件。从服务器到笔记本电脑，各种各样的设备都包含了这项技术，它开启了如 KVM 远程控制和英特尔功能许可服务等 <a href=\"https://www.youtube.com/watch?v=iffTJ1vPCSo&amp;amp;amp;amp;amp;amp;index=65&amp;amp;amp;amp;amp;amp;list=PLbzoR-pLrL6pISWAq-1cXP4_UZAyRtesk\">功能</a>。根据 <a href=\"https://www.intel.com/content/www/us/en/support/articles/000025619/software.html\">Intel 自己的检测工具</a>，<a href=\"https://security-center.intel.com/advisory.aspx?intelid=INTEL-SA-00086&amp;amp;amp;amp;amp;amp;languageid=en-fr\">IME 存在尚未修补的漏洞</a>。坏消息是，要禁用 IME 很难。Trammell Hudson 发起了一个 <a href=\"https://github.com/corna/me_cleaner\">me_cleaner 项目</a>，它可以清除一些相对恶劣的 IME 组件，比如嵌入式 Web 服务器，但也可能会影响运行它的系统。</p>\n<p>IME 固件和系统管理模式System Management Mode（SMM）软件是 <a href=\"https://lwn.net/Articles/738649/\">基于 Minix 操作系统</a> 的，并运行在单独的平台控制器单元Platform Controller Hub上（LCTT 译注：即南桥芯片），而不是主 CPU 上。然后，SMM 启动位于主处理器上的通用可扩展固件接口Universal Extensible Firmware Interface（UEFI）软件，相关内容 <a href=\"https://lwn.net/Articles/699551/\">已被提及多次</a>。Google 的 Coreboot 小组已经启动了一个雄心勃勃的 <a href=\"https://trmm.net/NERF\">非扩展性缩减版固件Non-Extensible Reduced Firmware</a>（NERF）项目，其目的不仅是要取代 UEFI，还要取代早期的 Linux 用户空间组件，如 systemd。在我们等待这些新成果的同时，Linux 用户现在就可以从 Purism、System76 或 Dell 等处购买 <a href=\"https://www.extremetech.com/computing/259879-dell-now-shipping-laptops-intels-management-engine-disabled\">禁用了 IME</a> 的笔记本电脑，另外 <a href=\"https://lwn.net/Articles/733837/\">带有 ARM 64 位处理器笔记本电脑</a> 还是值得期待的。</p>\n<h4 id=\"toc_4\">引导程序</h4>\n<p>除了启动那些问题不断的间谍软件外，早期引导固件还有什么功能呢？引导程序的作用是为新上电的处理器提供通用操作系统（如 Linux）所需的资源。在开机时，不但没有虚拟内存，在控制器启动之前连 DRAM 也没有。然后，引导程序打开电源，并扫描总线和接口，以定位内核镜像和根文件系统的位置。U-Boot 和 GRUB 等常见的引导程序支持 USB、PCI 和 NFS 等接口，以及更多的嵌入式专用设备，如 NOR 闪存和 NAND 闪存。引导程序还与 <a href=\"https://linuxplumbersconf.org/2017/ocw/events/LPC2017/tracks/639\">可信平台模块Trusted Platform Module</a>（TPM）等硬件安全设备进行交互，在启动最开始建立信任链。</p>\n<p><img class=\"aligncenter\" title=\"Running the U-boot bootloader\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a1db74d1a0f049a3aabdb89e5079bbce.png\" alt=\"Running the U-boot bootloader\"></p>\n<p style=\"text-align: center\"><em>在构建主机上的沙盒中运行 U-boot 引导程序。</em></p>\n<p>包括树莓派、任天堂设备、汽车主板和 Chromebook 在内的系统都支持广泛使用的开源引导程序 <a href=\"http://www.denx.de/wiki/DULG/Manual\">U-Boot</a>。它没有系统日志，当发生问题时，甚至没有任何控制台输出。为了便于调试，U-Boot 团队提供了一个沙盒，可以在构建主机甚至是夜间的持续集成（CI）系统上测试补丁程序。如果系统上安装了 Git 和 GNU Compiler Collection（GCC）等通用的开发工具，使用 U-Boot 沙盒会相对简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da439401761645\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# git clone git://git.denx.de/u-boot; cd u-boot\r\n# make ARCH=sandbox defconfig\r\n# make; ./u-boot\r\n=&gt; printenv\r\n=&gt; help\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da439401761645-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da439401761645-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da439401761645-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da439401761645-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da439401761645-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da439401761645-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da439401761645-1\"><span class=\"crayon-p\"># git clone git://git.denx.de/u-boot; cd u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da439401761645-2\"><span class=\"crayon-p\"># make ARCH=sandbox defconfig</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da439401761645-3\"><span class=\"crayon-p\"># make; ./u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da439401761645-4\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">printenv</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da439401761645-5\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da439401761645-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 x86_64 上运行 U-Boot，可以测试一些棘手的功能，如 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">模拟存储设备</a> 的重新分区、基于 TPM 的密钥操作以及 USB 设备热插拔等。U-Boot 沙盒甚至可以在 GDB 调试器下单步执行。使用沙盒进行开发的速度比将引导程序刷新到电路板上的测试快 10 倍，并且可以使用 <code>Ctrl + C</code> 恢复一个“变砖”的沙盒。</p>\n<h3 id=\"toc_5\">启动内核</h3>\n<h4 id=\"toc_6\">配置引导内核</h4>\n<p>引导程序完成任务后将跳转到已加载到主内存中的内核代码，并开始执行，传递用户指定的任何命令行选项。内核是什么样的程序呢？用命令 <code>file /boot/vmlinuz</code> 可以看到它是一个 “bzImage”，意思是一个大的压缩的镜像。Linux 源代码树包含了一个可以解压缩这个文件的工具—— <a href=\"https://github.com/torvalds/linux/blob/master/scripts/extract-vmlinux\">extract-vmlinux</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da43d851817188\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux\r\n# file vmlinux\r\nvmlinux: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically\r\nlinked, stripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da43d851817188-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da43d851817188-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da43d851817188-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da43d851817188-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da43d851817188-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da43d851817188-1\"><span class=\"crayon-p\"># scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da43d851817188-2\"><span class=\"crayon-p\"># file vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da43d851817188-3\"><span class=\"crayon-v\">vmlinux</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-v\">executable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">statically</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da43d851817188-4\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da43d851817188-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>内核是一个 <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\">可执行与可链接格式 Executable and Linking Format</a>（ELF）的二进制文件，就像 Linux 的用户空间程序一样。这意味着我们可以使用 <code>binutils</code> 包中的命令，如 <code>readelf</code> 来检查它。比较一下输出，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da440505923982\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# readelf -S /bin/date\r\n# readelf -S vmlinux\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da440505923982-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da440505923982-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da440505923982-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da440505923982-1\"><span class=\"crayon-p\"># readelf -S /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da440505923982-2\"><span class=\"crayon-p\"># readelf -S vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da440505923982-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这两个二进制文件中的段内容大致相同。</p>\n<p>所以内核必须像其他的 Linux ELF 文件一样启动，但用户空间程序是如何启动的呢？在 <code>main()</code> 函数中？并不确切。</p>\n<p>在 <code>main()</code> 函数运行之前，程序需要一个执行上下文，包括堆栈内存以及 <code>stdio</code>、<code>stdout</code> 和 <code>stderr</code> 的文件描述符。用户空间程序从标准库（多数 Linux 系统在用 “glibc”）中获取这些资源。参照以下输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da444459314445\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file /bin/date\r\n/bin/date: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically\r\nlinked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32,\r\nBuildID[sha1]=14e8563676febeb06d701dbee35d225c5a8e565a,\r\nstripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da444459314445-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da444459314445-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da444459314445-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da444459314445-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da444459314445-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da444459314445-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da444459314445-1\"><span class=\"crayon-p\"># file /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da444459314445-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-e\">shared </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dynamically</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da444459314445-3\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpreter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64.so.2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GNU</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.32</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da444459314445-4\"><span class=\"crayon-v\">BuildID</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">14e8563676febeb06d701dbee35d225c5a8e565a</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da444459314445-5\"><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da444459314445-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>ELF 二进制文件有一个解释器，就像 Bash 和 Python 脚本一样，但是解释器不需要像脚本那样用 <code>#!</code> 指定，因为 ELF 是 Linux 的原生格式。ELF 解释器通过调用 <code>_start()</code> 函数来用所需资源 <a href=\"https://0xax.gitbooks.io/linux-insides/content/Misc/program_startup.html\">配置一个二进制文件</a>，这个函数可以从 glibc 源代码包中找到，可以 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code/commit/e543d9812058f2dd65f6aed45b09dda886c5fd4e\">用 GDB 查看</a>。内核显然没有解释器，必须自我配置，这是怎么做到的呢？</p>\n<p>用 GDB 检查内核的启动给出了答案。首先安装内核的调试软件包，内核中包含一个未剥离的unstripped vmlinux，例如 <code>apt-get install linux-image-amd64-dbg</code>，或者从源代码编译和安装你自己的内核，可以参照 <a href=\"http://kernel-handbook.alioth.debian.org/\">Debian Kernel Handbook</a> 中的指令。<code>gdb vmlinux</code> 后加 <code>info files</code> 可显示 ELF 段 <code>init.text</code>。在 <code>init.text</code> 中用 <code>l *(address)</code> 列出程序执行的开头，其中 <code>address</code> 是 <code>init.text</code> 的十六进制开头。用 GDB 可以看到 x86_64 内核从内核文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/x86/boot/compressed/head_64.S\">arch/x86/kernel/head_64.S</a> 开始启动，在这个文件中我们找到了汇编函数 <code>start_cpu0()</code>，以及一段明确的代码显示在调用 <code>x86_64 start_kernel()</code> 函数之前创建了堆栈并解压了 zImage。ARM 32 位内核也有类似的文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/arm/boot/compressed/head.S\">arch/arm/kernel/head.S</a>。<code>start_kernel()</code> 不针对特定的体系结构，所以这个函数驻留在内核的 <a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中。<code>start_kernel()</code> 可以说是 Linux 真正的 <code>main()</code> 函数。</p>\n<h3 id=\"toc_7\">从 start_kernel() 到 PID 1</h3>\n<h4 id=\"toc_8\">内核的硬件清单：设备树和 ACPI 表</h4>\n<p>在引导时，内核需要硬件信息，不仅仅是已编译过的处理器类型。代码中的指令通过单独存储的配置数据进行扩充。有两种主要的数据存储方法：<a href=\"https://www.youtube.com/watch?v=m_NyYEBxfn8\">设备树device-tree</a> 和 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">高级配置和电源接口（ACPI）表</a>。内核通过读取这些文件了解每次启动时需要运行的硬件。</p>\n<p>对于嵌入式设备，设备树是已安装硬件的清单。设备树只是一个与内核源代码同时编译的文件，通常与 <code>vmlinux</code> 一样位于 <code>/boot</code> 目录中。要查看 ARM 设备上的设备树的内容，只需对名称与 <code>/boot/*.dtb</code> 匹配的文件执行 <code>binutils</code> 包中的 <code>strings</code> 命令即可，这里 <code>dtb</code> 是指设备树二进制文件device-tree binary。显然，只需编辑构成它的类 JSON 的文件并重新运行随内核源代码提供的特殊 <code>dtc</code> 编译器即可修改设备树。虽然设备树是一个静态文件，其文件路径通常由命令行引导程序传递给内核，但近年来增加了一个 <a href=\"http://lwn.net/Articles/616859/\">设备树覆盖</a> 的功能，内核在启动后可以动态加载热插拔的附加设备。</p>\n<p>x86 系列和许多企业级的 ARM64 设备使用 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">ACPI</a> 机制。与设备树不同的是，ACPI 信息存储在内核在启动时通过访问板载 ROM 而创建的 <code>/sys/firmware/acpi/tables</code> 虚拟文件系统中。读取 ACPI 表的简单方法是使用 <code>acpica-tools</code> 包中的 <code>acpidump</code> 命令。例如：</p>\n<p><img class=\"aligncenter\" title=\"ACPI tables on Lenovo laptops\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e1c561f573bf3f14de98b441ff6443d5.png\" alt=\"ACPI tables on Lenovo laptops\"></p>\n<p style=\"text-align: center\"><em>联想笔记本电脑的 ACPI 表都是为 Windows 2001 设置的。</em></p>\n<p>是的，你的 Linux 系统已经准备好用于 Windows 2001 了，你要考虑安装吗？与设备树不同，ACPI 具有方法和数据，而设备树更多地是一种硬件描述语言。ACPI 方法在启动后仍处于活动状态。例如，运行 <code>acpi_listen</code> 命令（在 <code>apcid</code> 包中），然后打开和关闭笔记本机盖会发现 ACPI 功能一直在运行。暂时地和动态地 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/method-customizing.txt\">覆盖 ACPI 表</a> 是可能的，而永久地改变它需要在引导时与 BIOS 菜单交互或刷新 ROM。如果你遇到那么多麻烦，也许你应该 <a href=\"https://www.coreboot.org/Supported_Motherboards\">安装 coreboot</a>，这是开源固件的替代品。</p>\n<h4 id=\"toc_9\">从 start_kernel() 到用户空间</h4>\n<p><a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中的代码竟然是可读的，而且有趣的是，它仍然在使用 1991 – 1992 年的 Linus Torvalds 的原始版权。在一个刚启动的系统上运行 <code>dmesg | head</code>，其输出主要来源于此文件。第一个 CPU 注册到系统中，全局数据结构被初始化，并且调度程序、中断处理程序（IRQ）、定时器和控制台按照严格的顺序逐一启动。在 <code>timekeeping_init()</code> 函数运行之前，所有的时间戳都是零。内核初始化的这部分是同步的，也就是说执行只发生在一个线程中，在最后一个完成并返回之前，没有任何函数会被执行。因此，即使在两个系统之间，<code>dmesg</code> 的输出也是完全可重复的，只要它们具有相同的设备树或 ACPI 表。Linux 的行为就像在 MCU 上运行的 RTOS（实时操作系统）一样，如 QNX 或 VxWorks。这种情况持续存在于函数 <code>rest_init()</code> 中，该函数在终止时由 <code>start_kernel()</code> 调用。</p>\n<p><img class=\"aligncenter\" title=\"Summary of early kernel boot process.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/731faee0c0adb28504bce94e646b22a2.png\" alt=\"Summary of early kernel boot process.\"></p>\n<p style=\"text-align: center\"><em>早期的内核启动流程。</em></p>\n<p>函数 <code>rest_init()</code> 产生了一个新进程以运行 <code>kernel_init()</code>，并调用了 <code>do_initcalls()</code>。用户可以通过将 <code>initcall_debug</code> 附加到内核命令行来监控 <code>initcalls</code>，这样每运行一次 <code>initcall</code> 函数就会产生 一个 <code>dmesg</code> 条目。<code>initcalls</code> 会历经七个连续的级别：early、core、postcore、arch、subsys、fs、device 和 late。<code>initcalls</code> 最为用户可见的部分是所有处理器外围设备的探测和设置：总线、网络、存储和显示器等等，同时加载其内核模块。<code>rest_init()</code> 也会在引导处理器上产生第二个线程，它首先运行 <code>cpu_idle()</code>，然后等待调度器分配工作。</p>\n<p><code>kernel_init()</code> 也可以 <a href=\"http://free-electrons.com/pub/conferences/2014/elc/clement-smp-bring-up-on-arm-soc\">设置对称多处理（SMP）结构</a>。在较新的内核中，如果 <code>dmesg</code> 的输出中出现 “Bringing up secondary CPUs…” 等字样，系统便使用了 SMP。SMP 通过“热插拔” CPU 来进行，这意味着它用状态机来管理其生命周期，这种状态机在概念上类似于热插拔的 U 盘一样。内核的电源管理系统经常会使某个核core离线，然后根据需要将其唤醒，以便在不忙的机器上反复调用同一段的 CPU 热插拔代码。观察电源管理系统调用 CPU 热插拔代码的 <a href=\"http://www.brendangregg.com/ebpf.html\">BCC 工具</a> 称为 <code>offcputime.py</code>。</p>\n<p>请注意，<code>init/main.c</code> 中的代码在 <code>smp_init()</code> 运行时几乎已执行完毕：引导处理器已经完成了大部分一次性初始化操作，其它核无需重复。尽管如此，跨 CPU 的线程仍然要在每个核上生成，以管理每个核的中断（IRQ）、工作队列、定时器和电源事件。例如，通过 <code>ps -o psr</code> 命令可以查看服务每个 CPU 上的线程的 softirqs 和 workqueues。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9c306da44c057966499\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -o pid,psr,comm $(pgrep ksoftirqd)  \r\n PID PSR COMMAND \r\n   7   0 ksoftirqd/0 \r\n  16   1 ksoftirqd/1 \r\n  22   2 ksoftirqd/2 \r\n  28   3 ksoftirqd/3 \r\n\r\n# ps -o pid,psr,comm $(pgrep kworker)\r\nPID  PSR COMMAND \r\n   4   0 kworker/0:0H \r\n  18   1 kworker/1:0H \r\n  24   2 kworker/2:0H \r\n  30   3 kworker/3:0H\r\n[ . . . ]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9c306da44c057966499-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9c306da44c057966499-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-1\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep ksoftirqd)  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-8\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep kworker)</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-9\"><span class=\"crayon-e\">PID  </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9c306da44c057966499-14\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aa9c306da44c057966499-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>其中，PSR 字段代表“处理器processor”。每个核还必须拥有自己的定时器和 <code>cpuhp</code> 热插拔处理程序。</p>\n<p>那么用户空间是如何启动的呢？在最后，<code>kernel_init()</code> 寻找可以代表它执行 <code>init</code> 进程的 <code>initrd</code>。如果没有找到，内核直接执行 <code>init</code> 本身。那么为什么需要 <code>initrd</code> 呢？</p>\n<h4 id=\"toc_10\">早期的用户空间：谁规定要用 initrd？</h4>\n<p>除了设备树之外，在启动时可以提供给内核的另一个文件路径是 <code>initrd</code> 的路径。<code>initrd</code> 通常位于 <code>/boot</code> 目录中，与 x86 系统中的 bzImage 文件 vmlinuz 一样，或是与 ARM 系统中的 uImage 和设备树相同。用 <code>initramfs-tools-core</code> 软件包中的 <code>lsinitramfs</code> 工具可以列出 <code>initrd</code> 的内容。发行版的 <code>initrd</code> 方案包含了最小化的 <code>/bin</code>、<code>/sbin</code> 和 <code>/etc</code> 目录以及内核模块，还有 <code>/scripts</code> 中的一些文件。所有这些看起来都很熟悉，因为 <code>initrd</code> 大致上是一个简单的最小化 Linux 根文件系统。看似相似，其实不然，因为位于虚拟内存盘中的 <code>/bin</code> 和 <code>/sbin</code> 目录下的所有可执行文件几乎都是指向 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">BusyBox 二进制文件</a> 的符号链接，由此导致 <code>/bin</code> 和 <code>/sbin</code> 目录比 glibc 的小 10 倍。</p>\n<p>如果要做的只是加载一些模块，然后在普通的根文件系统上启动 <code>init</code>，为什么还要创建一个 <code>initrd</code> 呢？想想一个加密的根文件系统，解密可能依赖于加载一个位于根文件系统 <code>/lib/modules</code> 的内核模块，当然还有 <code>initrd</code> 中的。加密模块可能被静态地编译到内核中，而不是从文件加载，但有多种原因不希望这样做。例如，用模块静态编译内核可能会使其太大而不能适应存储空间，或者静态编译可能会违反软件许可条款。不出所料，存储、网络和人类输入设备（HID）驱动程序也可能存在于 <code>initrd</code> 中。<code>initrd</code> 基本上包含了任何挂载根文件系统所必需的非内核代码。<code>initrd</code> 也是用户存放 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">自定义ACPI</a> 表代码的地方。</p>\n<p><img class=\"aligncenter\" title=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/610e633892133afdd175eab9e33620d8.png\" alt=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\"></p>\n<p style=\"text-align: center\"><em>救援模式的 shell 和自定义的 <code>initrd</code> 还是很有意思的。</em></p>\n<p><code>initrd</code> 对测试文件系统和数据存储设备也很有用。将这些测试工具存放在 <code>initrd</code> 中，并从内存中运行测试，而不是从被测对象中运行。</p>\n<p>最后，当 <code>init</code> 开始运行时，系统就启动啦！由于第二个处理器现在在运行，机器已经成为我们所熟知和喜爱的异步、可抢占、不可预测和高性能的生物。的确，<code>ps -o pid,psr,comm -p 1</code> 很容易显示用户空间的 <code>init</code> 进程已不在引导处理器上运行了。</p>\n<h3 id=\"toc_11\">总结</h3>\n<p>Linux 引导过程听起来或许令人生畏，即使是简单嵌入式设备上的软件数量也是如此。但换个角度来看，启动过程相当简单，因为启动中没有抢占、RCU 和竞争条件等扑朔迷离的复杂功能。只关注内核和 PID 1 会忽略了引导程序和辅助处理器为运行内核执行的大量准备工作。虽然内核在 Linux 程序中是独一无二的，但通过一些检查 ELF 文件的工具也可以了解其结构。学习一个正常的启动过程，可以帮助运维人员处理启动的故障。</p>\n<p>要了解更多信息，请参阅 Alison Chaiken 的演讲——<a href=\"https://rego.linux.conf.au/schedule/presentation/16/\">Linux: The first second</a>，已于 1 月 22 日至 26 日在悉尼举行。参见 <a href=\"https://linux.conf.au/index.html\">linux.conf.au</a>。</p>\n<p>感谢 <a href=\"http://shallowsky.com/\">Akkana Peck</a> 的提议和指正。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113768\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113768votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113768\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 0, "create_date": "2018-03-13", "praise_nums": 1}
{"url_obj_id": "c8f7206fc12fb03862d494d19208fd22", "url": "http://blog.jobbole.com/112048/", "title": "程序员如何规划职业路线？", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4f255bd43f956c3db484a99d448b198e.jpg"], "tags": "职场,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/huangyong/blog/1633257\">黄勇</a>   </div><p>社区中并不缺少有关软件工程师职业发展的文章，甚至可以说是泛滥。很多人都能在这个话题上说两句，三五年工作经验的编程老鸟也好，架构师也好，技术 VP 也好，CTO 也好，都有各自的看法与实践经验。没有哪一套方法是适用于所有人的，这一套软件工程师职业发展纲要，也不过是在你踽踽前行的路上，迷茫时可用来参考借鉴。你的核心竞争力，永远是你的自身实力。切记！</p>\n<h1 id=\"h1_0\">一、专业技能学习捷径</h1>\n<h2 id=\"h2_1\">1、爱上你的编码神器</h2>\n<p>众所周知，软件工程师要做的工作就是写代码，准确地说，你的目标应该是写出满足业务需求并且无法找出 Bug 的代码，而不是写一大堆没用的文字。既然你的任务是写出高质量的代码，那么你首先应该训练的就是打字速度，你需要掌握键盘盲打技能，甚至还要爱上你的“编码神器”，并做到将此工具的用法烂熟于心，闭上眼睛都能正确敲中你想要的快捷键。</p>\n<h2 id=\"h2_2\">2、熟悉底层技术原理</h2>\n<p>当你完全驾驭了计算机的输入设备以后，你需要进一步了解计算机的内部工作原理，不是让你把机器大卸八块，而是你需要全面了解计算机的组成结构与工作原理。如果你不是计算机科班出生也没关系，在网上买一本关于计算机组成原理的书自学即可。你无需做到精通，能全面了解即可，因为接下来你需要在编程的世界中，慢慢去体会计算机的工作感受，你就是计算机的管理者。</p>\n<h2 id=\"h2_3\">3、深入一门编程语言</h2>\n<p>好了，现在是时候学习一门编程语言了，最好的选择是 Java，为什么呢？原因很简单，因为市场需求量最大，我敢保证，你学 Java 肯定比学 PHP 更容易找到工作（希望 PHP 程序员们淡定一些，其实我始终认为 PHP 是世界上最好的编程语言）。当你在学习 Java 时，首先需要掌握它啰里吧嗦的编程语法，此时没有什么比写一个“Hello World”来得更爽快一些。随后你需要深刻理解的是 Java 的面向对象概念（每次我说到面向对象，总会被一些单身汉吐槽，其实我想说，对象是可以 new 出来的），这些概念看上去比较虚，但是它们却能撑起一个强大的软件架构。所以，在面向对象技术上面花再多功夫都不为过，因为它能训练我们对业务的抽象能力，就像当初我们学习数学一样，它能训练我们的逻辑思维能力。</p>\n<h2 id=\"h2_4\">4、选择一位对的老师</h2>\n<p>看书、看视频、看源码、看技术文档，其实这些都是较为低效的学习方法，掌握编程技能的捷径就是拜一位资深的程序员为师，你可以尊称他为“码神”，记得一定要把他伺候好，让他愿意传授一些编程技能给你，其实也就是一个微笑外加一顿小龙虾的事情，他就能被你征服。一定要看他写的代码，思考为什么他会这样写，一定要将你不理解的地方记录下来，并且在下班之前紧紧地抓住他，让他一次给你讲个够，此时你一定会有一种打通任督二脉的畅快之感。所谓“师傅领进门，修行在个人”，你需要比你师傅更加努力，甚至十倍于他人的付出，才能在编程之路上尝到甜头。此时你需要学习更加高深的武功，研究更加优秀的源码，实践更有挑战的项目，还需要花整块时间，系统地看技术文档以及技术参考书。假如你想成为架构师，不妨看看我所著的《架构探险》这本书，也许它会对你的专业技能有所帮助。</p>\n<h2 id=\"h2_5\">5、乐于分享你的技能</h2>\n<p>你最好要让自己变成一位豁达开朗之人，千万不要吝啬，一定要懂得分享你所学的专业技能。可以尝试做点自己的开源项目，并让这个开源项目变得更加开放，不妨结合开源，写点技术博客，并厚着脸皮给你身边的朋友阅读。这件事情一定要持之以恒，不要担心有人吐槽你，你肯定会被吐槽，那是因为大家在关注你，此时你需要更加努力，让自己变得足够专业。当你成为真正的“大神”时，就不会有人再吐槽你了，他们只会吐槽自己的技术不如你，此时你将得到的是无限的膜拜和称赞。相信我，这绝不是奇迹。在学习专业技能之路上，多一点自信，多一点勤奋，多一点思考，再争取一点机会，你就会成功。</p>\n<h1 id=\"h1_6\">二、不可或缺的软技能</h1>\n<h2 id=\"h2_7\">1、软技能 ≠ 务虚</h2>\n<p>如果将专业技能比喻为“硬技能”，那么在我们的职场中，与专业性无关的技能就可以归纳为“软技能”了。但每当我提到软技能时，难免会让人误解为这是“务虚”的一种功夫，我们虽然是“吃软饭的”（做软件开发的），但我们却十分讨厌虚伪。没错！我也很厌恶虚伪之人，尤其是在职场中遇到这样的人物，我从心底鄙视他们，但我从来不会和他们发生任何冲突，反而还能和他们愉快地共事，这种本领靠的就是软技能。</p>\n<p>软件工程师每天都在和机器打交道，机器是没有感情的，你告诉它是0，它一定不会认为是1。但我们与人打交道却不一样，你告诉他是真，他却可能认为是假。与人打交道，正是软件工程师们最为欠缺的方面，有些软件工程师甚至害怕与人交流，害怕在公开场合讲话，害怕抛头露面，害怕做一些组织性的工作。如果你也有以上这些心里负担，那么恭喜你！因为你即将从本文中找到克服这些困难的灵丹妙药，至少我希望是这样。</p>\n<p>需要强调的是，软技能是一种职场必备的核心技能，我敢直言，如果缺乏这方面的技能，你的职业生涯将会变得非常糟糕。软技能包括的方面非常广泛，沟通、协调、组织、气场这些都是最基本的软技能，甚至情商也是一种软技能，会不会讲话，听不听得明白，这些都是软技能。那么我们不妨先从沟通这项软技能开始吧，因为我认为他是软件工程师最重要的软技能之一。</p>\n<h2 id=\"h2_8\">2、口语流利 ≠ 会沟通</h2>\n<p>很多人都容易将沟通理解为讲话，说一个人语言很流利，很会讲话，口若悬河，夸夸其谈，其实并非他的沟通能力很强。我认为，沟通可以理解为两方面，即“沟”和“通”。“沟”指的是你将心中所想很清晰地表达出来给对方听，考验的是你的表达能力；“通”指的是让你确信对方是否真明白你所表达的意思，考验的是你的倾听能力。所以，我们很多时候都是在“沟”，往往忽略了“通”，从而形成了“沟而不通”的情况，因此，现在全世界人民都在提倡如何“有效沟通”。还是用一个示例来说话吧。</p>\n<p>当领导交给你一项棘手的工作，但你不知道如何开始进行这项工作，此时你应该如何应对当前的挑战呢？绝大多数人会硬着头皮去做，他们希望通过自己的努力，可以顺利完成任务，但结果往往却无法让领导满意。少数人会主动向领导咨询，以寻求领导对自己的帮助。此时应该如何与领导对话呢？似乎并非很多人都清楚。下面这段话是我的套路，仅供参考。</p>\n<blockquote><p>我：勇哥（他是我的领导），最近我遇到了一点麻烦的事情，想听听您的看法（勾起领导的兴趣，让他认真听我说下去，记得一定要说“您”，而不是“你”）。</p>\n<p>领导：哦？说来听听（证明领导此时不忙，他有时间让我占用，如果他此时很忙，你应该能感受出来的）。</p>\n<p>我：感谢您对我的信任，昨天您交给我一项任务，回到家我一直都在想这项任务，我在想……（一定要对领导表示感激，是他给了我这次锻炼自己的机会，并强调我是“回到家”都在思考，而不是只在在公司里思考，道理你懂的）</p>\n<p>领导：可能是我没说清楚，你把这项任务想复杂了，其实……（可见这是一位 nice 的领导，跟着他，你能学到很多东西）</p>\n<p>我：我还想再清楚一下，您期待这项工作的结果是怎样的？（一定要明确领导想要的结果，他只会为结果买单）</p>\n<p>领导：我希望……（领导娓娓道来，此处省略1万字，你千万不要打断领导的讲话，他讲累了自然就会停，你只需要认真听他怎么讲）</p>\n<p>我：好的，我明白了，您希望我……（一定要学会复述领导讲过的话，而且要用自己的理解来表达，不要当复读机）</p>\n<p>领导：没错，就是这样。（领导表示认可了，此时你应该表示给领导一个微笑，让他感到欣慰）</p>\n<p>我：感谢勇哥！如果我在执行过程中遇到问题，可以再向您请教吗？（一定要感谢，而且要表现出虚心向领导请教，为下一次求救做好准备）</p>\n<p>领导：当然，随时交流。（你真心拿他当领导，他才会无条件帮助你，你不懂得用好这位领导，那是你自己的损失）</p></blockquote>\n<p>沟通是不是很有趣？其实沟通是一门学问，我们花一辈子时间都在学习，都在改进自己的沟通方式，目的仅为愉快地和身边的人一起“玩耍”，让此生感到愉悦。</p>\n<p>当你已经掌握了必备的专业技能，也具备了让你脱颖而出的软技能，那么接下来你将思考的是自己该走那条路了，继续做软件工程师，还是做软件工程师的 leader？下面这段话将告诉你答案。</p>\n<h1 id=\"h1_9\">三、正确制定职业路线</h1>\n<h2 id=\"h2_10\">1、给自己提几个问题</h2>\n<p>首先要澄清的是：我并非职业导师，更不是人生教父，所有的路都由你自己选择，我的责任是告诉你，我认为行之有效的方法。</p>\n<p>当你正走在职场的十字路口徘徊，思考走技术，还是走管理？我的答案只有一个：根据你自己的优势来决定。合理利用好自己的优势，会让自己走的更加顺畅，让自己无怨无悔。还是举一个例子来说明吧。</p>\n<p>前段时间有位朋友在微信上私聊我，他也遇到了这个问题，继续做技术，还是转管理？我当时是这样问他的，但我希望你可以用这样的方式来问自己。</p>\n<blockquote><p>我：你工作多久了？</p>\n<p>朋友：时间不长，写了10年的代码。</p>\n<p>我：那相当资深啊，现在还对写代码有激情吗？</p>\n<p>朋友：喜欢写，周末有时都会宅在家里写。</p>\n<p>我：那你还在纠结什么呢？</p>\n<p>朋友：我都工作10年了，身边的人要么当 CTO，要么做总监，自己却还在撸代码，我现在到底该不该转管理？</p>\n<p>我：你为什么会考虑转管理？说说你在管理上的优势吧。</p>\n<p>朋友：我觉得自己对技术有一定深度，可以帮助团队解决一些技术难题。</p>\n<p>我：如果你团队中有位小伙伴遇到一个很棘手的技术问题，没辙了，你会做些什么？</p>\n<p>朋友：撸起袖子，就地帮他解决掉。</p>\n<p>我：建议你走技术专家路线，这条路也许更加适合你。</p>\n<p>朋友：……</p></blockquote>\n<h2 id=\"h2_11\">2、转管理之前，先理解管理</h2>\n<p>当我们在纠结是否应该转管理时，不妨首先理解一下什么是管理？以及什么是管理者？只有当我们正确理解了这些概念以后，再来思考自己是否具备这样的特征，才能顺利帮助自己转型。</p>\n<p>管理（management）是协调和监督他人的工作，从而使他人的工作可以有效率且有成效地完成。效率（efficiency）指的是以尽可能少的投入，以获得尽可能多的产出，效率常常被说成“正确地做事”，即不浪费资源。成效（effectiveness）常常被称为“做正确的事”，即做那些可以实现目标的工作活动。管理者（manager）就是完成所有管理工作，并使组织目标能够实现的人。管理者的工作包括计划（planning）、组织（organizing）、领导（leading）和控制（controlling）四种职能。</p>\n<p>以上都是管理学告诉我们的知识，如果你想成为一名管理者，那么你必须首先正确理解这些概念的真实含义，才能完全驾驭管理者的岗位，否则你会从管理岗位上摔下来，自己一定伤得不轻。</p>\n<p>如果你想成为一名优秀的管理者，那么你需要做些什么呢？</p>\n<ul>\n<li>亲自且专业地给团队激励。</li>\n<li>激励团队完成你无法独立完成的任务。</li>\n<li>对问题提供指导和指引。</li>\n<li>对团队的表现给予反馈。</li>\n<li>帮助团队改善绩效。</li>\n<li>使团队对组织的改变知情。</li>\n<li>改善团队小伙伴们的生活。</li>\n</ul>\n<p>如果团队和你共事过，那么团队应该觉得他们是幸运的，因为你能够让他们更加愉快和高效地工作。</p>\n<h1 id=\"h1_12\">写在最后</h1>\n<p>不论选择技术还是管理，在任何时候都不要放弃你的硬技能，因为它是你的“生存之本”，同时你也需要具备强大的软技能，因为它是你的“发展之源”。</p>\n<p>学习硬技能其实是有捷径的，你无需一味地学习这些知识点，更多的其实是与人交流以及加以应用。软技能其实是可以训练的，你只需抓住一切可以抓住的机会，有意识地加以训练和反思，你就能悟出很多宝贵的经验。软件开发是一门艺术，你需要能够静得下心，不断地优化和雕琢你的作品，因此你需要具备工匠精神。如果你想成为一名工匠领袖，那么你就应该比他人思考得更多、更高、更深、更全面，你需要更多的软技能。你只有认识到自己的优势，才能正确地选择自己的职业路线。</p>\n<p>祝你成功！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112048\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112048votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112048\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-13", "praise_nums": 1}
{"url_obj_id": "a6f0ef6debff996ff3defb5399281308", "url": "http://blog.jobbole.com/113716/", "title": "为什么浏览器的用户代理字符串以 Mozilla 开头", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/47a58f731472797655f14eeebe80e7d7.png"], "tags": "IT技术,浏览器", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.solidot.org/story?sid=55694\">Solidot</a>   </div><p>最早流行的浏览器是 NCSA Mosaic，它称自己为 NCSA_Mosaic/2.0 (Windows 3.1)；后来一个新浏览器出现了，它的名字叫 Mozilla，是 Mosaic Killer 的缩写，Mosaic 并不觉得这好笑，因此该浏览器改名为 Netscape，它称自己为 Mozilla/1.0 (Win3.1)。</p>\n<p>Netscape 支持框架（frame），而 Mosaic 不支持，因此用户代理嗅探（User Agent sniffing）出现了，网站在检测到 Mozilla 后就发送框架，如果不是就不发送。后来微软开发了 IE，希望它成为 Netscape Killer，IE 也支持框架，但由于它不是 Mozilla，网站没有向它发送框架。</p>\n<p>微软没有耐心等待网站修改而是声称它兼容于 Mozilla，因此冒充 Netscape 称自己为 Mozilla/1.22 (compatible; MSIE 2.0; Windows 95)。第一次浏览器战争以 Netscape 的失利结束，但 Netscape 以 Mozilla 的名字获得了新生。</p>\n<p>Mozilla 构建了 Gecko，称自己为 Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.1) Gecko/20020826。Gecko 是一个渲染引擎，Mozilla 在此基础上开发了 Firefox，它称自己为 Mozilla/5.0 (Windows; U; Windows NT 5.1; sv-SE; rv:1.7.5) Gecko/20041108 Firefox/1.0。因为 Gecko 好于 IE，因此用户代理嗅探又出现了，网站在检测到 Gecko 后会提供更好的页面代码。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/47a58f731472797655f14eeebe80e7d7.png\" alt=\"YL}%@8@6764CYM (9J]%W[LU.png\"></p>\n<p>Linux 上的浏览器 Konqueror 使用的渲染引擎是 KHTM，它只能冒充 Gecko 称自己为 Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) (KHTML, like Gecko)。Opera 则提供了选项，让用户想冒充哪个浏览器就冒充哪个浏览器。苹果后来创建了 KHTML 的一个分支 WebKit，称自己为 Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de) AppleWebKit/85.7 (KHTML, like Gecko) Safari/85.5。这就是为什么浏览器的用户代理字符串以 Mozilla 开头。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113716\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113716votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113716\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-06", "praise_nums": 2}
{"url_obj_id": "0ec536e6cc340e779e8be8c764ab39c0", "url": "http://blog.jobbole.com/113719/", "title": "Linux 主目录中的隐藏文件是干什么用的？", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/c96c574ca76e6b552476e508f1247902.png"], "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/hidden-files-linux-home-directory/\">Alexander Fox</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9409-1.html\">Linux中国/MjSeven</a>   </div><p>在 Linux 系统中，你可能会在主目录中存储了大量文件和文件夹。但在这些文件之外，你知道你的主目录还附带了很多隐藏的文件和文件夹吗？如果你在主目录中运行 <code>ls -a</code>，你会发现一堆带有点前缀的隐藏文件和目录。这些隐藏的文件到底做了什么？</p>\n<h3 id=\"toc_1\">在主目录中隐藏的文件是干什么用的?</h3>\n<p><img class=\"aligncenter\" title=\"hidden-files-liunux-2\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/c96c574ca76e6b552476e508f1247902.png\" alt=\"hidden-files-liunux-2\"></p>\n<p>通常，主目录中的隐藏文件和目录包含该用户程序访问的设置或数据。它们不打算让用户编辑，只需要应用程序进行编辑。这就是为什么它们被隐藏在用户的正常视图之外。</p>\n<p>通常，删除和修改自己主目录中的文件不会损坏操作系统。然而，依赖这些隐藏文件的应用程序可能不那么灵活。从主目录中删除隐藏文件时，通常会丢失与其关联的应用程序的设置。</p>\n<p>依赖该隐藏文件的程序通常会重新创建它。 但是，你将从“开箱即用”设置开始，如全新用户一般。如果你在使用应用程序时遇到问题，那实际上可能是一个巨大的帮助。它可以让你删除可能造成麻烦的自定义设置。但如果你不这样做，这意味着你需要把所有的东西都设置成原来的样子。</p>\n<h3 id=\"toc_2\">主目录中某些隐藏文件的特定用途是什么？</h3>\n<p><img class=\"aligncenter\" title=\"hidden-files-linux-3\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e5c7ad21014cb9f242377c5c8c36e38f.png\" alt=\"hidden-files-linux-3\"></p>\n<p>每个人在他们的主目录中都会有不同的隐藏文件。每个人都有一些。但是，无论应用程序如何，这些文件都有类似的用途。</p>\n<h4 id=\"toc_3\">系统设置</h4>\n<p>系统设置包括桌面环境和 shell 的配置。</p>\n<ul>\n<li>shell 和命令行程序的<strong>配置文件</strong>：根据你使用的特定 shell 和类似命令的应用程序，特定的文件名称会变化。你会看到 <code>.bashrc</code>、<code>.vimrc</code> 和 <code>.zshrc</code>。这些文件包含你已经更改的有关 shell 的操作环境的任何设置，或者对 <code>vim</code> 等命令行实用工具的设置进行的调整。删除这些文件将使关联的应用程序返回到其默认状态。考虑到许多 Linux 用户多年来建立了一系列微妙的调整和设置，删除这个文件可能是一个非常头疼的问题。</li>\n<li><strong>用户配置文件</strong>：像上面的配置文件一样，这些文件（通常是 <code>.profile</code> 或 <code>.bash_profile</code>）保存 shell 的用户设置。该文件通常包含你的 <code>PATH</code> 环境变量。它还包含你设置的<a href=\"https://www.maketecheasier.com/making-the-linux-command-line-a-little-friendlier/#aliases\">别名</a>。用户也可以在 <code>.bashrc</code> 或其他位置放置别名。<code>PATH</code> 环境变量控制着 shell 寻找可执行命令的位置。通过添加或修改 <code>PATH</code>，可以更改 shell 的命令查找位置。别名更改了原有命令的名称。例如：一个别名可能将 <code>ls -l</code> 设置为 <code>ll</code>。这为经常使用的命令提供基于文本的快捷方式。如果删除 <code>.profile</code> 文件，通常可以在 <code>/etc/skel</code> 目录中找到默认版本。</li>\n<li><strong>桌面环境设置</strong>：这里保存你的桌面环境的任何定制。其中包括桌面背景、屏幕保护程序、快捷键、菜单栏和任务栏图标以及用户针对其桌面环境设置的其他任何内容。当你删除这个文件时，用户的环境会在下一次登录时恢复到新的用户环境。</li>\n</ul>\n<h4 id=\"toc_4\">应用配置文件</h4>\n<p>你会在 Ubuntu 的 <code>.config</code> 文件夹中找到它们。 这些是针对特定应用程序的设置。 它们将包含喜好列表和设置等内容。</p>\n<ul>\n<li><strong>应用程序的配置文件</strong>：这包括应用程序首选项菜单中的设置、工作区配置等。 你在这里找到的具体取决于应用程序。</li>\n<li><strong>Web 浏览器数据</strong>：这可能包括书签和浏览历史记录等内容。这些文件大部分是缓存。这是 Web 浏览器临时存储下载文件（如图片）的地方。删除这些内容可能会降低你首次访问某些媒体网站的速度。</li>\n<li><strong>缓存</strong>：如果用户应用程序缓存仅与该用户相关的数据（如 <a href=\"https://www.maketecheasier.com/clear-spotify-cache/\">Spotify 应用程序存储播放列表的缓存</a>），则主目录是存储该目录的默认地点。 这些缓存可能包含大量数据或仅包含几行代码：这取决于应用程序需要什么。 如果你删除这些文件，则应用程序会根据需要重新创建它们。</li>\n<li><strong>日志</strong>：一些用户应用程序也可能在这里存储日志。根据开发人员设置应用程序的方式，你可能会发现存储在你的主目录中的日志文件。然而，这不是一个常见的选择。</li>\n</ul>\n<h3 id=\"toc_5\">结论</h3>\n<p>在大多数情况下，你的 Linux 主目录中的隐藏文件用于存储用户设置。 这包括命令行程序以及基于 GUI 的应用程序的设置。删除它们将删除用户设置。 通常情况下，它不会导致程序被破坏。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113719\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113719votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113719\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-07", "praise_nums": 1}
{"url_obj_id": "f7fd5491f869ff395a8d3670134dea28", "url": "http://blog.jobbole.com/113722/", "title": "励志！海外开发者讲述用脚做游戏的研发经历", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/f4b90537c9da89d7b415ea699c9fe008.jpg"], "tags": "IT技术,开发者", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.gamelook.com.cn/2018/03/322396\">gamelook</a>   </div><p>对于游戏开发者而言，失去双手对于职业和生活可能是灾难性的打击。</p>\n<div>\n<p>然而，业内却有一小部分人每天都要面临这样的问题，位于奥斯丁的开发者Rusty Moyher就是其中之一。五年前，他被诊断为重复性劳损（RSI），而作为一名写代码的游戏策划，这个病症几乎让他的职业生涯和对游戏的热情遭遇毁灭性打击。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0f9786b2767ac6277e33aa54660bf447.jpg\" alt=\"\" width=\"675\" height=\"411\"></p>\n<p>图片来自网络，并非开发者本人</p>\n<p>为了便于理解，这里我们复制了一段百度百科的介绍:重复使力伤害（repetitive strain injury，缩写RSI），或称重复性劳损、劳肌损伤、重复性动作的伤害，是指因长时间重复使用某组肌肉造成的损害。吉他、打字、在装配线工作、某些球类运动（棒球、网球、高尔夫球）都可能引致RSI，是常见的职业病，疼痛、肿胀、僵硬和易累等都是RSI的病征。不会在瞬间发生，是经年累月，不知不觉地缠上电脑使用者。如未经治疗，可能会对双手造成无可挽救的损害，一旦严重的伤害，双手将不再灵活。但到了这个时候，往往神经、肌肉和结缔组织，早已受到严重的损伤。</p>\n<p>对于游戏开发者来说这个问题是很严重的，因为鼠标和键盘是最有效的工作和交流方式，但对于患有RSI疾病的人而言，这两个外设几乎形同虚设，所以使用电脑都是很大的问题。</p>\n<p>然而，Rusty决定学习不用手的方式做游戏研发，他几乎用了一年半的时间学习与电脑互动的新方式，通过语音编程、眼部追踪和脚踏板的方式完成了游戏研发。上个月，他创作的新游戏《Dig Dog》正式登录PC、主机和手游平台。</p>\n<h1>患病之后：如何替代键盘鼠标输入</h1>\n<p>本质来说，Moyher是可以使用手的，但RSI意味着连续几个小时使用键盘鼠标已经是不可能的，为了找回对游戏研发的热情，他必须使用新的方式与电脑互动。最开始的时候，他尝试了很多种非传统外设，但却没有一个能够满足需求。</p>\n<p>Moyher说，“我尝试了各种辅助设备，但投入了大量资金之后发现这些并没有什么作用，比如立体键盘、和立体鼠标等等，我买过250美元一个的辊轮鼠标，用起来还可以，但我觉得人类的身体素质各异，所以你很难找到真正适合你用的”。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/db5539029e3bf667ad59b7af9d39ec1e.gif\" alt=\"\" width=\"643\" height=\"359\"></p>\n<p>他的第一次突破是发现了一个可以用语音写代码的视频，这个视频是Travis Rudd在2013年发布的，后者也是一个患有RSI症状的程序员和开发者，视频中展示了Rudd自己研发的声音识别软件Dragon NaturallySpeaking，这样就可以通过语音指令写Python代码。</p>\n<p>与Rudd联系之后，Moyher学习了Natlink与Dragonfly工具，这些可以让用户把定制化的关键短语作为触发器，如果你不太熟悉这个软件，那么我们进行简单的介绍，在默认情况下，它的主要工作就是把一个人的声音转化为文字，如果没有额外的工具和变成，那么使用Dragon写代码是非常消耗时间的工作。</p>\n<p>通过配合Natlink与Dragonfly工具，Moyher可以直接使用语音指令，但这对他来说并没有那么容易适应。“我用了很长时间适应这种工具的使用方法，实际上在项目开始的一年半之前就已经在尝试了，当时我只是在研究这些工具，尝试适合我的方式”。</p>\n<p>据Moyher透露，大多数的时间都用在了把输入方式简单化，这样他在工作的时候就不用担心一个失误导致所有工作都白费，“我看到过有些人使用这种语音写代码的案例，他们会设置中继设备，比如在虚拟机里运行Windows系统和Dragon软件，比如Parallels，而且他们使用这些与操作系统的外界声音进行交流”。</p>\n<p>这让整个过程更加复杂，所以他决定进行简化，“我是直接使用Windows，所以就没有那么多的相关环节，这样错误的几率就会降低，“在简化之后，我用起来更为得心应手”。Moyher遇到的另一个问题就是他不能直接使用Rudd研发的Python指令，因为Moyher使用的集成研发环境（IDE）是Visual Studio和Xcode。他不仅要研发新的语音指令，由于这些环境使用鼠标的频率很高，所以他还要需要新的指令输入方式。</p>\n<h1>不用手如何做游戏研发？</h1>\n<p>虽然Moyher尝试了大量不同的外设，但没有一个真正令他满意，直到体验了Natural Point的SmartNav 4，SmartNav的工作原理就是追踪与Moyher帽子上连接的反射器，由于灵敏度较高，他只需要很小幅度的转头就可以在屏幕上发出指令，然而他也表示，SmartNav 4也并不是100%理想。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/f495b537370340dfba8da04fff31ba71.jpg\" alt=\"\" width=\"646\" height=\"406\"></p>\n<p>“SmartNav 4是我在网上找到的，由于我知道自己的病情，只能尽可能少的用手，多休息，所以它成为了一个很好的鼠标替代工具，至少已经足够好用。但我认为它可以变得更好，软件版本很老，而且也是一个不那么注意细节的USB设备”。</p>\n<p>用了这个设备之后，Moyher对它的要求更高了，“我从其他人那里得到了很多使用眼睛追踪的建议，这些事情实际上我以前就尝试过，所以决定深度挖掘这种方式”。</p>\n<p>当然，找到不用手操作鼠标并不是唯一的问题，他还需要解决鼠标点击输入的问题，当然，这跟眼部追踪或者语音识别比起来就简单很多，“我是用脚点击的，所以这种设备用起来较为便宜，而且使用起来也很方便”。</p>\n<p>游戏研发是辛苦的，但如果你面临Moyher这样的困难，那就更艰难了。《Dig Dog》最初是一个很简单的游戏，只是让一条狗在沙漠中行走，他非常喜欢平台游戏，但加入了挖掘玩法之后，这款游戏的玩法重心就发生了变化，而且项目最初的名字也不是Dig Dog。</p>\n<p>“游戏名字并不是参考了《Dig Dug》，最初我只是想做一款让狗狗在沙漠中行走的游戏，一开始我很想做一款iOS平台游戏，这个游戏就是这么开始的。发现了挖掘玩法之后，游戏的主要玩法就变成了挖掘，曾几何时我给项目取的名字是Dig A Dog A Bone，但最后《Dig Dog》更利于传播”。</p>\n<p>为了写代码，Moyher不仅要重新思考新的代码输入方式，还需要重新设计代码整体布局，在游戏研发过程中，他的输入方式也发生了很多变化。不过，游戏测试仍然需要他使用双手，“的确，这是一款平台游戏，游戏带给玩家的感觉是很重要的，你必须亲自体验和经历手柄操作，所以我有时候也避免不了”。</p>\n<h1>新挑战：不用手玩游戏</h1>\n<p>在编写《Dig Dog》代码的时候，Moyher克服了重重困难，他打算继续追逐游戏研发的梦想，疾病没有扼杀他对于游戏研发的热爱，他不仅继续编程，还坚持玩游戏，这样可以让游戏设计被更多人接受。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ff478803b38378840f749436e1e8ce80.jpg\" alt=\"\" width=\"792\" height=\"449\"></p>\n<p>“这些方法是我在使用SmartNav 4的时候发现的，我最开始只是用鼠标和脚踏板玩游戏，随后我开始尝试其他回合制游戏，并且寻找不用手进行游戏操作的方式”。</p>\n<p>虽然游戏速度是一方面的因素，Moyher表示一款游戏真正的难度在于，玩家需要同时处理很多东西，“我觉得回合制游戏比较适合，比如《RimWorld》用这种方法玩起来就很难，你需要点击太多的东西，鼠标的不精确让你很难操作这么多的单位”。</p>\n<p>之所以提到Moyher的故事，主要是为了说明，只要你对于某些事情有热情，就能找到方法克服重重困难，或许，他在采访最后所说的话可以给业内所有同行共勉：我开始这个项目的时候，就已经有了足够多的工具，所以很确定整个游戏是能够做出来的，我只需要更有耐心就可以完成，但当时我甚至不知道能否做得到，虽然写代码很难，但我认为只要你想学，所有人都能学会。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113722\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113722votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113722\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 0, "create_date": "2018-03-08", "praise_nums": 1}
{"url_obj_id": "7cb32f69be9fc1f56a8f1a54e4cf6b00", "url": "http://blog.jobbole.com/113726/", "title": "索引表和 ES 的一点点思考", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2011/11/go-out-of-the-three-errors-of-the-seo.jpg"], "tags": "IT技术,搜索,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h3>索引表设计</h3>\n<p>在电商项目中，物理库存系统是个极其重要的系统，订单支付后，就会开始来占用物理库存。一般情况下，库存系统都是要分库的，因为主要的操作是写操作，例如占用/释放/取消等写操作。使用分库可以降低数据库写的压力。尽管写操作为主，但是读操作也是有的。</p>\n<p>比如说，库存占用的时候，得先查询是否有库存，而这个查询操作并不都会带上分库因子(用于路由到具体的某个数据库)，而是一些比较宽松的查询条件，这些查询条件对应的数据可能分布在不同的数据库上。这个时候为了查询的方便，会构建一个索引表。这个索引表是<strong>存在另外的单独的一个数据库中</strong>，不会再分库了的。</p>\n<p>索引表的设计也分不同情况，大体可以分三种。<br>\n1、查询字段+数据库主键</p>\n<blockquote><p>把查询字段放到索引表，还需要把对应的数据库主键ID也放置进去。当查询请求到来时，根据查询条件找出对应的数据主键，再根据数据主键路由到对应的存有完整业务数据的数据分库上。这种方案呢。索引表占用空间小，可以支撑很久。但是要找出业务数据，还是需要路由到分库上。另外，如果要把索引表的数据存储到ES搜索引擎上的话，这种方式就不行了。因为索引表中没有外部系统要的业务数据。所以当时的库存系统没有使用这种索引表设计方案。</p></blockquote>\n<p>2、查询字段+数据库主键+需要展示的业务字段</p>\n<blockquote><p>这种方案呢。当请求到来的时候，直接查询索引表即可。无需根据主键路由到分库了。同时如果要结合ES的话。可以直接把索引表的数据弄到ES上即可。后续直接让ES暴露查询接口即可。目前我在唯品会参与的物理库存项目中，是使用这种方式的。但是这个方案也有个缺点。就是索引表的体积比较大，后续数据量一大的话，也是个问题。能不能优化一下呢？</p></blockquote>\n<p>3、索引表拆分</p>\n<blockquote><p>上面说到的第二种方案，索引表的膨胀可能很快，可以考虑将索引表拆分。比如说：索引表只是保存查询条件和主键，而需要展示给外部系统的数据，另外存储在单独的表上。比如叫index_detail表。这个表拥有索引表的主键。这样的话，当查询请求到来的时候，先从索引表查询到主键，再根据主键从index_detail表中查询出数据。当然这样做的话。ES的数据来源就变成多张表了，不过这是可以接受的。</p></blockquote>\n<h3>如何把业务数据写入到索引表</h3>\n<h4 id=\"使用mq\">使用MQ</h4>\n<p>一般来说，构建索引数据是使用单独一个应用来做的。比如叫data-index域。这个域会从消息队列中读取消息，用于构建索引数据。当业务数据发生变化后，生产者发送MQ消息到队列上。<br>\n这里的消息设计也分两种情况。一种是消息只是带有数据主键和操作类型(ADD/Update/DELETE),消费者拿到主键后再去DB获取完整的数据并插入到索引表中。另一种方案呢，是消息包含了大部分需要的字段，消费者拿到消息后直接把数据插入到索引表中。这两种消息设计，我在实际项目中都有用过。</p>\n<h4 id=\"直接操作db\">直接操作DB</h4>\n<p>这种方案呢就比较粗暴，直接配置一个索引表库的数据源，当业务数据发生变化时，使用Mybatis或者JDBC把数据更新到索引表中。一般不建议这么做，一来构建索引数据的逻辑跟数据的CRUD操作融合在一起了。二来，操作其他数据库的数据，要么通过接口的方式，要么由单独的域来做。建议还是使用MQ的方式来构建索引数据。</p>\n<h3>如何把索引表数据弄到ES上</h3>\n<h4 id=\"监听数据库表的数据变化\">监听数据库表的数据变化</h4>\n<p>像在唯品会这边，自研了一个叫VDP的组件，使用storm job去监听索引表数据的变化，一旦有变化，就把数据同步到队列中，ES直接从队列中获取数据，并存储到ES上。<br>\n这种方案的好处是，我们无需写任何代码，数据自动可以同步到ES上。</p>\n<h4 id=\"使用mq-1\">使用MQ</h4>\n<p>如果公司内部没有开发VDP这样的组件，可以通过发送MQ消息的方式来将索引表的数据同步数据到ES上。</p>\n<h4 id=\"让es暴露cud接口\">让ES暴露CUD接口</h4>\n<p>另外一种方案是，让ES暴露CUD接口，用于同步索引表数据。但是这样就跟ES耦合在一块了。不太推荐这么做。</p>\n<h3>进一步的思考</h3>\n<p>1、ES不支持Group By这样的操作，所以在构建索引表的时候，可以事先计算好Group By的一些统计数据，并存储到索引表中；<br>\n2、一些后台应用中，如果数据库表的数量已经很大，好几个亿了，并且查询的SQL还非常变态，用数据库已经无法支持了，那么可以使用ES，查询速度快，也支持一些统计操作；<br>\n3、使用ES输出数据时，也有个坑。经常会拿到脏数据的。例如当数据发送变化后，构建索引数据并把索引数据同步到ES上是需要时间的，但是我们后台通常有将数据下架的操作，下架的操作操作完后，再次点击查询按钮，可能还是看到脏数据，因为数据同步到ES上没那么快。现在我还没想到很好的办法来解决这个问题。欢迎网友提些建议。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/54f7206fd1f1907bec78ddf32f50d66d.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113726\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113726votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113726\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/3660a090181b2b6ae3bd8c07d393aa36.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网技术爱好者，目前就职于广州唯品会担任JAVA高级开发。个人的csdn技术博客如下：http://blog.csdn.net/linsongbin1本人伯乐在线的文章，都出自这个csdn博客        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/sam-2/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-08", "praise_nums": 1}
{"url_obj_id": "751b4a769751d2c4fdc8634943432f73", "url": "http://blog.jobbole.com/113692/", "title": "20 个 OpenSSH 最佳安全实践", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/02/linux-ssh.jpg"], "tags": "IT技术,Linux,OpenSSH", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/tips/linux-unix-bsd-openssh-server-best-practices.html\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9394-1.html\">Linux中国/shipsw</a>   </div><p>OpenSSH 是 SSH 协议的一个实现。一般通过 <code>scp</code> 或 <code>sftp</code> 用于远程登录、备份、远程文件传输等功能。SSH能够完美保障两个网络或系统间数据传输的保密性和完整性。尽管如此，它最大的优势是使用公匙加密来进行服务器验证。时不时会出现关于 OpenSSH 零日漏洞的<a href=\"https://isc.sans.edu/diary/OpenSSH+Rumors/6742\">传言</a>。本文将描述如何设置你的 Linux 或类 Unix 系统以提高 sshd 的安全性。</p>\n<h3 id=\"toc_1\">OpenSSH 默认设置</h3>\n<ul>\n<li>TCP 端口 – 22</li>\n<li>OpenSSH 服务配置文件 – <code>sshd_config</code> (位于 <code>/etc/ssh/</code>）</li>\n</ul>\n<h3 id=\"toc_2\">1、 基于公匙的登录</h3>\n<p>OpenSSH 服务支持各种验证方式。推荐使用公匙加密验证。首先，使用以下 <code>ssh-keygen</code> 命令在本地电脑上创建密匙对：</p>\n<blockquote><p>1024 位或低于它的 DSA 和 RSA 加密是很弱的，请不要使用。当考虑 ssh 客户端向后兼容性的时候，请使用 RSA密匙代替 ECDSA 密匙。所有的 ssh 密钥要么使用 ED25519 ，要么使用 RSA，不要使用其它类型。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070d0905410824\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh-keygen -t key_type -b bits -C \"comment\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070d0905410824-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070d0905410824-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070d0905410824-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">keygen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key_type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"comment\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070d0905410824-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070db478448122\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh-keygen -t ed25519 -C \"Login to production cluster at xyz corp\"\r\n或\r\n$ ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa_aws_$(date +%Y-%m-%d) -C \"AWS key for abc corp clients\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070db478448122-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070db478448122-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070db478448122-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070db478448122-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070db478448122-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">keygen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ed25519</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Login to production cluster at xyz corp\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070db478448122-2\">或</div><div class=\"crayon-line\" id=\"crayon-5aa9b783070db478448122-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">keygen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rsa</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">id_rsa_aws_</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">Y</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">m</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"AWS key for abc corp clients\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070db478448122-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>下一步，使用 <code>ssh-copy-id</code> 命令安装公匙：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070e0095007895\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh-copy-id -i /path/to/public-key-file user@host\r\n或\r\n$ ssh-copy-id user@remote-server-ip-or-dns-name\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070e0095007895-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070e0095007895-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070e0095007895-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070e0095007895-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070e0095007895-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">copy</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">key</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">file </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">host</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070e0095007895-2\">或</div><div class=\"crayon-line\" id=\"crayon-5aa9b783070e0095007895-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">copy</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">id </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">or</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070e0095007895-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070e4996496671\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh-copy-id vivek@rhel7-aws-server\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070e4996496671-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070e4996496671-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070e4996496671-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">copy</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">id </span><span class=\"crayon-v\">vivek</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">rhel7</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aws</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070e4996496671-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>提示输入用户名和密码的时候，确认基于 ssh 公匙的登录是否工作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070e7311000687\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh vivek@rhel7-aws-server\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070e7311000687-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070e7311000687-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070e7311000687-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ssh </span><span class=\"crayon-v\">vivek</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">rhel7</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aws</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070e7311000687-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><a href=\"https://www.cyberciti.biz/tips/wp-content/uploads/2009/07/OpenSSH-server-security-best-practices.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8a0f95a8ae7fc345dc09338c5fa70583.png\" alt=\"OpenSSH 服务安全最佳实践\"></a></p>\n<p>更多有关 ssh 公匙的信息，参照以下文章：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/faq/ssh-passwordless-login-with-keychain-for-scripts/\">为备份脚本设置无密码安全登录</a></li>\n<li><a href=\"https://linux.cn/article-8086-1.html\">sshpass：使用脚本密码登录 SSH 服务器</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/how-to-set-up-ssh-keys-on-linux-unix/\">如何为一个 Linux/类 Unix 系统设置 SSH 登录密匙</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/how-to-upload-ssh-public-key-to-as-authorized_key-using-ansible/\">如何使用 Ansible 工具上传 ssh 登录授权公匙</a></li>\n</ul>\n<h3 id=\"toc_3\">2、 禁用 root 用户登录</h3>\n<p>禁用 root 用户登录前，确认普通用户可以以 root 身份登录。例如，允许用户 vivek 使用 <code>sudo</code> 命令以 root 身份登录。</p>\n<h4 id=\"toc_4\">在 Debian/Ubuntu 系统中如何将用户 vivek 添加到 sudo 组中</h4>\n<p>允许 sudo 组中的用户执行任何命令。 <a href=\"https://www.cyberciti.biz/faq/how-to-create-a-sudo-user-on-ubuntu-linux-server/\">将用户 vivek 添加到 sudo 组中</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070eb096165476\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo adduser vivek sudo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070eb096165476-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070eb096165476-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070eb096165476-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">adduser </span><span class=\"crayon-e\">vivek </span><span class=\"crayon-i\">sudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070eb096165476-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 <a title=\"See Linux/Unix id command examples for more info\" href=\"https://www.cyberciti.biz/faq/unix-linux-id-command-examples-usage-syntax/\">id 命令</a> 验证用户组。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070f1320732150\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ id vivek\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070f1320732150-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070f1320732150-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070f1320732150-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">vivek</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070f1320732150-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_5\">在 CentOS/RHEL 系统中如何将用户 vivek 添加到 sudo 组中</h4>\n<p>在 CentOS/RHEL 和 Fedora 系统中允许 wheel 组中的用户执行所有的命令。使用 <code>usermod</code> 命令将用户 vivek 添加到 wheel 组中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070f5987140829\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo usermod -aG wheel vivek\r\n$ id vivek\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070f5987140829-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070f5987140829-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070f5987140829-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070f5987140829-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">usermod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">aG </span><span class=\"crayon-e\">wheel </span><span class=\"crayon-i\">vivek</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070f5987140829-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">vivek</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b783070f5987140829-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_6\">测试 sudo 权限并禁用 ssh root 登录</h4>\n<p>测试并确保用户 vivek 可以以 root 身份登录执行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b783070f9012768060\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -i\r\n$ sudo /etc/init.d/sshd status\r\n$ sudo systemctl status httpd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070f9012768060-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070f9012768060-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b783070f9012768060-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b783070f9012768060-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b783070f9012768060-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070f9012768060-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sshd </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b783070f9012768060-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b783070f9012768060-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>添加以下内容到 <code>sshd_config</code> 文件中来禁用 root 登录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307104324917819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPermitRootLogin no\r\nChallengeResponseAuthentication no\r\nPasswordAuthentication no\r\nUsePAM no\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307104324917819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307104324917819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307104324917819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307104324917819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307104324917819-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307104324917819-1\"><span class=\"crayon-e\">PermitRootLogin </span><span class=\"crayon-e\">no</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307104324917819-2\"><span class=\"crayon-e\">ChallengeResponseAuthentication </span><span class=\"crayon-e\">no</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307104324917819-3\"><span class=\"crayon-e\">PasswordAuthentication </span><span class=\"crayon-e\">no</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307104324917819-4\"><span class=\"crayon-e\">UsePAM </span><span class=\"crayon-i\">no</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307104324917819-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>更多信息参见“<a href=\"https://www.cyberciti.biz/faq/how-to-disable-ssh-password-login-on-linux/\">如何通过禁用 Linux 的 ssh 密码登录来增强系统安全</a>” 。</p>\n<h3 id=\"toc_7\">3、 禁用密码登录</h3>\n<p>所有的密码登录都应该禁用，仅留下公匙登录。添加以下内容到 <code>sshd_config</code> 文件中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307108632127439\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nAuthenticationMethods publickey\r\nPubkeyAuthentication yes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307108632127439-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307108632127439-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307108632127439-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307108632127439-1\"><span class=\"crayon-e\">AuthenticationMethods </span><span class=\"crayon-e\">publickey</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307108632127439-2\"><span class=\"crayon-e\">PubkeyAuthentication </span><span class=\"crayon-i\">yes</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307108632127439-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>CentOS 6.x/RHEL 6.x 系统中老版本的 sshd 用户可以使用以下设置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830710c699015834\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPubkeyAuthentication yes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830710c699015834-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830710c699015834-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830710c699015834-1\"><span class=\"crayon-e\">PubkeyAuthentication </span><span class=\"crayon-i\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830710c699015834-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">4、 限制用户的 ssh 访问</h3>\n<p>默认状态下，所有的系统用户都可以使用密码或公匙登录。但是有些时候需要为 FTP 或者 email 服务创建 UNIX/Linux 用户。然而，这些用户也可以使用 ssh 登录系统。他们将获得访问系统工具的完整权限，包括编译器和诸如 Perl、Python（可以打开网络端口干很多疯狂的事情）等的脚本语言。通过添加以下内容到 <code>sshd_config</code> 文件中来仅允许用户 root、vivek 和 jerry 通过 SSH 登录系统：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307110332346401\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nAllowUsers vivek jerry\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307110332346401-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307110332346401-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307110332346401-1\"><span class=\"crayon-e\">AllowUsers </span><span class=\"crayon-e\">vivek </span><span class=\"crayon-i\">jerry</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307110332346401-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>当然，你也可以添加以下内容到 <code>sshd_config</code> 文件中来达到仅拒绝一部分用户通过 SSH 登录系统的效果。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307113950707962\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDenyUsers root saroj anjali foo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307113950707962-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307113950707962-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307113950707962-1\"><span class=\"crayon-e\">DenyUsers </span><span class=\"crayon-e\">root </span><span class=\"crayon-e\">saroj </span><span class=\"crayon-e\">anjali </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307113950707962-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你也可以通过<a href=\"https://www.cyberciti.biz/tips/linux-pam-configuration-that-allows-or-deny-login-via-the-sshd-server.html\">配置 Linux PAM</a> 来禁用或允许用户通过 sshd 登录。也可以允许或禁止一个<a href=\"https://www.cyberciti.biz/tips/openssh-deny-or-restrict-access-to-users-and-groups.html\">用户组列表</a>通过 ssh 登录系统。</p>\n<h3 id=\"toc_9\">5、 禁用空密码</h3>\n<p>你需要明确禁止空密码账户远程登录系统，更新 <code>sshd_config</code> 文件的以下内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307117587326262\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPermitEmptyPasswords no\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307117587326262-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307117587326262-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307117587326262-1\"><span class=\"crayon-e\">PermitEmptyPasswords </span><span class=\"crayon-i\">no</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307117587326262-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3 id=\"toc_10\">6、 为 ssh 用户或者密匙使用强密码</h3>\n<p>为密匙使用强密码和短语的重要性再怎么强调都不过分。暴力破解可以起作用就是因为用户使用了基于字典的密码。你可以强制用户避开<a href=\"https://www.cyberciti.biz/tips/linux-check-passwords-against-a-dictionary-attack.html\">字典密码</a>并使用<a href=\"https://www.cyberciti.biz/faq/unix-linux-password-cracking-john-the-ripper/\">约翰的开膛手工具</a>来检测弱密码。以下是一个随机密码生成器（放到你的 <code>~/.bashrc</code> 下）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830711a663753656\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngenpasswd() {\r\n    local l=$1\r\n    [ \"$l\" == \"\" ] &amp;&amp; l=20\r\n    tr -dc A-Za-z0-9_ &lt; /dev/urandom | head -c ${l} | xargs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830711a663753656-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830711a663753656-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830711a663753656-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830711a663753656-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830711a663753656-1\"><span class=\"crayon-e\">genpasswd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830711a663753656-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">local</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830711a663753656-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$l\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830711a663753656-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">tr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dc</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Za</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">z0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9_</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">urandom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xargs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307120681548780\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngenpasswd 16\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307120681548780-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307120681548780-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307120681548780-1\"><span class=\"crayon-i\">genpasswd</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307120681548780-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307124515113999\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuw8CnDVMwC6vOKgW\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307124515113999-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307124515113999-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307124515113999-1\"><span class=\"crayon-i\">uw8CnDVMwC6vOKgW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307124515113999-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/faq/generating-random-password/\">使用 mkpasswd / makepasswd / pwgen 生成随机密码</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/linux-unix-generating-passwords-command/\">Linux / UNIX: 生成密码</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/linux-random-password-generator/\">Linux 随机密码生成命令</a></li>\n</ul>\n<h3 id=\"toc_11\">7、 为 SSH 的 22端口配置防火墙</h3>\n<p>你需要更新 <code>iptables</code>/<code>ufw</code>/<code>firewall-cmd</code> 或 pf 防火墙配置来为 ssh 的 TCP 端口 22 配置防火墙。一般来说，OpenSSH 服务应该仅允许本地或者其他的远端地址访问。</p>\n<h4 id=\"toc_12\">Netfilter（Iptables） 配置</h4>\n<p>更新 <a href=\"https://www.cyberciti.biz/faq/rhel-fedorta-linux-iptables-firewall-configuration-tutorial/\">/etc/sysconfig/iptables （Redhat 和其派生系统特有文件） </a> 实现仅接受来自于 192.168.1.0/24 和 202.54.1.5/29 的连接，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307127885971309\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-A RH-Firewall-1-INPUT -s 192.168.1.0/24 -m state --state NEW -p tcp --dport 22 -j ACCEPT\r\n-A RH-Firewall-1-INPUT -s 202.54.1.5/29 -m state --state NEW -p tcp --dport 22 -j ACCEPT\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307127885971309-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307127885971309-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307127885971309-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307127885971309-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RH</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Firewall</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.1.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307127885971309-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RH</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Firewall</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">202.54.1.5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACCEPT</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307127885971309-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>如果同时使用 IPv6 的话，可以编辑 <code>/etc/sysconfig/ip6tables</code> （Redhat 和其派生系统特有文件），输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830712b227361041\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-A RH-Firewall-1-INPUT -s ipv6network::/ipv6mask -m tcp -p tcp --dport 22 -j ACCEPT\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830712b227361041-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830712b227361041-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830712b227361041-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RH</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Firewall</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ipv6network</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ipv6mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830712b227361041-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>将 <code>ipv6network::/ipv6mask</code> 替换为实际的 IPv6 网段。</p>\n<h4 id=\"toc_13\">Debian/Ubuntu Linux 下的 UFW</h4>\n<p><a href=\"https://www.cyberciti.biz/faq/howto-configure-setup-firewall-with-ufw-on-ubuntu-linux/\">UFW 是 Uncomplicated FireWall 的首字母缩写，主要用来管理 Linux 防火墙</a>，目的是提供一种用户友好的界面。输入<a href=\"https://www.cyberciti.biz/faq/ufw-allow-incoming-ssh-connections-from-a-specific-ip-address-subnet-on-ubuntu-debian/\">以下命令使得系统仅允许网段 202.54.1.5/29 接入端口 22</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830712f932156129\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo ufw allow from 202.54.1.5/29 to any port 22\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830712f932156129-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830712f932156129-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830712f932156129-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">ufw </span><span class=\"crayon-e\">allow </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">202.54.1.5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">any </span><span class=\"crayon-i\">port</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830712f932156129-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>更多信息请参见 “<a href=\"https://www.cyberciti.biz/tips/linux-iptables-examples.html\">Linux：菜鸟管理员的 25 个 Iptables Netfilter 命令</a>”。</p>\n<h4 id=\"toc_14\">*BSD PF 防火墙配置</h4>\n<p>如果使用 PF 防火墙 <a href=\"https://bash.cyberciti.biz/firewall/pf-firewall-script/\">/etc/pf.conf</a> 配置如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307132048997902\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npass in on $ext_if inet proto tcp from {192.168.1.0/24, 202.54.1.5/29} to $ssh_server_ip port ssh flags S/SA synproxy state\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307132048997902-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307132048997902-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307132048997902-1\"><span class=\"crayon-e\">pass</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ext_if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inet</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">proto</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">192.168.1.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">202.54.1.5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ssh_server_ip </span><span class=\"crayon-e\">port </span><span class=\"crayon-e\">ssh </span><span class=\"crayon-i\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">SA </span><span class=\"crayon-e\">synproxy </span><span class=\"crayon-i\">state</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307132048997902-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3 id=\"toc_15\">8、 修改 SSH 端口和绑定 IP</h3>\n<p>ssh 默认监听系统中所有可用的网卡。修改并绑定 ssh 端口有助于避免暴力脚本的连接（许多暴力脚本只尝试端口 22）。更新文件 <code>sshd_config</code> 的以下内容来绑定端口 300 到 IP 192.168.1.5 和 202.54.1.5：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307136297356983\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPort 300 \r\nListenAddress 192.168.1.5\r\nListenAddress 202.54.1.5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307136297356983-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307136297356983-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307136297356983-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307136297356983-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307136297356983-1\"><span class=\"crayon-i\">Port</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">300</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307136297356983-2\"><span class=\"crayon-i\">ListenAddress</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.1.5</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307136297356983-3\"><span class=\"crayon-i\">ListenAddress</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">202.54.1.5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307136297356983-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>当需要接受动态广域网地址的连接时，使用主动脚本是个不错的选择，比如 fail2ban 或 denyhosts。</p>\n<h3 id=\"toc_16\">9、 使用 TCP wrappers （可选的）</h3>\n<p>TCP wrapper 是一个基于主机的访问控制系统，用来过滤来自互联网的网络访问。OpenSSH 支持 TCP wrappers。只需要更新文件 <code>/etc/hosts.allow</code> 中的以下内容就可以使得 SSH 只接受来自于 192.168.1.2 和 172.16.23.12 的连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830713c314903525\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsshd : 192.168.1.2 172.16.23.12\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830713c314903525-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830713c314903525-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830713c314903525-1\"><span class=\"crayon-v\">sshd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.1.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.23.12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830713c314903525-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在 Linux/Mac OS X 和类 UNIX 系统中参见 <a href=\"https://www.cyberciti.biz/faq/tcp-wrappers-hosts-allow-deny-tutorial/\">TCP wrappers 设置和使用的常见问题</a>。</p>\n<h3 id=\"toc_17\">10、 阻止 SSH 破解或暴力攻击</h3>\n<p>暴力破解是一种在单一或者分布式网络中使用大量（用户名和密码的）组合来尝试连接一个加密系统的方法。可以使用以下软件来应对暴力攻击：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/faq/block-ssh-attacks-with-denyhosts/\">DenyHosts</a> 是一个基于 Python SSH 安全工具。该工具通过监控授权日志中的非法登录日志并封禁原始 IP 的方式来应对暴力攻击。\n<ul>\n<li>RHEL / Fedora 和 CentOS Linux 下如何设置 <a href=\"https://www.cyberciti.biz/faq/rhel-linux-block-ssh-dictionary-brute-force-attacks/\">DenyHosts</a>。</li>\n</ul>\n</li>\n<li><a href=\"https://www.fail2ban.org\">Fail2ban</a> 是另一个类似的用来预防针对 SSH 攻击的工具。</li>\n<li><a href=\"https://sshguard.sourceforge.net/\">sshguard</a> 是一个使用 pf 来预防针对 SSH 和其他服务攻击的工具。</li>\n<li><a href=\"http://www.bsdconsulting.no/tools/\">security/sshblock</a> 阻止滥用 SSH 尝试登录。</li>\n<li><a href=\"https://savannah.nongnu.org/projects/ipqbdb/\">IPQ BDB filter</a> 可以看做是 fail2ban 的一个简化版。</li>\n</ul>\n<h3 id=\"toc_18\">11、 限制 TCP 端口 22 的传入速率（可选的）</h3>\n<p>netfilter 和 pf 都提供速率限制选项可以对端口 22 的传入速率进行简单的限制。</p>\n<h4 id=\"toc_19\">Iptables 示例</h4>\n<p>以下脚本将会阻止 60 秒内尝试登录 5 次以上的客户端的连入。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307140766740822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\ninet_if=eth1\r\nssh_port=22\r\n$IPT -I INPUT -p tcp --dport ${ssh_port} -i ${inet_if} -m state --state NEW -m recent --set\r\n$IPT -I INPUT -p tcp --dport ${ssh_port} -i ${inet_if} -m state --state NEW -m recent --update --seconds 60 --hitcount 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307140766740822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307140766740822-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307140766740822-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307140766740822-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307140766740822-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307140766740822-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307140766740822-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307140766740822-2\"><span class=\"crayon-v\">inet_if</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">eth1</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307140766740822-3\"><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">22</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307140766740822-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">inet_if</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">set</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307140766740822-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">inet_if</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">hitcount</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307140766740822-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>在你的 iptables 脚本中调用以上脚本。其他配置选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307144905774120\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$IPT -A INPUT -i ${inet_if} -p tcp --dport ${ssh_port} -m state --state NEW -m limit --limit 3/min --limit-burst 3 -j ACCEPT\r\n$IPT -A INPUT -i ${inet_if} -p tcp --dport ${ssh_port} -m state --state ESTABLISHED -j ACCEPT\r\n$IPT -A OUTPUT -o ${inet_if} -p tcp --sport ${ssh_port} -m state --state ESTABLISHED -j ACCEPT\r\n# another one line example\r\n# $IPT -A INPUT -i ${inet_if} -m state --state NEW,ESTABLISHED,RELATED -p tcp --dport 22 -m limit --limit 5/minute --limit-burst 5-j ACCEPT\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307144905774120-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307144905774120-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307144905774120-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307144905774120-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307144905774120-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307144905774120-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307144905774120-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">inet_if</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">min</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">limit</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">burst</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307144905774120-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">inet_if</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ESTABLISHED</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ACCEPT</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307144905774120-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OUTPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">inet_if</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">sport</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">ssh_port</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ESTABLISHED</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307144905774120-4\"><span class=\"crayon-p\"># another one line example</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307144905774120-5\"><span class=\"crayon-p\"># $IPT -A INPUT -i ${inet_if} -m state --state NEW,ESTABLISHED,RELATED -p tcp --dport 22 -m limit --limit 5/minute --limit-burst 5-j ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307144905774120-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>其他细节参见 iptables 用户手册。</p>\n<h4 id=\"toc_20\">*BSD PF 示例</h4>\n<p>以下脚本将限制每个客户端的连入数量为 20，并且 5 秒内的连接不超过 15 个。如果客户端触发此规则，则将其加入 abusive_ips 表并限制该客户端连入。最后 flush 关键词杀死所有触发规则的客户端的连接。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307148899669113\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsshd_server_ip = \"202.54.1.5\" \r\ntable &lt;abusive_ips&gt; persist\r\nblock in quick from &lt;abusive_ips&gt;\r\npass in on $ext_if proto tcp to $sshd_server_ip port ssh flags S/SA keep state (max-src-conn 20, max-src-conn-rate 15/5, overload &lt;abusive_ips&gt; flush) \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307148899669113-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307148899669113-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307148899669113-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307148899669113-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307148899669113-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307148899669113-1\"><span class=\"crayon-v\">sshd_server_ip</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"202.54.1.5\"</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307148899669113-2\"><span class=\"crayon-v\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">abusive_ips</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">persist</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307148899669113-3\"><span class=\"crayon-e\">block </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quick </span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">abusive_ips</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307148899669113-4\"><span class=\"crayon-e\">pass </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ext_if </span><span class=\"crayon-e\">proto </span><span class=\"crayon-e\">tcp </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">sshd_server_ip </span><span class=\"crayon-e\">port </span><span class=\"crayon-e\">ssh </span><span class=\"crayon-i\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">SA </span><span class=\"crayon-e\">keep </span><span class=\"crayon-e\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">max</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">conn</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">conn</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">rate</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">overload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">abusive_ips</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flush</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307148899669113-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<h3 id=\"toc_21\">12、 使用端口敲门（可选的）</h3>\n<p><a href=\"https://en.wikipedia.org/wiki/Port_knocking\">端口敲门</a>是通过在一组预先指定的封闭端口上生成连接尝试，以便从外部打开防火墙上的端口的方法。一旦指定的端口连接顺序被触发，防火墙规则就被动态修改以允许发送连接的主机连入指定的端口。以下是一个使用 iptables 实现的端口敲门的示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830714d084555452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$IPT -N stage1\r\n$IPT -A stage1 -m recent --remove --name knock\r\n$IPT -A stage1 -p tcp --dport 3456 -m recent --set --name knock2\r\n\r\n$IPT -N stage2\r\n$IPT -A stage2 -m recent --remove --name knock2\r\n$IPT -A stage2 -p tcp --dport 2345 -m recent --set --name heaven\r\n\r\n$IPT -N door\r\n$IPT -A door -m recent --rcheck --seconds 5 --name knock2 -j stage2\r\n$IPT -A door -m recent --rcheck --seconds 5 --name knock -j stage1\r\n$IPT -A door -p tcp --dport 1234 -m recent --set --name knock\r\n\r\n$IPT -A INPUT -m --state ESTABLISHED,RELATED -j ACCEPT\r\n$IPT -A INPUT -p tcp --dport 22 -m recent --rcheck --seconds 5 --name heaven -j ACCEPT\r\n$IPT -A INPUT -p tcp --syn -j door\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830714d084555452-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830714d084555452-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stage1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stage1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">remove</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">knock</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stage1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3456</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">knock2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-4\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stage2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stage2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">remove</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">knock2</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stage2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2345</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">heaven</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-8\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-9\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">door</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-10\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">rcheck</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-v\">knock2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stage2</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-11\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">rcheck</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-v\">knock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stage1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-12\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">door</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1234</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">knock</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-14\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">state </span><span class=\"crayon-v\">ESTABLISHED</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">RELATED</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACCEPT</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-15\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">rcheck</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">name </span><span class=\"crayon-v\">heaven</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830714d084555452-16\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">IPT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">syn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">door</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830714d084555452-17\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p>更多信息请参见：</p>\n<p><a href=\"https://www.cyberciti.biz/faq/debian-ubuntu-linux-iptables-knockd-port-knocking-tutorial/\">Debian / Ubuntu: 使用 Knockd and Iptables 设置端口敲门</a></p>\n<h3 id=\"toc_22\">13、 配置空闲超时注销时长</h3>\n<p>用户可以通过 ssh 连入服务器，可以配置一个超时时间间隔来避免无人值守的 ssh 会话。 打开 <code>sshd_config</code> 并确保配置以下值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307152818846908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nClientAliveInterval 300\r\nClientAliveCountMax 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307152818846908-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307152818846908-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307152818846908-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307152818846908-1\"><span class=\"crayon-i\">ClientAliveInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">300</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307152818846908-2\"><span class=\"crayon-i\">ClientAliveCountMax</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307152818846908-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>以秒为单位设置一个空闲超时时间（300秒 = 5分钟）。一旦空闲时间超过这个值，空闲用户就会被踢出会话。更多细节参见<a href=\"https://www.cyberciti.biz/faq/linux-unix-login-bash-shell-force-time-outs/\">如何自动注销空闲超时的 BASH / TCSH / SSH 用户</a>。</p>\n<h3 id=\"toc_23\">14、 为 ssh 用户启用警示标语</h3>\n<p>更新 <code>sshd_config</code> 文件如下行来设置用户的警示标语：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307155303435761\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nBanner /etc/issue\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307155303435761-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307155303435761-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307155303435761-1\"><span class=\"crayon-v\">Banner</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">issue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307155303435761-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>`/etc/issue 示例文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307158851613406\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n----------------------------------------------------------------------------------------------\r\nYou are accessing a XYZ Government (XYZG) Information System (IS) that is provided for authorized use only.\r\nBy using this IS (which includes any device attached to this IS), you consent to the following conditions:\r\n\r\n+ The XYZG routinely intercepts and monitors communications on this IS for purposes including, but not limited to,\r\npenetration testing, COMSEC monitoring, network operations and defense, personnel misconduct (PM),\r\nlaw enforcement (LE), and counterintelligence (CI) investigations.\r\n\r\n+ At any time, the XYZG may inspect and seize data stored on this IS.\r\n\r\n+ Communications using, or data stored on, this IS are not private, are subject to routine monitoring,\r\ninterception, and search, and may be disclosed or used for any XYZG authorized purpose.\r\n\r\n+ This IS includes security measures (e.g., authentication and access controls) to protect XYZG interests--not\r\nfor your personal benefit or privacy.\r\n\r\n+ Notwithstanding the above, using this IS does not constitute consent to PM, LE or CI investigative searching\r\nor monitoring of the content of privileged communications, or work product, related to personal representation\r\nor services by attorneys, psychotherapists, or clergy, and their assistants. Such communications and work\r\nproduct are private and confidential. See User Agreement for details.\r\n----------------------------------------------------------------------------------------------\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307158851613406-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307158851613406-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-2\"><span class=\"crayon-e\">You </span><span class=\"crayon-e\">are </span><span class=\"crayon-i\">accessing</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">XYZ </span><span class=\"crayon-e\">Government</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">XYZG</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Information </span><span class=\"crayon-e\">System</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">IS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">that </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">provided </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">authorized </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">only</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-3\"><span class=\"crayon-e\">By </span><span class=\"crayon-e\">using </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">which </span><span class=\"crayon-e\">includes </span><span class=\"crayon-e\">any </span><span class=\"crayon-e\">device </span><span class=\"crayon-e\">attached </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">consent </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">following </span><span class=\"crayon-v\">conditions</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-4\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-5\"><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">XYZG </span><span class=\"crayon-e\">routinely </span><span class=\"crayon-e\">intercepts </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">monitors </span><span class=\"crayon-e\">communications </span><span class=\"crayon-e\">on </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">purposes </span><span class=\"crayon-v\">including</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">but </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">limited </span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-6\"><span class=\"crayon-e\">penetration </span><span class=\"crayon-v\">testing</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">COMSEC </span><span class=\"crayon-v\">monitoring</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">network </span><span class=\"crayon-e\">operations </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">defense</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">personnel </span><span class=\"crayon-e\">misconduct</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PM</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-7\"><span class=\"crayon-e\">law </span><span class=\"crayon-e\">enforcement</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">counterintelligence</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CI</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">investigations</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-8\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-9\"><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">At </span><span class=\"crayon-e\">any </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">XYZG </span><span class=\"crayon-e\">may </span><span class=\"crayon-e\">inspect </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seize </span><span class=\"crayon-e\">data </span><span class=\"crayon-e\">stored </span><span class=\"crayon-e\">on </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-10\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-11\"><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Communications </span><span class=\"crayon-v\">using</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">data </span><span class=\"crayon-e\">stored </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">are </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">private</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">subject </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">routine </span><span class=\"crayon-v\">monitoring</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-12\"><span class=\"crayon-v\">interception</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">search</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">may </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">disclosed </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">used </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">any </span><span class=\"crayon-e\">XYZG </span><span class=\"crayon-e\">authorized </span><span class=\"crayon-v\">purpose</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-14\"><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">includes </span><span class=\"crayon-e\">security </span><span class=\"crayon-e\">measures</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">authentication </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">access </span><span class=\"crayon-v\">controls</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">protect </span><span class=\"crayon-e\">XYZG </span><span class=\"crayon-v\">interests</span><span class=\"crayon-o\">--</span><span class=\"crayon-st\">not</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-15\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">personal </span><span class=\"crayon-e\">benefit </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">privacy</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-16\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-17\"><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Notwithstanding </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">above</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">using </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">constitute </span><span class=\"crayon-e\">consent </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PM</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LE </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CI </span><span class=\"crayon-e\">investigative </span><span class=\"crayon-e\">searching</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-18\"><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">monitoring </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">content </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">privileged </span><span class=\"crayon-v\">communications</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">work </span><span class=\"crayon-v\">product</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">related </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">personal </span><span class=\"crayon-e\">representation</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-19\"><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">services </span><span class=\"crayon-e\">by </span><span class=\"crayon-v\">attorneys</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psychotherapists</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clergy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">their </span><span class=\"crayon-v\">assistants</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Such </span><span class=\"crayon-e\">communications </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">work</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-20\"><span class=\"crayon-e\">product </span><span class=\"crayon-e\">are </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">confidential</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">See </span><span class=\"crayon-e\">User </span><span class=\"crayon-e\">Agreement </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">details</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307158851613406-21\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307158851613406-22\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0085 seconds] -->\r\n<p>以上是一个标准的示例，更多的用户协议和法律细节请咨询你的律师团队。</p>\n<h3 id=\"toc_24\">15、 禁用 .rhosts 文件（需核实）</h3>\n<p>禁止读取用户的 <code>~/.rhosts</code> 和 <code>~/.shosts</code> 文件。更新 <code>sshd_config</code> 文件中的以下内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830715d703212764\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nIgnoreRhosts yes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830715d703212764-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830715d703212764-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830715d703212764-1\"><span class=\"crayon-e\">IgnoreRhosts </span><span class=\"crayon-i\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830715d703212764-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>SSH 可以模拟过时的 rsh 命令，所以应该禁用不安全的 RSH 连接。</p>\n<h3 id=\"toc_25\">16、 禁用基于主机的授权（需核实）</h3>\n<p>禁用基于主机的授权，更新 <code>sshd_config</code> 文件的以下选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307163259683567\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHostbasedAuthentication no\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307163259683567-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307163259683567-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307163259683567-1\"><span class=\"crayon-e\">HostbasedAuthentication </span><span class=\"crayon-i\">no</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307163259683567-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_26\">17、 为 OpenSSH 和操作系统打补丁</h3>\n<p>推荐你使用类似 <a href=\"https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/\">yum</a>、<a href=\"https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html\">apt-get</a> 和 <a href=\"https://www.cyberciti.biz/tips/howto-keep-freebsd-system-upto-date.html\">freebsd-update</a> 等工具保持系统安装了最新的安全补丁。</p>\n<h3 id=\"toc_27\">18、 Chroot OpenSSH （将用户锁定在主目录）</h3>\n<p>默认设置下用户可以浏览诸如 <code>/etc</code>、<code>/bin</code> 等目录。可以使用 chroot 或者其他专有工具如 <a href=\"https://www.cyberciti.biz/tips/rhel-centos-linux-install-configure-rssh-shell.html\">rssh</a> 来保护 ssh 连接。从版本 4.8p1 或 4.9p1 起，OpenSSH 不再需要依赖诸如 rssh 或复杂的 chroot(1) 等第三方工具来将用户锁定在主目录中。可以使用新的 <code>ChrootDirectory</code> 指令将用户锁定在其主目录，参见<a href=\"https://www.debian-administration.org/articles/590\">这篇博文</a>。</p>\n<h3 id=\"toc_28\">19. 禁用客户端的 OpenSSH 服务</h3>\n<p>工作站和笔记本不需要 OpenSSH 服务。如果不需要提供 ssh 远程登录和文件传输功能的话，可以禁用 sshd 服务。CentOS / RHEL 用户可以使用 <a title=\"See Linux/Unix yum command examples for more info\" href=\"https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/\">yum 命令</a> 禁用或删除 openssh-server：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307167533657468\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo yum erase openssh-server\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307167533657468-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307167533657468-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307167533657468-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">yum </span><span class=\"crayon-e\">erase </span><span class=\"crayon-v\">openssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307167533657468-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>Debian / Ubuntu 用户可以使用 <a title=\"See Linux/Unix apt command examples for more info\" href=\"https://www.cyberciti.biz/faq/ubuntu-lts-debian-linux-apt-command-examples/\">apt 命令</a>/<a title=\"See Linux/Unix apt-get command examples for more info\" href=\"https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html\">apt-get 命令</a> 删除 openssh-server：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307174818697919\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo apt-get remove openssh-server\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307174818697919-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307174818697919-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307174818697919-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">remove </span><span class=\"crayon-v\">openssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307174818697919-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>有可能需要更新 iptables 脚本来移除 ssh 的例外规则。CentOS / RHEL / Fedora 系统可以编辑文件 <code>/etc/sysconfig/iptables</code> 和 <code>/etc/sysconfig/ip6tables</code>。最后<a href=\"https://www.cyberciti.biz/faq/howto-rhel-linux-open-port-using-iptables/\">重启 iptables</a> 服务：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307178495895127\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# service iptables restart\r\n# service ip6tables restart\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307178495895127-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307178495895127-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307178495895127-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307178495895127-1\"><span class=\"crayon-p\"># service iptables restart</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307178495895127-2\"><span class=\"crayon-p\"># service ip6tables restart</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307178495895127-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3 id=\"toc_29\">20. 来自 Mozilla 的额外提示</h3>\n<p>如果使用 6.7+ 版本的 OpenSSH，可以尝试下<a href=\"https://wiki.mozilla.org/Security/Guidelines/OpenSSH\">以下设置</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830717b491351326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#################[ WARNING ]########################\r\n# Do not use any setting blindly. Read sshd_config #\r\n# man page. You must understand cryptography to    #\r\n# tweak following settings. Otherwise use defaults #\r\n####################################################\r\n\r\n# Supported HostKey algorithms by order of preference.\r\nHostKey /etc/ssh/ssh_host_ed25519_key\r\nHostKey /etc/ssh/ssh_host_rsa_key\r\nHostKey /etc/ssh/ssh_host_ecdsa_key\r\n\r\n# Specifies the available KEX (Key Exchange) algorithms.\r\nKexAlgorithms curve25519-sha256@libssh.org,ecdh-sha2-nistp521,ecdh-sha2-nistp384,ecdh-sha2-nistp256,diffie-hellman-group-exchange-sha256\r\n\r\n# Specifies the ciphers allowed\r\nCiphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr\r\n\r\n#Specifies the available MAC (message authentication code) algorithms\r\nMACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,umac-128@openssh.com\r\n\r\n# LogLevel VERBOSE logs user's key fingerprint on login. Needed to have a clear audit track of which key was using to log in.\r\nLogLevel VERBOSE\r\n\r\n# Log sftp level file access (read/write/etc.) that would not be easily logged otherwise.\r\nSubsystem sftp /usr/lib/ssh/sftp-server -f AUTHPRIV -l INFO\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830717b491351326-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830717b491351326-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-1\"><span class=\"crayon-p\">#################[ WARNING ]########################</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-2\"><span class=\"crayon-p\"># Do not use any setting blindly. Read sshd_config #</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-3\"><span class=\"crayon-p\"># man page. You must understand cryptography to    #</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-4\"><span class=\"crayon-p\"># tweak following settings. Otherwise use defaults #</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-5\"><span class=\"crayon-p\">####################################################</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-6\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-7\"><span class=\"crayon-p\"># Supported HostKey algorithms by order of preference.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-8\"><span class=\"crayon-v\">HostKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">ssh_host_ed25519_key</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-9\"><span class=\"crayon-v\">HostKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">ssh_host_rsa_key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-10\"><span class=\"crayon-v\">HostKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ssh_host_ecdsa_key</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-12\"><span class=\"crayon-p\"># Specifies the available KEX (Key Exchange) algorithms.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-13\"><span class=\"crayon-e\">KexAlgorithms </span><span class=\"crayon-v\">curve25519</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha256</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">libssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">ecdh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">nistp521</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">ecdh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">nistp384</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">ecdh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">nistp256</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">diffie</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">hellman</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">group</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">exchange</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha256</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-14\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-15\"><span class=\"crayon-p\"># Specifies the ciphers allowed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-16\"><span class=\"crayon-e\">Ciphers </span><span class=\"crayon-v\">chacha20</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">poly1305</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">aes256</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">gcm</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">aes128</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">gcm</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">aes256</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ctr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">aes192</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ctr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">aes128</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ctr</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-18\"><span class=\"crayon-p\">#Specifies the available MAC (message authentication code) algorithms</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-19\"><span class=\"crayon-e\">MACs </span><span class=\"crayon-v\">hmac</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">512</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">etm</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hmac</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">256</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">etm</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">umac</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">128</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">etm</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hmac</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">512</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hmac</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sha2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">256</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">umac</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">128</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">openssh</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-20\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-21\"><span class=\"crayon-p\"># LogLevel VERBOSE logs user's key fingerprint on login. Needed to have a clear audit track of which key was using to log in.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-22\"><span class=\"crayon-e\">LogLevel </span><span class=\"crayon-v\">VERBOSE</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-24\"><span class=\"crayon-p\"># Log sftp level file access (read/write/etc.) that would not be easily logged otherwise.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830717b491351326-25\"><span class=\"crayon-e\">Subsystem </span><span class=\"crayon-v\">sftp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ssh</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sftp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTHPRIV</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">INFO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830717b491351326-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>使用以下命令获取 OpenSSH 支持的加密方法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307181173619155\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ssh -Q cipher\r\n$ ssh -Q cipher-auth\r\n$ ssh -Q mac\r\n$ ssh -Q kex\r\n$ ssh -Q key\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307181173619155-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307181173619155-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307181173619155-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307181173619155-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307181173619155-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307181173619155-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307181173619155-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cipher</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307181173619155-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cipher</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">auth</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307181173619155-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307181173619155-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kex</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b78307181173619155-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307181173619155-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><a href=\"https://www.cyberciti.biz/tips/wp-content/uploads/2009/07/OpenSSH-Security-Tutorial-Query-Ciphers-and-algorithms-choice.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/01f18d7dbf3c663c1e4e51d9efddd873.jpg\" alt=\"OpenSSH安全教程查询密码和算法选择\"></a></p>\n<h3 id=\"toc_30\">如何测试 sshd_config 文件并重启/重新加载 SSH 服务？</h3>\n<p>在重启 sshd 前检查配置文件的有效性和密匙的完整性，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307185862141446\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sshd -t\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307185862141446-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307185862141446-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307185862141446-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307185862141446-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>扩展测试模式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b78307189318360003\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sshd -T\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b78307189318360003-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b78307189318360003-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b78307189318360003-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">T</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b78307189318360003-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>最后，根据系统的的版本<a href=\"https://www.cyberciti.biz/faq/howto-restart-ssh/\">重启 Linux 或类 Unix 系统中的 sshd 服务</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9b7830718c894581775\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ [sudo systemctl start ssh][38] ## Debian/Ubunt Linux##\r\n$ [sudo systemctl restart sshd.service][39] ## CentOS/RHEL/Fedora Linux##\r\n$ doas /etc/rc.d/sshd restart ## OpenBSD##\r\n$ sudo service sshd restart ## FreeBSD## \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830718c894581775-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830718c894581775-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830718c894581775-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9b7830718c894581775-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9b7830718c894581775-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9b7830718c894581775-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">start </span><span class=\"crayon-v\">ssh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">38</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">## Debian/Ubunt Linux##</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830718c894581775-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">39</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">## CentOS/RHEL/Fedora Linux##</span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830718c894581775-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sshd </span><span class=\"crayon-v\">restart</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">## OpenBSD##</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9b7830718c894581775-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">service </span><span class=\"crayon-e\">sshd </span><span class=\"crayon-v\">restart</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">## FreeBSD## </span></div><div class=\"crayon-line\" id=\"crayon-5aa9b7830718c894581775-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"toc_31\">其他建议</h3>\n<ol>\n<li><a href=\"https://www.cyberciti.biz/open-source/howto-protect-linux-ssh-login-with-google-authenticator/\">使用 2FA 加强 SSH 的安全性</a> – 可以使用 <a href=\"http://www.nongnu.org/oath-toolkit/\">OATH Toolkit</a> 或 <a href=\"https://duo.com\">DuoSecurity</a> 启用多重身份验证。</li>\n<li><a href=\"https://www.cyberciti.biz/faq/ssh-passwordless-login-with-keychain-for-scripts/\">基于密匙链的身份验证</a> – 密匙链是一个 bash 脚本，可以使得基于密匙的验证非常的灵活方便。相对于无密码密匙，它提供更好的安全性。</li>\n</ol>\n<h3 id=\"toc_32\">更多信息</h3>\n<ul>\n<li><a href=\"https://www.openssh.com/\">OpenSSH 官方</a> 项目。</li>\n<li>用户手册: sshd(8)、ssh(1)、ssh-add(1)、ssh-agent(1)。</li>\n</ul>\n<p>如果知道这里没用提及的方便的软件或者技术，请在下面的评论中分享，以帮助读者保持 OpenSSH 的安全。</p>\n<h3 id=\"toc_33\">关于作者</h3>\n<p>作者是 nixCraft 的创始人，一个经验丰富的系统管理员和 Linux/Unix 脚本培训师。他曾与全球客户合作，领域涉及 IT，教育，国防和空间研究以及非营利部门等多个行业。请在 <a href=\"https://twitter.com/nixcraft\">Twitter</a>、<a href=\"https://facebook.com/nixcraft\">Facebook</a>、<a href=\"https://plus.google.com/+CybercitiBiz\">Google+</a> 上关注他。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113692\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113692votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113692\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 5, "create_date": "2018-03-03", "praise_nums": 2}
{"url_obj_id": "aa94da9060b646e6772ebf4ad4c5ffe7", "url": "http://blog.jobbole.com/113728/", "title": "开源作者遭受小白的 9 种伤害", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "tags": "业界,,开源", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/xiandafu/blog/1630989\">闲大赋</a>   </div><div>\n<p>我是Beetl和BeetlSQL开源的作者，这俩类技术实现难度较大，前者是属于语言实现类开源，后者则是全功能ORM实现。但是这俩个开源使用门槛又低，能遇到各种各样的小白用户。我帮助小白解决了非常多技术问题，但也遭遇过小白给予的困扰。我总结了一下9种小白对开源作者造成的有意无意的伤害，并且按照严重程度分为3个级别</p>\n<h1>一级伤害，普通伤害</h1>\n<h2>聊天式提问</h2>\n<p>这种行为的小白从来没有察觉到提问是一门学科，没有研究如何提问，也没有观摩过别人的提问为何能得到专家的仔细回答。他总觉得，专家就在身边，专家有足够的时间帮助自己。他通常提问方式是</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dcccd6029045444\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;你好，在吗？\r\n小白&gt;（10分钟后）大神，有空吗？我有一个问题想问问\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dcccd6029045444-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dcccd6029045444-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dcccd6029045444-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dcccd6029045444-1\">小白<span class=\"crayon-o\">&gt;</span>你好，在吗？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dcccd6029045444-2\">小白<span class=\"crayon-o\">&gt;</span>（<span class=\"crayon-cn\">10</span>分钟后）大神，有空吗？我有一个问题想问问</div><div class=\"crayon-line\" id=\"crayon-5aaa2f7dcccd6029045444-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这类小白并不知道，开源作者都很忙，如果他空闲了恰好看到你的提问，但你没有科学提问，他几乎不会跟你去互动接下来你希望的事情。这种无意义的叨扰开源作者，挺让人心烦的。</p>\n<h2>从不阅读官方文档</h2>\n<p>这种行为小白是最为常见的小白，遇到问题都是以Baidu为工具来解决。小白需要清楚几点关于搜索引擎不能做到的地方</p>\n<ul>\n<li>对新技术，小微技术的查询滞后</li>\n<li>对流行技术，有会让人陷入信息汪洋大海中</li>\n</ul>\n<p>靠搜索引擎来解决问题的人，都会技术积累不牢固，较好的办法是以官网手册为中心，结合官网论坛，或者oschina这样专门的技术社区，结合源代码和搜索引擎来找到解决办法。对于小白来说，大部分问题都能从官网文档中找到答案。但小白却没有时间去研究官官网文档。以我经验，越是厉害的人越对官网文档重视，越要花时间去通读官网手册，官网的其他技术资料。 越是小白呢，因为忙就不详细了解官网文档，结果知识不牢固，会导致后面越来越忙（因为会一直解决跟本不是问题的问题），陷入恶心循环</p>\n<p>我在我的SpringBoot-Plus开源中，安装说明有14行，有5行且标准了重点，都提到要用JDK8和打开Parameter参数，并详细说明了如果系统启动时报报错，应该就是paramter参数没有打开（我同时也链接了如何打开JDK8 paramter参数的文章),结果还是有10几位小白告诉我系统起不来，并附上了我在安装说明里提到过的相同错误。</p>\n<p>这类小白老是问一下显而易见的问题，对开源作者和其他初级用户造成了困惑</p>\n<h2>要这要那，不经过思考和探索</h2>\n<p>这类小白对开源作者造成了常规性的伤害最多。有时候我都怀疑他们并不是不会，而是懒，以为开源作者就是他身边的老师，或者身边的同事 ，比如他们经常提一些明显能自己解决的问题，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dccce1978239464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;BeetlSQL如何翻页（实际上官网文档有专门一章讲翻页）\r\n小白&gt;Beetl的Maven坐标是什么（同样官网文档肯定有哇）\r\n小白&gt;SpringBoot-Plus 数据库安装脚本有吗（如果没有，还能叫开源吗，就在doc目录下）\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dccce1978239464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dccce1978239464-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dccce1978239464-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dccce1978239464-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dccce1978239464-1\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-i\">BeetlSQL</span>如何翻页（实际上官网文档有专门一章讲翻页）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dccce1978239464-2\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-i\">Beetl</span>的<span class=\"crayon-i\">Maven</span>坐标是什么（同样官网文档肯定有哇）</div><div class=\"crayon-line\" id=\"crayon-5aaa2f7dccce1978239464-3\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">SpringBoot</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Plus</span><span class=\"crayon-h\"> </span>数据库安装脚本有吗（如果没有，还能叫开源吗，就在<span class=\"crayon-i\">doc</span>目录下）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dccce1978239464-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这类小白的问题，如果你真有空回答，还并不好回答，这类小白的问题通常都需要大篇幅的解答其疑问，因为问的实在太基础了</p>\n<h1>二级伤害，常规伤害</h1>\n<h2>情绪宣泄类型小白</h2>\n<p>这类小白有一定技术能力，但靠自己没有解决问题，因此在和开源作者交流过程中过于注重自己的情感体验了，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dccce9209027608\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;这个问题我花了周末俩天都没解决，难道Beetl真的很不好用吗？（作为开源作者的我，真想一棍子敲打上去，你是不是来解决问题的？）\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dccce9209027608-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dccce9209027608-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dccce9209027608-1\">小白<span class=\"crayon-o\">&gt;</span>这个问题我花了周末俩天都没解决，难道<span class=\"crayon-i\">Beetl</span>真的很不好用吗？（作为开源作者的我，真想一棍子敲打上去，你是不是来解决问题的？）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dccce9209027608-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>还比如经常有小白辛苦工作到晚上11点，然后qq群提问</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dccced967698647\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;大家好，问个问题,很着急解决......\r\n\r\n小白&gt;(半小时后)，这个群太冷漠了，都没人愿意帮助我\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dccced967698647-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dccced967698647-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dccced967698647-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dccced967698647-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dccced967698647-1\">小白<span class=\"crayon-o\">&gt;</span>大家好，问个问题<span class=\"crayon-sy\">,</span>很着急解决<span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dccced967698647-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa2f7dccced967698647-3\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span>半小时后<span class=\"crayon-sy\">)</span>，这个群太冷漠了，都没人愿意帮助我</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dccced967698647-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>其实大家不愿帮助，可能是因为都睡觉了，或者没有精力再深夜去帮你解决问题，但你宣泄了个人情感，估计第二天也不会得到社区任何帮助</p>\n<h2>选择性的展示问题线索</h2>\n<p>这类小白是最让人开源作者头疼的，因为他们在寻求帮助的时候，不知道自己需要向开源作者提供什么样的信息。甚至有时候故意只将自己写正确的部分展示出来，来取得开源作者的认同。但这无法解决问题</p>\n<p>最常见的是只贴出自己的代码，但并没有贴出错误提示。其实错误提示更能帮助开源作者解决问题，甚至不需要贴出你的代码都行。 有些人贴出了错误提示，比如异常栈，但并没有完整的贴出异常栈，有些人贴出了代码，但并没有把IDE的代码行也跟图粘贴出来，这导致无法交流</p>\n<p>比如这个贴图，很难给开源作者提供详细的线索，真正的线索应该在下面未贴出的异常栈里</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/44fecd417e8fb41407739e36f8842fd8.png\" alt=\"输入图片说明\"></p>\n<p>这个贴图则没有包含代码行数，会出现交流困难 <img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/fbf597c38a270d90e2370b006ee08304.png\" alt=\"输入图片说明\"></p>\n<p>较好的方式是这个图</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/05a9aac62b2942fcdade9d3f841d4549.png\" alt=\"输入图片说明\"></p>\n<p>这类小白会非常浪费开源作者的时间，所以我认为是二级伤害。</p>\n<p>我经常说一句话，你若仔细提问，我便详细回答。通常，对于社区提问附带多张图片的小白，非常受我欢迎</p>\n<h2>向开源作者提出错误的问题</h2>\n<p>有些小白经过思考和探索后，提出了错误的问题。比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dcccf1053999570\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;为什么XXX开源不兼容Java7(实际上根本不是版本的事情）\r\n小白&gt;为什么BeetlSQL不支持SQLServer(实际上是数据库配置不正确)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dcccf1053999570-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dcccf1053999570-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dcccf1053999570-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dcccf1053999570-1\">小白<span class=\"crayon-o\">&gt;</span>为什么<span class=\"crayon-i\">XXX</span>开源不兼容<span class=\"crayon-e\">Java7</span><span class=\"crayon-sy\">(</span>实际上根本不是版本的事情）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dcccf1053999570-2\">小白<span class=\"crayon-o\">&gt;</span>为什么<span class=\"crayon-i\">BeetlSQL</span>不支持<span class=\"crayon-e\">SQLServer</span><span class=\"crayon-sy\">(</span>实际上是数据库配置不正确<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aaa2f7dcccf1053999570-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>。这类提问能错误引导问题解答者。正确的姿势应该是完整的说出自己的期望和自己的过程以及最后的现象。然后可以提出自己认为的解答方向来辅助开源作者帮你解决问题</p>\n<h2>隐藏自己的背景信息</h2>\n<p>开源作者回答的思路很多，背景信息对开源作者回答问题有很大帮助。比如，你是个新手，那么SpringBoot-Plus没有启动，可能是你没有安装Maven或者JDK，如果你是个SpringBoot有经验者，曾经用SpringBoot在好几个项目里，那么启动失败可能真的意味这有环境不兼容，甚至是开源Bug</p>\n<p>小白提问的时候花几句介绍一下自己是非常有必要的，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa2f7dcccf7217807773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n大有前途的小白&gt;我是SpringBoot-Plus使用新手，我有3年java经验，也使用过Spring，自己也实现过AOP，现在有一个SpringBoot的自定义AOP如何实现的问题....\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa2f7dcccf7217807773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa2f7dcccf7217807773-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa2f7dcccf7217807773-1\">大有前途的小白<span class=\"crayon-o\">&gt;</span>我是<span class=\"crayon-v\">SpringBoot</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Plus</span>使用新手，我有<span class=\"crayon-cn\">3</span>年<span class=\"crayon-i\">java</span>经验，也使用过<span class=\"crayon-i\">Spring</span>，自己也实现过<span class=\"crayon-i\">AOP</span>，现在有一个<span class=\"crayon-i\">SpringBoot</span>的自定义<span class=\"crayon-i\">AOP</span>如何实现的问题<span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa2f7dcccf7217807773-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这样的提问，比小白一上来就问如何实现AOP好很多，前者能帮助开源作者知道解答的范围从而精确解答，节省了开源作者的时间，也节省了小白时间</p>\n<h1>三级伤害，伤透了心</h1>\n<h2>对于开源作者招待不周行为进行攻击，造谣</h2>\n<p>开源作者都是出于兴趣在业余时间完成开源，也是抽空帮助解答问题，因此如果开源作者不回答问题，或者简洁回答，这都是开源作者的常态行为。但有些小白却认为受到了冒犯从而转为攻击开源作者。</p>\n<p>我就遭受过俩个人类似的攻击，他们嫌我怠慢他们，或者是言语上让他们难堪，就转而在社区攻击我，比如，用小号再次潜入群里，故意激怒我踢走他，然后他在oschina上发帖子说《beetl作者闲大赋为什么如此自负和目中无人》，并截图为证。这个帖子在oschina首页因为热门而存在了一个月时间</p>\n<p>还有人因为我的怠慢而在社区收集我的各种黑证据，比如有一次看到并发里的内存模型，我就在社区提问（其实当时我已经了解了），意图是想让大家讨论一下技术，结果又有人马上把这个截图发到社区，然后说《闲大赋连并发都不懂》</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/85ed9e2d4e339bcdd6c6eb005bd0dbeb.png\" alt=\"输入图片说明\"></p>\n<h1>三级++伤害</h1>\n<h2>攻击网站，黑掉开源作者的开源社区</h2>\n<p>这个也许是特列，但我碰上了，这位小白是某大互联网公司的技术人员，在社区里不可一世，甚至开始教育其他人的品德。作为一个年轻人，非常猖狂。我后来驱逐他出社区后，没想到的是，网站立刻不能访问，一直遭受暴力破解，而且他还通过小号在社区直播破坏过程。第二天，ibeetl.com 真的不能访问，整个社区被黑，数据被清空，积累了3年的技术问答全不不复存在。</p>\n<p>后来在社区其他人员帮助写，用SpringBoot+Beetl+BeetlSQL重写了一个java论坛，甚至开源了这个项目，因祸得福吧。远离了恶人，结交了真朋友</p>\n<h1>总结</h1>\n<p>作为开源作者，提供了自己的想法和实践出来的作品，难得可贵，如果有好的小白，那么开源产品会更加完美。如果遭遇到上面我列举出来的各种小白，那就是开源作者的不幸，我觉得这个一直是常态，遇上几个特别优秀的小白，又会碰上几个对开源作者造成各种级别伤害的小白。希望小白们看了这个博客，能减少自己对开源作者造成的困扰和伤害，同时提高自己的技术水平</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113728\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113728votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113728\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "fav_nums": 1, "create_date": "2018-03-09", "praise_nums": 2}
{"url_obj_id": "a47361c034c83e65bad8c6c27ce61a3b", "url": "http://blog.jobbole.com/113760/", "title": "Redis 集群部署及踩过的坑", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "tags": "IT技术,Redis,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/gaoenwei/blog/1623214\">码上青天</a>   </div><h2><strong>本文目标</strong></h2>\n<blockquote><p>要在单台机器上搭建Redis集群，方式是通过不同的TCP端口启动多个实例，然后组成集群，同时记录在搭建过程中踩过的坑。</p></blockquote>\n<h2>安装准备</h2>\n<blockquote><p>centos版本：6.7</p>\n<p>redis版本：3.2.3</p>\n<p>安装方式：源码安装</p>\n<p>服务器：1台</p></blockquote>\n<h2>操作步骤</h2>\n<p>此处默认已安装好单台redis，如果不会可以参照《<a href=\"https://my.oschina.net/gaoenwei/blog/1622588\" rel=\"nofollow\">centos上安装redis</a>》</p>\n<p> </p>\n<h3>1、启动Redis多个实例</h3>\n<p>我们在Redis安装目录下创建目录cluster，并编写7000.conf~7005.conf 6个配置文件，这6个配置文件用来启动6个实例，后面将使用这6个实例组成集群。</p>\n<p>以7000.conf为例，配置文件需要填写如下几项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a49418944826\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nport  7000                                        //端口7000,7001,7002,7003,7004,7005        \r\nbind 192.168.186.91                                     //默认ip为127.0.0.1 需要改为其他节点机器可访问的ip 否则创建集群时无法访问对应的端口，无法创建集群\r\ndaemonize    yes                               //redis后台运行\r\npidfile  ./redis_7000.pid          //pidfile文件对应7000,7001,7002,7003,7004,7005 \r\ncluster-enabled  yes                           //开启集群  把注释#去掉\r\ncluster-config-file  nodes_7000.conf   //集群的配置  配置文件首次启动自动生成 7000,7001,7002,7003,7004,7005 \r\ncluster-node-timeout  15000                //请求超时  默认15秒，可自行设置\r\nappendonly  yes                           //aof日志开启  有需要就开启，它会每次写操作都记录一条日志　</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a49418944826-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a49418944826-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a49418944826-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a49418944826-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a49418944826-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a49418944826-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a49418944826-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a49418944826-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a49418944826-1\"><span class=\"crayon-i\">port</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-c\">//端口7000,7001,7002,7003,7004,7005        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a49418944826-2\"><span class=\"crayon-i\">bind</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-h\">                                     </span><span class=\"crayon-c\">//默认ip为127.0.0.1 需要改为其他节点机器可访问的ip 否则创建集群时无法访问对应的端口，无法创建集群</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a49418944826-3\"><span class=\"crayon-e\">daemonize    </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                               </span><span class=\"crayon-c\">//redis后台运行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a49418944826-4\"><span class=\"crayon-i\">pidfile</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis_7000</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">//pidfile文件对应7000,7001,7002,7003,7004,7005 </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a49418944826-5\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">enabled  </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                           </span><span class=\"crayon-c\">//开启集群  把注释#去掉</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a49418944826-6\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">file  </span><span class=\"crayon-v\">nodes_7000</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//集群的配置  配置文件首次启动自动生成 7000,7001,7002,7003,7004,7005 </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a49418944826-7\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">timeout</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15000</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">//请求超时  默认15秒，可自行设置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a49418944826-8\"><span class=\"crayon-e\">appendonly  </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                           </span><span class=\"crayon-c\">//aof日志开启  有需要就开启，它会每次写操作都记录一条日志　</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>分别启动6个实例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a53124890177\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis-server redis_cluster/7000/redis.conf\r\nredis-server redis_cluster/7001/redis.conf \r\nredis-server redis_cluster/7002/redis.conf \r\nredis-server redis_cluster/7003/redis.conf \r\nredis-server redis_cluster/7004/redis.conf \r\nredis-server redis_cluster/7005/redis.conf </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a53124890177-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a53124890177-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a53124890177-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a53124890177-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a53124890177-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a53124890177-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a53124890177-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a53124890177-2\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a53124890177-3\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a53124890177-4\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a53124890177-5\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a53124890177-6\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">conf</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>启动成功后，看一下进程</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a57897916472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -ef | grep redis | grep cluster\r\nidata    15711 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7000 [cluster]\r\nidata    15740 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7001 [cluster]\r\nidata    15810 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7002 [cluster]\r\nidata    17023 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7003 [cluster]\r\nidata    17030 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7004 [cluster]\r\nidata    17035 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7005 [cluster]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a57897916472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a57897916472-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a57897916472-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a57897916472-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a57897916472-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a57897916472-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a57897916472-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a57897916472-1\"><span class=\"crayon-p\"># ps -ef | grep redis | grep cluster</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a57897916472-2\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15711</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a57897916472-3\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15740</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a57897916472-4\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15810</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a57897916472-5\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17023</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a57897916472-6\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17030</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a57897916472-7\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17035</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p>至此，ip=192.168.186.91机器上创建了6个实例，端口号为port=7000~7005。</p>\n<p> </p>\n<h3><strong>2、安装ruby</strong></h3>\n<p><strong>1）yum安装ruby和依赖的包。</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a5b512916418\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# yum -y install ruby ruby-devel rubygems rpm-build\r\n已加载插件：fastestmirror\r\n设置安装进程\r\nLoading mirror speeds from cached hostfile\r\n * base: mirrors.cn99.com\r\n * extras: mirrors.cn99.com\r\n * updates: mirrors.cn99.com\r\nbase                                                                                                                                                                                                                                                   | 3.7 kB     00:00     \r\nextras                                                                                                                                                                                                                                                 | 3.4 kB     00:00     \r\nmysql-connectors-community                                                                                                                                                                                                                             | 2.5 kB     00:00     \r\nmysql-tools-community                                                                                                                                                                                                                                  | 2.5 kB     00:00     \r\nmysql56-community                                                                                                                                                                                                                                      | 2.5 kB     00:00     \r\nupdates                                                                                                                                                                                                                                                | 3.4 kB     00:00     \r\n解决依赖关系\r\n--&gt; 执行事务检查\r\n---&gt; Package rpm-build.x86_64 0:4.8.0-55.el6 will be 安装\r\n--&gt; 处理依赖关系 patch &gt;= 2.5，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 elfutils &gt;= 0.128，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 xz，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 system-rpm-config，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 lzma，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 /usr/bin/gdb-add-index，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n---&gt; Package ruby.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-libs = 1.8.7.374-5.el6，它被软件包 ruby-1.8.7.374-5.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libruby.so.1.8()(64bit)，它被软件包 ruby-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package ruby-devel.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n---&gt; Package rubygems.noarch 0:1.3.7-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-rdoc，它被软件包 rubygems-1.3.7-5.el6.noarch 需要\r\n--&gt; 执行事务检查\r\n---&gt; Package elfutils.x86_64 0:0.164-2.el6 will be 安装\r\n--&gt; 处理依赖关系 elfutils-libs(x86-64) = 0.164-2.el6，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.158)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.149)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.148)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.138)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.130)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.127)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.126)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.122)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libasm.so.1(ELFUTILS_1.0)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1()(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libasm.so.1()(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n---&gt; Package gdb.x86_64 0:7.2-92.el6 will be 安装\r\n---&gt; Package patch.x86_64 0:2.6-6.el6 will be 安装\r\n---&gt; Package redhat-rpm-config.noarch 0:9.0.3-51.el6.centos will be 安装\r\n---&gt; Package ruby-libs.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 libreadline.so.5()(64bit)，它被软件包 ruby-libs-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package ruby-rdoc.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-irb = 1.8.7.374-5.el6，它被软件包 ruby-rdoc-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package xz.x86_64 0:4.999.9-0.5.beta.20091007git.el6 will be 安装\r\n---&gt; Package xz-lzma-compat.x86_64 0:4.999.9-0.5.beta.20091007git.el6 will be 安装\r\n--&gt; 执行事务检查\r\n---&gt; Package compat-readline5.x86_64 0:5.2-17.1.el6 will be 安装\r\n---&gt; Package elfutils-libs.x86_64 0:0.164-2.el6 will be 安装\r\n---&gt; Package ruby-irb.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 完成依赖关系计算\r\n\r\n依赖关系解决\r\n\r\n==============================================================================================================================================================================================================================================================================\r\n 软件包                                                              架构                                                     版本                                                                               仓库                                                    大小\r\n==============================================================================================================================================================================================================================================================================\r\n正在安装:\r\n rpm-build                                                           x86_64                                                   4.8.0-55.el6                                                                       base                                                   131 k\r\n ruby                                                                x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   538 k\r\n ruby-devel                                                          x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   318 k\r\n rubygems                                                            noarch                                                   1.3.7-5.el6                                                                        base                                                   207 k\r\n为依赖而安装:\r\n compat-readline5                                                    x86_64                                                   5.2-17.1.el6                                                                       base                                                   130 k\r\n elfutils                                                            x86_64                                                   0.164-2.el6                                                                        base                                                   240 k\r\n elfutils-libs                                                       x86_64                                                   0.164-2.el6                                                                        base                                                   230 k\r\n gdb                                                                 x86_64                                                   7.2-92.el6                                                                         base                                                   2.3 M\r\n patch                                                               x86_64                                                   2.6-6.el6                                                                          base                                                    90 k\r\n redhat-rpm-config                                                   noarch                                                   9.0.3-51.el6.centos                                                                base                                                    60 k\r\n ruby-irb                                                            x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   318 k\r\n ruby-libs                                                           x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   1.7 M\r\n ruby-rdoc                                                           x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   381 k\r\n xz                                                                  x86_64                                                   4.999.9-0.5.beta.20091007git.el6                                                   base                                                   137 k\r\n xz-lzma-compat                                                      x86_64                                                   4.999.9-0.5.beta.20091007git.el6                                                   base                                                    16 k\r\n\r\n事务概要\r\n==============================================================================================================================================================================================================================================================================\r\nInstall      15 Package(s)\r\n\r\n总下载量：6.7 M\r\nInstalled size: 20 M\r\n下载软件包：\r\n(1/15): compat-readline5-5.2-17.1.el6.x86_64.rpm                                                                                                                                                                                                       | 130 kB     00:00     \r\n(2/15): elfutils-0.164-2.el6.x86_64.rpm                                                                                                                                                                                                                | 240 kB     00:00     \r\n(3/15): elfutils-libs-0.164-2.el6.x86_64.rpm                                                                                                                                                                                                           | 230 kB     00:00     \r\n(4/15): gdb-7.2-92.el6.x86_64.rpm                                                                                                                                                                                                                      | 2.3 MB     00:00     \r\n(5/15): patch-2.6-6.el6.x86_64.rpm                                                                                                                                                                                                                     |  90 kB     00:00     \r\n(6/15): redhat-rpm-config-9.0.3-51.el6.centos.noarch.rpm                                                                                                                                                                                               |  60 kB     00:00     \r\n(7/15): rpm-build-4.8.0-55.el6.x86_64.rpm                                                                                                                                                                                                              | 131 kB     00:00     \r\n(8/15): ruby-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                                | 538 kB     00:00     \r\n(9/15): ruby-devel-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 318 kB     00:00     \r\n(10/15): ruby-irb-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                           | 318 kB     00:00     \r\n(11/15): ruby-libs-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 1.7 MB     00:00     \r\n(12/15): ruby-rdoc-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 381 kB     00:00     \r\n(13/15): rubygems-1.3.7-5.el6.noarch.rpm                                                                                                                                                                                                               | 207 kB     00:00     \r\n(14/15): xz-4.999.9-0.5.beta.20091007git.el6.x86_64.rpm                                                                                                                                                                                                | 137 kB     00:00     \r\n(15/15): xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64.rpm                                                                                                                                                                                    |  16 kB     00:00     \r\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n总计                                                                                                                                                                                                                                          4.6 MB/s | 6.7 MB     00:01     \r\n运行 rpm_check_debug \r\n执行事务测试\r\n事务测试成功\r\n执行事务\r\n  正在安装   : xz-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                                1/15 \r\n  正在安装   : xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                    2/15 \r\n  正在安装   : elfutils-libs-0.164-2.el6.x86_64                                                                                                                                                                                                                          3/15 \r\n  正在安装   : elfutils-0.164-2.el6.x86_64                                                                                                                                                                                                                               4/15 \r\n  正在安装   : redhat-rpm-config-9.0.3-51.el6.centos.noarch                                                                                                                                                                                                              5/15 \r\n  正在安装   : patch-2.6-6.el6.x86_64                                                                                                                                                                                                                                    6/15 \r\n  正在安装   : compat-readline5-5.2-17.1.el6.x86_64                                                                                                                                                                                                                      7/15 \r\n  正在安装   : ruby-libs-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          8/15 \r\n  正在安装   : ruby-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                               9/15 \r\n  正在安装   : ruby-irb-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          10/15 \r\n  正在安装   : ruby-rdoc-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                         11/15 \r\n  正在安装   : gdb-7.2-92.el6.x86_64                                                                                                                                                                                                                                    12/15 \r\n  正在安装   : rpm-build-4.8.0-55.el6.x86_64                                                                                                                                                                                                                            13/15 \r\n  正在安装   : rubygems-1.3.7-5.el6.noarch                                                                                                                                                                                                                              14/15 \r\n  正在安装   : ruby-devel-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                        15/15 \r\n  Verifying  : gdb-7.2-92.el6.x86_64                                                                                                                                                                                                                                     1/15 \r\n  Verifying  : compat-readline5-5.2-17.1.el6.x86_64                                                                                                                                                                                                                      2/15 \r\n  Verifying  : ruby-rdoc-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          3/15 \r\n  Verifying  : xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                    4/15 \r\n  Verifying  : patch-2.6-6.el6.x86_64                                                                                                                                                                                                                                    5/15 \r\n  Verifying  : redhat-rpm-config-9.0.3-51.el6.centos.noarch                                                                                                                                                                                                              6/15 \r\n  Verifying  : ruby-irb-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                           7/15 \r\n  Verifying  : ruby-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                               8/15 \r\n  Verifying  : rpm-build-4.8.0-55.el6.x86_64                                                                                                                                                                                                                             9/15 \r\n  Verifying  : elfutils-libs-0.164-2.el6.x86_64                                                                                                                                                                                                                         10/15 \r\n  Verifying  : rubygems-1.3.7-5.el6.noarch                                                                                                                                                                                                                              11/15 \r\n  Verifying  : xz-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                               12/15 \r\n  Verifying  : elfutils-0.164-2.el6.x86_64                                                                                                                                                                                                                              13/15 \r\n  Verifying  : ruby-devel-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                        14/15 \r\n  Verifying  : ruby-libs-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                         15/15 \r\n\r\n已安装:\r\n  rpm-build.x86_64 0:4.8.0-55.el6                                    ruby.x86_64 0:1.8.7.374-5.el6                                    ruby-devel.x86_64 0:1.8.7.374-5.el6                                    rubygems.noarch 0:1.3.7-5.el6                                   \r\n\r\n作为依赖被安装:\r\n  compat-readline5.x86_64 0:5.2-17.1.el6  elfutils.x86_64 0:0.164-2.el6       elfutils-libs.x86_64 0:0.164-2.el6  gdb.x86_64 0:7.2-92.el6                       patch.x86_64 0:2.6-6.el6                                  redhat-rpm-config.noarch 0:9.0.3-51.el6.centos \r\n  ruby-irb.x86_64 0:1.8.7.374-5.el6       ruby-libs.x86_64 0:1.8.7.374-5.el6  ruby-rdoc.x86_64 0:1.8.7.374-5.el6  xz.x86_64 0:4.999.9-0.5.beta.20091007git.el6  xz-lzma-compat.x86_64 0:4.999.9-0.5.beta.20091007git.el6 \r\n\r\n完毕！\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a5b512916418-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a5b512916418-148\">148</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># yum -y install ruby ruby-devel rubygems rpm-build</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-2\">已加载插件：<span class=\"crayon-i\">fastestmirror</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-3\">设置安装进程</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-4\"><span class=\"crayon-e\">Loading </span><span class=\"crayon-e\">mirror </span><span class=\"crayon-e\">speeds </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">cached </span><span class=\"crayon-e \">hostfile</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-5\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">base</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-6\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extras</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-7\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">updates</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-8\"><span class=\"crayon-v\">base</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-9\"><span class=\"crayon-v\">extras</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                 </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-10\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">connectors</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                             </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-11\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tools</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                                  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-12\"><span class=\"crayon-v\">mysql56</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                                      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-13\"><span class=\"crayon-v\">updates</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-14\">解决依赖关系</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-15\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-16\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-17\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.128</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-19\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-i\">xz</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-20\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">config</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-21\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-i\">lzma</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-22\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">add</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">index</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-23\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-24\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-25\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-26\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-27\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-28\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">rdoc</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-29\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-30\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-31\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-32\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">158</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-33\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">149</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-34\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">148</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-35\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">138</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-36\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">130</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-37\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">127</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-38\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">126</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-39\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">122</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-40\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libasm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-41\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-42\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libasm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-43\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-44\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-45\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-46\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-47\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libreadline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-48\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-49\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-50\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-51\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-52\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-53\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-54\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-55\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-56\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>完成依赖关系计算</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-58\">依赖关系解决</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-59\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-60\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-61\"><span class=\"crayon-h\"> </span>软件包<span class=\"crayon-h\">                                                              </span>架构<span class=\"crayon-h\">                                                     </span>版本<span class=\"crayon-h\">                                                                               </span>仓库<span class=\"crayon-h\">                                                    </span>大小</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-62\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-63\">正在安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-64\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">build                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\">                                                                       </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">131</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-65\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ruby                                                                </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">538</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-66\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">devel                                                          </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-67\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rubygems                                                            </span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">207</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-68\">为依赖而安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-69\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">readline5                                                    </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\">                                                                       </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">130</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-70\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">elfutils                                                            </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">240</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-71\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs                                                       </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">230</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-72\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gdb                                                                 </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\">                                                                         </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-73\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patch                                                               </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\">                                                                          </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-74\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">config                                                   </span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\">                                                                </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-75\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">irb                                                            </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-76\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-77\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rdoc                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">381</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-78\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xz                                                                  </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">137</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-79\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">compat                                                      </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-80\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-81\">事务概要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-82\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-83\"><span class=\"crayon-i\">Install</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-84\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-85\">总下载量：<span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-86\"><span class=\"crayon-e\">Installed </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-87\">下载软件包：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-88\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                       </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">130</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-89\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">240</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-90\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                           </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">230</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-91\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-92\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-93\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                               </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-94\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">131</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-95\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">538</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-96\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-97\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                           </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-98\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-99\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">381</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-100\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                               </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">207</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-101\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">137</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-102\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-103\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-104\">总计<span class=\"crayon-h\">                                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">4.6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MB</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-105\">运行<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm_check</span><span class=\"crayon-sy\">_</span>debug<span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-106\">执行事务测试</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-107\">事务测试成功</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-108\">执行事务</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-109\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-110\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-111\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-112\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-113\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-114\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-115\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-116\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-117\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-118\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-119\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-120\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-121\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                            </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-122\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-123\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-124\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-125\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-126\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-127\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-128\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-129\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-130\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                           </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-131\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-132\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                             </span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-133\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-134\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-135\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                               </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-136\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-137\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                        </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-138\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-139\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-140\">已安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-141\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-142\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-143\">作为依赖被安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-144\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\">                       </span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-145\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">xz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-146\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a5b512916418-147\">完毕！</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a5b512916418-148\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0613 seconds] -->\r\n<p><strong>2）使用gem这个命令来安装redis接口</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a70720830741\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# gem install redis\r\nERROR:  Error installing redis:\r\n\tredis requires Ruby version &gt;= 2.2.2.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a70720830741-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a70720830741-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a70720830741-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a70720830741-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a70720830741-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gem install redis</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a70720830741-2\"><span class=\"crayon-v\">ERROR</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Error </span><span class=\"crayon-e\">installing </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a70720830741-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">redis </span><span class=\"crayon-e\">requires </span><span class=\"crayon-e\">Ruby </span><span class=\"crayon-v\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.2.2.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a70720830741-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>这一步骤中出现了bug,度娘告诉我是Ruby版本太低，需要升级版本。</p>\n<p><strong>3）升级Ruby的版本</strong></p>\n<p>安装rvm，我不知道这是个什么东西，但是感觉像是Ruby的一个包管理器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a84298519085\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# curl -L get.rvm.io | bash -s stable\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 24090  100 24090    0     0  10919      0  0:00:02  0:00:02 --:--:-- 91242\r\nDownloading https://github.com/rvm/rvm/archive/1.29.3.tar.gz\r\nDownloading https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc\r\ngpg: 于 2017年09月11日 星期一 04时59分21秒 CST 创建的签名，使用 RSA，钥匙号 BF04FF17\r\ngpg: 无法检查签名：No public key\r\nWarning, RVM 1.26.0 introduces signed releases and automated check of signatures when GPG software found. Assuming you trust Michal Papis import the mpapis public key (downloading the signatures).\r\n\r\nGPG signature verification failed for '/usr/local/rvm/archives/rvm-1.29.3.tgz' - 'https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc'! Try to install GPG v2 and then fetch the public key:\r\n\r\n    gpg2 --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\r\n\r\nor if it fails:\r\n\r\n    command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -\r\n\r\nthe key can be compared with:\r\n\r\n    https://rvm.io/mpapis.asc\r\n    https://keybase.io/mpapis\r\n\r\nNOTE: GPG version 2.1.17 have a bug which cause failures during fetching keys from remote server. Please downgrade or upgrade to newer version (if available) or use the second method described above.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a84298519085-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a84298519085-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># curl -L get.rvm.io | bash -s stable</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Received</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Xferd  </span><span class=\"crayon-e\">Average </span><span class=\"crayon-e\">Speed   </span><span class=\"crayon-e\">Time    </span><span class=\"crayon-e\">Time     </span><span class=\"crayon-e\">Time  </span><span class=\"crayon-e\">Current</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-3\"><span class=\"crayon-e\">                                 </span><span class=\"crayon-e\">Dload  </span><span class=\"crayon-e\">Upload   </span><span class=\"crayon-e\">Total   </span><span class=\"crayon-e\">Spent    </span><span class=\"crayon-e\">Left  </span><span class=\"crayon-i\">Speed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-4\"><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24090</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24090</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10919</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">91242</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-5\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/archive/1.29.3.tar.gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-6\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-7\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>于<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span>年<span class=\"crayon-cn\">09</span>月<span class=\"crayon-cn\">11</span>日<span class=\"crayon-h\"> </span>星期一<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span>时<span class=\"crayon-cn\">59</span>分<span class=\"crayon-cn\">21</span>秒<span class=\"crayon-h\"> </span><span class=\"crayon-i\">CST</span><span class=\"crayon-h\"> </span>创建的签名，使用<span class=\"crayon-h\"> </span><span class=\"crayon-i\">RSA</span>，钥匙号<span class=\"crayon-h\"> </span><span class=\"crayon-e\">BF04FF17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-8\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>无法检查签名：<span class=\"crayon-e\">No </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-9\"><span class=\"crayon-v\">Warning</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">RVM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.26.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">introduces </span><span class=\"crayon-t\">signed</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">releases </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">automated </span><span class=\"crayon-e\">check </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">signatures </span><span class=\"crayon-e\">when </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">software </span><span class=\"crayon-v\">found</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Assuming </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">trust </span><span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">mpapis </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">downloading </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">signatures</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-10\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-11\"><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">signature </span><span class=\"crayon-e\">verification </span><span class=\"crayon-e\">failed </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/local/rvm/archives/rvm-1.29.3.tgz'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc'</span><span class=\"crayon-o\">!</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">Try</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">v2 </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fetch </span><span class=\"crayon-e\">the </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-12\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">gpg2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">keys</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">409B6B1796C275462A1703113804BB82D39DC0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-14\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-15\"><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">it </span><span class=\"crayon-v\">fails</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-16\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">command </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sSL </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm.io/mpapis.asc | gpg2 --import -</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-18\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-19\"><span class=\"crayon-e\">the </span><span class=\"crayon-e\">key </span><span class=\"crayon-e\">can </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">compared </span><span class=\"crayon-v\">with</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-20\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm.io/mpapis.asc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//keybase.io/mpapis</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a84298519085-24\"><span class=\"crayon-v\">NOTE</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.1.17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">have</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bug </span><span class=\"crayon-e\">which </span><span class=\"crayon-e\">cause </span><span class=\"crayon-e\">failures </span><span class=\"crayon-e\">during </span><span class=\"crayon-e\">fetching </span><span class=\"crayon-e\">keys </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">remote </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Please </span><span class=\"crayon-e\">downgrade </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">upgrade </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">newer </span><span class=\"crayon-e\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">available</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">second </span><span class=\"crayon-e\">method </span><span class=\"crayon-e\">described </span><span class=\"crayon-v\">above</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a84298519085-25\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0054 seconds] -->\r\n<p>这一操作得到了：</p>\n<p>gpg2 –recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</p>\n<p>然后利用该密钥下载Ruby并升级。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a89122255901\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\r\ngpg: 下载密钥‘D39DC0E3’，从 hkp 服务器 keys.gnupg.net\r\ngpg: /root/.gnupg/trustdb.gpg：建立了信任度数据库\r\ngpg: 密钥 D39DC0E3：公钥“Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;”已导入\r\ngpg: 没有找到任何绝对信任的密钥\r\ngpg: 合计被处理的数量：1\r\ngpg:           已导入：1  (RSA: 1)\r\n[root@itfirst redis_cluster]# curl -sSL https://get.rvm.io | bash -s stable\r\nDownloading https://github.com/rvm/rvm/archive/1.29.3.tar.gz\r\nDownloading https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc\r\ngpg: 于 2017年09月11日 星期一 04时59分21秒 CST 创建的签名，使用 RSA，钥匙号 BF04FF17\r\ngpg: 完好的签名，来自于“Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;”\r\ngpg:               亦即“Michal Papis &lt;mpapis@gmail.com&gt;”\r\ngpg:               亦即“[jpeg image of size 5015]”\r\ngpg: 警告：这把密钥未经受信任的签名认证！\r\ngpg:       没有证据表明这个签名属于它所声称的持有者。\r\n主钥指纹： 409B 6B17 96C2 7546 2A17  0311 3804 BB82 D39D C0E3\r\n子钥指纹： 62C9 E5F4 DA30 0D94 AC36  166B E206 C29F BF04 FF17\r\nGPG verified '/usr/local/rvm/archives/rvm-1.29.3.tgz'\r\nCreating group 'rvm'\r\n\r\nInstalling RVM to /usr/local/rvm/\r\nInstallation of RVM in /usr/local/rvm/ is almost complete:\r\n\r\n  * First you need to add all users that will be using rvm to 'rvm' group,\r\n    and logout - login again, anyone using rvm will be operating with `umask u=rwx,g=rwx,o=rx`.\r\n\r\n  * To start using RVM you need to run `source /etc/profile.d/rvm.sh`\r\n    in all your open shell windows, in rare cases you need to reopen all shell windows.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a89122255901-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a89122255901-30\">30</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-2\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>下载密钥‘<span class=\"crayon-i\">D39DC0E3</span>’，从<span class=\"crayon-h\"> </span><span class=\"crayon-i\">hkp</span><span class=\"crayon-h\"> </span>服务器<span class=\"crayon-h\"> </span><span class=\"crayon-v\">keys</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gnupg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">net</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-3\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gnupg</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">trustdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">gpg</span>：建立了信任度数据库</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-4\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>密钥<span class=\"crayon-h\"> </span><span class=\"crayon-i\">D39DC0E3</span>：公钥“<span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">RVM </span><span class=\"crayon-v\">signing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”已导入</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-5\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>没有找到任何绝对信任的密钥</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-6\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>合计被处理的数量：<span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-7\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">           </span>已导入：<span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RSA</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># curl -sSL https://get.rvm.io | bash -s stable</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-9\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/archive/1.29.3.tar.gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-10\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-11\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>于<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span>年<span class=\"crayon-cn\">09</span>月<span class=\"crayon-cn\">11</span>日<span class=\"crayon-h\"> </span>星期一<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span>时<span class=\"crayon-cn\">59</span>分<span class=\"crayon-cn\">21</span>秒<span class=\"crayon-h\"> </span><span class=\"crayon-i\">CST</span><span class=\"crayon-h\"> </span>创建的签名，使用<span class=\"crayon-h\"> </span><span class=\"crayon-i\">RSA</span>，钥匙号<span class=\"crayon-h\"> </span><span class=\"crayon-e\">BF04FF17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-12\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>完好的签名，来自于“<span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">RVM </span><span class=\"crayon-v\">signing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-13\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">               </span>亦即“<span class=\"crayon-e\">Michal </span><span class=\"crayon-v\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-14\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">               </span>亦即“<span class=\"crayon-sy\">[</span><span class=\"crayon-e\">jpeg </span><span class=\"crayon-e\">image </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5015</span><span class=\"crayon-sy\">]</span>”</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-15\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>警告：这把密钥未经受信任的签名认证！</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-16\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span>没有证据表明这个签名属于它所声称的持有者。</div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-17\">主钥指纹：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">409B</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6B17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96C2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7546</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2A17</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0311</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3804</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BB82 </span><span class=\"crayon-e\">D39D </span><span class=\"crayon-i\">C0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-18\">子钥指纹：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">62C9</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E5F4 </span><span class=\"crayon-i\">DA30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0D94</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">AC36</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">166B</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E206 </span><span class=\"crayon-e\">C29F </span><span class=\"crayon-e\">BF04 </span><span class=\"crayon-e\">FF17</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-19\"><span class=\"crayon-e\">GPG </span><span class=\"crayon-i\">verified</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/local/rvm/archives/rvm-1.29.3.tgz'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-20\"><span class=\"crayon-e\">Creating </span><span class=\"crayon-i\">group</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rvm'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-22\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-23\"><span class=\"crayon-e\">Installation </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">almost </span><span class=\"crayon-v\">complete</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-24\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">First </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">users </span><span class=\"crayon-e\">that </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">rvm </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rvm'</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">group</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">login </span><span class=\"crayon-v\">again</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">anyone </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">rvm </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">operating </span><span class=\"crayon-i\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">umask</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rx</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-28\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">To</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">start </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">run</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a89122255901-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">open </span><span class=\"crayon-e\">shell </span><span class=\"crayon-v\">windows</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rare </span><span class=\"crayon-e\">cases </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reopen </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">shell </span><span class=\"crayon-v\">windows</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a89122255901-30\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0080 seconds] -->\r\n<p>接着，source环境，让rvm可用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a8d893865178\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# source /usr/local/rvm/scripts/rvm</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a8d893865178-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a8d893865178-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># source /usr/local/rvm/scripts/rvm</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>查看Ruby可用版本</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a93073189106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm list known\r\n# MRI Rubies\r\n[ruby-]1.8.6[-p420]\r\n[ruby-]1.8.7[-head] # security released on head\r\n[ruby-]1.9.1[-p431]\r\n[ruby-]1.9.2[-p330]\r\n[ruby-]1.9.3[-p551]\r\n[ruby-]2.0.0[-p648]\r\n[ruby-]2.1[.10]\r\n[ruby-]2.2[.7]\r\n[ruby-]2.3[.4]\r\n[ruby-]2.4[.1]\r\nruby-head\r\n\r\n# for forks use: rvm install ruby-head-&lt;name&gt; --url https://github.com/github/ruby.git --branch 2.2\r\n\r\n# JRuby\r\njruby-1.6[.8]\r\njruby-1.7[.27]\r\njruby[-9.1.13.0]\r\njruby-head\r\n\r\n# Rubinius\r\nrbx-1[.4.3]\r\nrbx-2.3[.0]\r\nrbx-2.4[.1]\r\nrbx-2[.5.8]\r\nrbx-3[.84]\r\nrbx-head\r\n\r\n# Opal\r\nopal\r\n\r\n# Minimalistic ruby implementation - ISO 30170:2012\r\nmruby-1.0.0\r\nmruby-1.1.0\r\nmruby-1.2.0\r\nmruby-1[.3.0]\r\nmruby[-head]\r\n\r\n# Ruby Enterprise Edition\r\nree-1.8.6\r\nree[-1.8.7][-2012.02]\r\n\r\n# Topaz\r\ntopaz\r\n\r\n# MagLev\r\nmaglev[-head]\r\nmaglev-1.0.0\r\n\r\n# Mac OS X Snow Leopard Or Newer\r\nmacruby-0.10\r\nmacruby-0.11\r\nmacruby[-0.12]\r\nmacruby-nightly\r\nmacruby-head\r\n\r\n# IronRuby\r\nironruby[-1.1.3]\r\nironruby-head\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a93073189106-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a93073189106-62\">62</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm list known</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-2\"><span class=\"crayon-p\"># MRI Rubies</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.8.6</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p420</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># security released on head</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p431</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p330</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-7\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p551</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.0.0</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p648</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-10\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-11\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-12\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-13\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-14\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-15\"><span class=\"crayon-p\"># for forks use: rvm install ruby-head-&lt;name&gt; --url https://github.com/github/ruby.git --branch 2.2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-16\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-17\"><span class=\"crayon-p\"># JRuby</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-18\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.6</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-19\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-20\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.1.13.0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-21\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-22\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-23\"><span class=\"crayon-p\"># Rubinius</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-24\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">4.3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-25\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-26\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-27\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">5.8</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-28\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">84</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-29\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-30\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-31\"><span class=\"crayon-p\"># Opal</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-32\"><span class=\"crayon-v\">opal</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-34\"><span class=\"crayon-p\"># Minimalistic ruby implementation - ISO 30170:2012</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-35\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-36\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.1.0</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-37\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.2.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-38\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-39\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-40\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-41\"><span class=\"crayon-p\"># Ruby Enterprise Edition</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-42\"><span class=\"crayon-v\">ree</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.6</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-43\"><span class=\"crayon-v\">ree</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2012.02</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-44\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-45\"><span class=\"crayon-p\"># Topaz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-46\"><span class=\"crayon-v\">topaz</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-48\"><span class=\"crayon-p\"># MagLev</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-49\"><span class=\"crayon-v\">maglev</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-50\"><span class=\"crayon-v\">maglev</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0.0</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-52\"><span class=\"crayon-p\"># Mac OS X Snow Leopard Or Newer</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-53\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-54\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.11</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-55\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-56\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">nightly</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-57\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-58\"> </div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-59\"><span class=\"crayon-p\"># IronRuby</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-60\"><span class=\"crayon-v\">ironruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.1.3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a93073189106-61\"><span class=\"crayon-v\">ironruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a93073189106-62\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>可以看到最新的版本是2.4.1，本文安装2.3.0</p>\n<p>至此，我们升级了Ruby的版本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a9a693654187\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm install 2.3.0\r\nSearching for binary rubies, this might take some time.\r\nFound remote file https://rvm_io.global.ssl.fastly.net/binaries/centos/6/x86_64/ruby-2.3.0.tar.bz2\r\nChecking requirements for centos.\r\nInstalling requirements for centos.\r\nInstalling required packages: autoconf, automake, bison, libffi-devel, libtool, readline-devel, sqlite-devel, libyaml-devel..........\r\nRequirements installation successful.\r\nruby-2.3.0 - #configure\r\nruby-2.3.0 - #download\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 21.9M  100 21.9M    0     0   266k      0  0:01:24  0:01:24 --:--:--  278k\r\nNo checksum for downloaded archive, recording checksum in user configuration.\r\nruby-2.3.0 - #validate archive\r\nruby-2.3.0 - #extract\r\nruby-2.3.0 - #validate binary\r\nruby-2.3.0 - #setup\r\nruby-2.3.0 - #gemset created /usr/local/rvm/gems/ruby-2.3.0@global\r\nruby-2.3.0 - #importing gemset /usr/local/rvm/gemsets/global.gems..............................\r\nruby-2.3.0 - #generating global wrappers........\r\nruby-2.3.0 - #gemset created /usr/local/rvm/gems/ruby-2.3.0\r\nruby-2.3.0 - #importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list\r\nruby-2.3.0 - #generating default wrappers........\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9a693654187-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9a693654187-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm install 2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-2\"><span class=\"crayon-e\">Searching </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">binary </span><span class=\"crayon-v\">rubies</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">might </span><span class=\"crayon-e\">take </span><span class=\"crayon-e\">some </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-3\"><span class=\"crayon-e\">Found </span><span class=\"crayon-e\">remote </span><span class=\"crayon-e\">file </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm_io.global.ssl.fastly.net/binaries/centos/6/x86_64/ruby-2.3.0.tar.bz2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-4\"><span class=\"crayon-e\">Checking </span><span class=\"crayon-e\">requirements </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-5\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">requirements </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-6\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">required </span><span class=\"crayon-v\">packages</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">autoconf</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">automake</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bison</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libffi</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libtool</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readline</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sqlite</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libyaml</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-7\"><span class=\"crayon-e\">Requirements </span><span class=\"crayon-e\">installation </span><span class=\"crayon-v\">successful</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-8\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#configure</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-9\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#download</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Received</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Xferd  </span><span class=\"crayon-e\">Average </span><span class=\"crayon-e\">Speed   </span><span class=\"crayon-e\">Time    </span><span class=\"crayon-e\">Time     </span><span class=\"crayon-e\">Time  </span><span class=\"crayon-e\">Current</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-11\"><span class=\"crayon-e\">                                 </span><span class=\"crayon-e\">Dload  </span><span class=\"crayon-e\">Upload   </span><span class=\"crayon-e\">Total   </span><span class=\"crayon-e\">Spent    </span><span class=\"crayon-e\">Left  </span><span class=\"crayon-i\">Speed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-12\"><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.9M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.9M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">266k</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">278k</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-13\"><span class=\"crayon-e\">No </span><span class=\"crayon-e\">checksum </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">downloaded </span><span class=\"crayon-v\">archive</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recording </span><span class=\"crayon-e\">checksum </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-14\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#validate archive</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-15\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#extract</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-16\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#validate binary</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-17\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#setup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-18\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#gemset created /usr/local/rvm/gems/ruby-2.3.0@global</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-19\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#importing gemset /usr/local/rvm/gemsets/global.gems..............................</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-20\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#generating global wrappers........</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-21\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#gemset created /usr/local/rvm/gems/ruby-2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-22\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9a693654187-23\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#generating default wrappers........</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9a693654187-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p><strong>4）安装gem redis接口</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338a9e766214705\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm use 2.3.0\r\nUsing /usr/local/rvm/gems/ruby-2.3.0\r\n[root@itfirst ~]# rvm remove 1.8.7\r\nruby-1.8.7-head - #already gone\r\nUsing /usr/local/rvm/gems/ruby-2.3.0\r\n[root@itfirst ~]#  ruby --version\r\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\r\n[root@itfirst ~]# gem install redis\r\nFetching: redis-4.0.1.gem (100%)\r\nSuccessfully installed redis-4.0.1\r\nParsing documentation for redis-4.0.1\r\nInstalling ri documentation for redis-4.0.1\r\nDone installing documentation for redis after 0 seconds\r\n1 gem installed\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338a9e766214705-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338a9e766214705-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm use 2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-2\"><span class=\"crayon-v\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm remove 1.8.7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-4\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#already gone</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-5\"><span class=\"crayon-v\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\">#  ruby --version</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-7\"><span class=\"crayon-i\">ruby</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.3.0p0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2015</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">revision</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53290</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x86_64</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gem install redis</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-9\"><span class=\"crayon-v\">Fetching</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1.gem</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-10\"><span class=\"crayon-e\">Successfully </span><span class=\"crayon-e\">installed </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-11\"><span class=\"crayon-e\">Parsing </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-12\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">ri </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-13\"><span class=\"crayon-e\">Done </span><span class=\"crayon-e\">installing </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">redis </span><span class=\"crayon-i\">after</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">seconds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338a9e766214705-14\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gem </span><span class=\"crayon-i\">installed</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338a9e766214705-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><strong>5）安装rubygems</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338aa1207744178\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# yum install -y rubygems\r\nLoaded plugins: fastestmirror, security\r\nSetting up Install Process\r\nLoading mirror speeds from cached hostfile\r\nbase                                                                                                                                                   | 3.7 kB     00:00     \r\ndidi_jenkins_enable                                                                                                                                    | 1.5 kB     00:00     \r\ndidi_op_toa_enable                                                                                                                                     | 1.5 kB     00:00     \r\ndidi_txjenkins_enable                                                                                                                                  | 1.5 kB     00:00     \r\ndidi_update                                                                                                                                            | 1.5 kB     00:00     \r\nepel                                                                                                                                                   | 4.3 kB     00:00     \r\nextras                                                                                                                                                 | 3.4 kB     00:00     \r\ntmprepo                                                                                                                                                | 1.5 kB     00:00     \r\nupdates                                                                                                                                                | 3.4 kB     00:00     \r\nPackage rubygems-1.3.7-5.el6.noarch already installed and latest version\r\nNothing to do</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aa1207744178-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa1207744178-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-1\"><span class=\"crayon-p\"># yum install -y rubygems</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-2\"><span class=\"crayon-e\">Loaded </span><span class=\"crayon-v\">plugins</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fastestmirror</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">security</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-3\"><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-e\">Install </span><span class=\"crayon-e\">Process</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-4\"><span class=\"crayon-e\">Loading </span><span class=\"crayon-e\">mirror </span><span class=\"crayon-e\">speeds </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">cached </span><span class=\"crayon-e\">hostfile</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-5\"><span class=\"crayon-v\">base</span><span class=\"crayon-h\">                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-6\"><span class=\"crayon-v\">didi_jenkins_enable</span><span class=\"crayon-h\">                                                                                                                                    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-7\"><span class=\"crayon-v\">didi_op_toa_enable</span><span class=\"crayon-h\">                                                                                                                                     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-8\"><span class=\"crayon-v\">didi_txjenkins_enable</span><span class=\"crayon-h\">                                                                                                                                  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-9\"><span class=\"crayon-v\">didi_update</span><span class=\"crayon-h\">                                                                                                                                            </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-10\"><span class=\"crayon-v\">epel</span><span class=\"crayon-h\">                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-11\"><span class=\"crayon-v\">extras</span><span class=\"crayon-h\">                                                                                                                                                 </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-12\"><span class=\"crayon-v\">tmprepo</span><span class=\"crayon-h\">                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-13\"><span class=\"crayon-v\">updates</span><span class=\"crayon-h\">                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aa1207744178-14\"><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">already </span><span class=\"crayon-e\">installed </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">latest </span><span class=\"crayon-e\">version</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa1207744178-15\"><span class=\"crayon-e\">Nothing </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p>到目前为止，我们的Ruby和运行redis-trib.rb需要的环境安装完成了。</p>\n<p> </p>\n<h3>3、Redis集群搭建</h3>\n<p>有了Ruby执行环境，可以开始将之前的6个实例组建成集群了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338aa8544700292\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aa8544700292-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aa8544700292-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rb  </span><span class=\"crayon-v\">create</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">replicas</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>有三个master，有三个是slave。 后面跟上6个实例就好了，形式就是ip:port</p>\n<p>【此处有坑】</p>\n<p>第一坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338aab950866286\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n-bash: redis-trib.rb: command not found\r\n[root@itfirst src]# cp redis-trib.rb /usr/local/bin\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aab950866286-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aab950866286-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aab950866286-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aab950866286-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aab950866286-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aab950866286-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">found</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aab950866286-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># cp redis-trib.rb /usr/local/bin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aab950866286-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>需要将redis-trib.rb复制到/usr/local/bin目录下。</p>\n<p>第二坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338aaf785409775\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst bin]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n[ERR] Node 192.168.186.91:7000 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aaf785409775-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aaf785409775-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338aaf785409775-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338aaf785409775-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aaf785409775-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">bin</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aaf785409775-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-i\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338aaf785409775-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ERR</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Either </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">node </span><span class=\"crayon-e\">already </span><span class=\"crayon-e\">knows </span><span class=\"crayon-e\">other </span><span class=\"crayon-e\">nodes</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">check </span><span class=\"crayon-e\">with </span><span class=\"crayon-e\">CLUSTER </span><span class=\"crayon-v\">NODES</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">contains </span><span class=\"crayon-e\">some </span><span class=\"crayon-e\">key </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">database</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338aaf785409775-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>踩完第一坑后，继续执行，发现了第二坑，还好有度娘，但是网上各种说法都有（主要参照了《<a href=\"http://blog.csdn.net/u014756827/article/details/52061987\" rel=\"nofollow\">极客on之路</a>》的博客），发现错误的原因是redis数据库没有清除。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338ab2644824468\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7001\r\n192.168.186.91:7001&gt; flushdb\r\nOK\r\n192.168.186.91:7001&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7002\r\n192.168.186.91:7002&gt; flushdb\r\nOK\r\n192.168.186.91:7002&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7003\r\n192.168.186.91:7003&gt; flushdb\r\nOK\r\n192.168.186.91:7003&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7004\r\n192.168.186.91:7004&gt; flushdb\r\nOK\r\n192.168.186.91:7004&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7005\r\n192.168.186.91:7005&gt; flushdb\r\nOK\r\n192.168.186.91:7005&gt; quit\r\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 61b2b608177374fd0382c872f996a2c25f62daac 192.168.186.91:7000\r\n   slots:0-5460,9189 (5462 slots) master\r\nM: 50e678c98c31baa4ece1cba096cc34b4545456f3 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: b8dc855a92d1c9a6e358380286a757011c40601d 192.168.186.91:7002\r\n   slots:9189,10923-16383 (5462 slots) master\r\nS: 42392d8b4665500b3229b5c5b9dcebed311c9cdf 192.168.186.91:7003\r\n   replicates 61b2b608177374fd0382c872f996a2c25f62daac\r\nS: 4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8 192.168.186.91:7004\r\n   replicates 50e678c98c31baa4ece1cba096cc34b4545456f3\r\nS: 3344981c3290c39b0d9f427842398c17de835293 192.168.186.91:7005\r\n   replicates b8dc855a92d1c9a6e358380286a757011c40601d\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n/usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis/client.rb:119:in `call': ERR Slot 9189 is already busy (Redis::CommandError)\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `block in synchronize'\r\n\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'\r\n\tfrom /usr/local/bin/redis-trib.rb:212:in `flush_node_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `each'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:1296:in `create_cluster_cmd'\r\n\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab2644824468-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab2644824468-56\">56</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-2\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-3\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-4\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-7\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-8\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-10\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-11\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-12\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-13\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-14\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-15\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-16\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-17\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-18\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-19\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-20\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-21\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-22\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-23\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-24\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-25\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-26\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-27\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-28\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-29\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-30\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-31\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-32\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-33\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-34\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-35\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b8dc855a92d1c9a6e358380286a757011c40601d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-36\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-37\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">42392d8b4665500b3229b5c5b9dcebed311c9cdf</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-38\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-39\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-40\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-41\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3344981c3290c39b0d9f427842398c17de835293</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-42\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">replicates </span><span class=\"crayon-e\">b8dc855a92d1c9a6e358380286a757011c40601d</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-43\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-44\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">119</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">call</span><span class=\"crayon-s\">': ERR Slot 9189 is already busy (Redis::CommandError)</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-45\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-46\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">block </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-47\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-48\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-49\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-50\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">212</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">flush_node</span><span class=\"crayon-sy\">_</span>config<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-51\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-52\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">775</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-st\">each</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-53\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-54\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1296</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">create_cluster</span><span class=\"crayon-sy\">_</span>cmd<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab2644824468-55\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab2644824468-56\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0101 seconds] -->\r\n<p>第三坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338ab8136586619\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 61b2b608177374fd0382c872f996a2c25f62daac 192.168.186.91:7000\r\n   slots:0-5460,9189 (5462 slots) master\r\nM: 50e678c98c31baa4ece1cba096cc34b4545456f3 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: b8dc855a92d1c9a6e358380286a757011c40601d 192.168.186.91:7002\r\n   slots:9189,10923-16383 (5462 slots) master\r\nS: 42392d8b4665500b3229b5c5b9dcebed311c9cdf 192.168.186.91:7003\r\n   replicates 61b2b608177374fd0382c872f996a2c25f62daac\r\nS: 4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8 192.168.186.91:7004\r\n   replicates 50e678c98c31baa4ece1cba096cc34b4545456f3\r\nS: 3344981c3290c39b0d9f427842398c17de835293 192.168.186.91:7005\r\n   replicates b8dc855a92d1c9a6e358380286a757011c40601d\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n/usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis/client.rb:119:in `call': ERR Slot 9189 is already busy (Redis::CommandError)\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `block in synchronize'\r\n\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'\r\n\tfrom /usr/local/bin/redis-trib.rb:212:in `flush_node_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `each'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:1296:in `create_cluster_cmd'\r\n\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ab8136586619-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ab8136586619-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-4\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-5\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-7\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-8\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-9\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-10\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-11\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-13\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-15\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b8dc855a92d1c9a6e358380286a757011c40601d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-17\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">42392d8b4665500b3229b5c5b9dcebed311c9cdf</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-18\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-19\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-21\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3344981c3290c39b0d9f427842398c17de835293</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-22\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">replicates </span><span class=\"crayon-e\">b8dc855a92d1c9a6e358380286a757011c40601d</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-23\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-24\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">119</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">call</span><span class=\"crayon-s\">': ERR Slot 9189 is already busy (Redis::CommandError)</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-25\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-26\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">block </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-27\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-28\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-29\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-30\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">212</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">flush_node</span><span class=\"crayon-sy\">_</span>config<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-31\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-32\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">775</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-st\">each</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-33\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-34\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1296</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">create_cluster</span><span class=\"crayon-sy\">_</span>cmd<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ab8136586619-35\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ab8136586619-36\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0081 seconds] -->\r\n<p>还是度娘靠谱，在《<a href=\"http://blog.csdn.net/tengdazhang770960436/article/details/49962979\" rel=\"nofollow\">redis 跨机器集群启动出错</a>》博客中找到了答案。</p>\n<p>这是由于之间创建集群没有成功,需要将nodes.conf和dir里面的文件全部删除。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338abe208790747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst 7000]# find / -name \"nodes-7000.conf\"\r\n/usr/local/redis-3.2.3/src/nodes-7000.conf\r\n[root@itfirst 7000]# cd ../../\r\n[root@itfirst src]# ls\r\nadlist.c     bitops.o      dict.h         lzf_c.o          notify.c         redis-benchmark.c  rio.c           slowlog.h       t_zset.o\r\nadlist.h     blocked.c     dict.o         lzf_d.c          notify.o         redis-benchmark.o  rio.h           slowlog.o       util.c\r\nadlist.o     blocked.o     dump.rdb       lzf_d.o          object.c         redis-check-aof    rio.o           solarisfixes.h  util.h\r\nae.c         cluster.c     endianconv.c   lzf.h            object.o         redis-check-aof.c  scripting.c     sort.c          util.o\r\nae_epoll.c   cluster.h     endianconv.h   lzfP.h           pqsort.c         redis-check-aof.o  scripting.o     sort.o          valgrind.sup\r\nae_evport.c  cluster.o     endianconv.o   Makefile         pqsort.h         redis-check-rdb    sdsalloc.h      sparkline.c     version.h\r\nae.h         config.c      fmacros.h      Makefile.dep     pqsort.o         redis-check-rdb.c  sds.c           sparkline.h     ziplist.c\r\nae_kqueue.c  config.h      geo.c          memtest.c        pubsub.c         redis-check-rdb.o  sds.h           sparkline.o     ziplist.h\r\nae.o         config.o      geo.h          memtest.o        pubsub.o         redis-cli          sds.o           syncio.c        ziplist.o\r\nae_select.c  crc16.c       geo.o          mkreleasehdr.sh  quicklist.c      redis-cli.c        sentinel.c      syncio.o        zipmap.c\r\nanet.c       crc16.o       help.h         multi.c          quicklist.h      redis-cli.o        sentinel.o      testhelp.h      zipmap.h\r\nanet.h       crc64.c       hyperloglog.c  multi.o          quicklist.o      redis_cluster      server.c        t_hash.c        zipmap.o\r\nanet.o       crc64.h       hyperloglog.o  networking.c     rand.c           redis-sentinel     server.h        t_hash.o        zmalloc.c\r\naof.c        crc64.o       intset.c       networking.o     rand.h           redis-server       server.o        t_list.c        zmalloc.h\r\naof.o        db.c          intset.h       nodes-7000.conf  rand.o           redis-trib.rb      setproctitle.c  t_list.o        zmalloc.o\r\nasciilogo.h  db.o          intset.o       nodes-7001.conf  rdb.c            release.c          setproctitle.o  t_set.c\r\nbio.c        debug.c       latency.c      nodes-7002.conf  rdb.h            release.h          sha1.c          t_set.o\r\nbio.h        debugmacro.h  latency.h      nodes-7003.conf  rdb.o            release.o          sha1.h          t_string.c\r\nbio.o        debug.o       latency.o      nodes-7004.conf  redisassert.h    replication.c      sha1.o          t_string.o\r\nbitops.c     dict.c        lzf_c.c        nodes-7005.conf  redis-benchmark  replication.o      slowlog.c       t_zset.c\r\n[root@itfirst src]# rm -rf nodes-700*\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338abe208790747-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338abe208790747-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># find / -name \"nodes-7000.conf\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.2.3</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7000.conf</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># cd ../../</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-5\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">bitops</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">lzf_c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">notify</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">benchmark</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">t_zset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-6\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">blocked</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">lzf_d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">notify</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">benchmark</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-7\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">blocked</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dump</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rdb       </span><span class=\"crayon-v\">lzf_d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">aof    </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">solarisfixes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-8\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">lzf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">            </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">scripting</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">sort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-9\"><span class=\"crayon-v\">ae_epoll</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">lzfP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">scripting</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">sort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">valgrind</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-10\"><span class=\"crayon-v\">ae_evport</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Makefile         </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rdb    </span><span class=\"crayon-v\">sdsalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">version</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-11\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">fmacros</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Makefile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dep     </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-12\"><span class=\"crayon-v\">ae_kqueue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">memtest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pubsub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-13\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">memtest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pubsub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">cli          </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">syncio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-14\"><span class=\"crayon-v\">ae_select</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">crc16</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">mkreleasehdr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sh  </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sentinel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">syncio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-15\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc16</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">help</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">multi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sentinel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">testhelp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-16\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">hyperloglog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">multi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">redis_cluster      </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-17\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">hyperloglog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">networking</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sentinel     </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-18\"><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">networking</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server       </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-19\"><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7000.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rb      </span><span class=\"crayon-v\">setproctitle</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">t_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-20\"><span class=\"crayon-v\">asciilogo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7001.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">setproctitle</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">t_set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-21\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7002.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-22\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debugmacro</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7003.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_string</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-23\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7004.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">redisassert</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">replication</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_string</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-24\"><span class=\"crayon-v\">bitops</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lzf_c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7005.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">benchmark  </span><span class=\"crayon-v\">replication</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">t_zset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338abe208790747-25\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rm -rf nodes-700*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338abe208790747-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0154 seconds] -->\r\n<p>然后重启redis服务。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338ac6112730684\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000\r\n   slots:0-5460 (5461 slots) master\r\nM: 3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: 6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002\r\n   slots:10923-16383 (5461 slots) master\r\nS: ff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003\r\n   replicates 319da27d8668a15d2d2d02afe433247694343459\r\nS: 43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004\r\n   replicates 3da756265e301ac0210760f13e990473f87a3017\r\nS: 3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005\r\n   replicates 6f336da48c892d8e0c541a864765978ebfbca6d5\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n&gt;&gt;&gt; Nodes configuration updated\r\n&gt;&gt;&gt; Assign a different config epoch to each node\r\n&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster\r\nWaiting for the cluster to join....\r\n&gt;&gt;&gt; Performing Cluster Check (using node 192.168.186.91:7000)\r\nM: 319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000\r\n   slots:0-5460 (5461 slots) master\r\nM: 3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: 6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002\r\n   slots:10923-16383 (5461 slots) master\r\nM: ff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003\r\n   slots: (0 slots) master\r\n   replicates 319da27d8668a15d2d2d02afe433247694343459\r\nM: 43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004\r\n   slots: (0 slots) master\r\n   replicates 3da756265e301ac0210760f13e990473f87a3017\r\nM: 3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005\r\n   slots: (0 slots) master\r\n   replicates 6f336da48c892d8e0c541a864765978ebfbca6d5\r\n[OK] All nodes agree about slots configuration.\r\n&gt;&gt;&gt; Check for open slots...\r\n&gt;&gt;&gt; Check slots coverage...\r\n[OK] All 16384 slots covered.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ac6112730684-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ac6112730684-48\">48</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-4\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-5\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-7\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-8\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-9\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-10\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-11\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-13\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-15\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-17\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-18\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-19\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-21\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-22\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-23\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-24\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Nodes </span><span class=\"crayon-e\">configuration </span><span class=\"crayon-v\">updated</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-25\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Assign</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">different </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">epoch </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">each</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-26\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Sending </span><span class=\"crayon-e\">CLUSTER </span><span class=\"crayon-e\">MEET </span><span class=\"crayon-e\">messages </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-27\"><span class=\"crayon-e\">Waiting </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">join</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-28\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">Cluster </span><span class=\"crayon-e\">Check</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">using </span><span class=\"crayon-i\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-29\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-30\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-31\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-32\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-33\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-34\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-35\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-36\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-37\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-38\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-39\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-40\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-41\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-42\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-43\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-44\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">All </span><span class=\"crayon-e\">nodes </span><span class=\"crayon-e\">agree </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-45\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Check </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-46\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Check </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">coverage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ac6112730684-47\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">All</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16384</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">covered</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ac6112730684-48\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0095 seconds] -->\r\n<p> </p>\n<h3>4、验证集群状态</h3>\n<p>登录集群客户端，-c标识以集群方式登录</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338ace662356818\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-cli -h 192.168.186.91 -c -p 7002</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ace662356818-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ace662356818-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -c -p 7002</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>查看集群状态</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aaa1f6338ad1379629315\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n192.168.186.91:7002&gt; cluster info\r\ncluster_state:ok\r\ncluster_slots_assigned:16384\r\ncluster_slots_ok:16384\r\ncluster_slots_pfail:0\r\ncluster_slots_fail:0\r\ncluster_known_nodes:6\r\ncluster_size:3\r\ncluster_current_epoch:6\r\ncluster_my_epoch:3\r\ncluster_stats_messages_sent:124174\r\ncluster_stats_messages_received:124174\r\n192.168.186.91:7002&gt; cluster nodes\r\n319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000 master - 0 1519465974307 1 connected 0-5460\r\n3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005 slave 6f336da48c892d8e0c541a864765978ebfbca6d5 0 1519465971278 6 connected\r\n6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002 myself,master - 0 0 3 connected 10923-16383\r\n3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001 master - 0 1519465972288 2 connected 5461-10922\r\n43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004 slave 3da756265e301ac0210760f13e990473f87a3017 0 1519465973298 5 connected\r\nff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003 slave 319da27d8668a15d2d2d02afe433247694343459 0 1519465969258 4 connected\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aaa1f6338ad1379629315-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aaa1f6338ad1379629315-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-1\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-2\"><span class=\"crayon-v\">cluster_state</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">ok</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-3\"><span class=\"crayon-v\">cluster_slots_assigned</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16384</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-4\"><span class=\"crayon-v\">cluster_slots_ok</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16384</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-5\"><span class=\"crayon-v\">cluster_slots_pfail</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-6\"><span class=\"crayon-v\">cluster_slots_fail</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-7\"><span class=\"crayon-v\">cluster_known_nodes</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-8\"><span class=\"crayon-v\">cluster_size</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-9\"><span class=\"crayon-v\">cluster_current_epoch</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-10\"><span class=\"crayon-v\">cluster_my_epoch</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-11\"><span class=\"crayon-v\">cluster_stats_messages_sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">124174</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-12\"><span class=\"crayon-v\">cluster_stats_messages_received</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">124174</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-13\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-i\">nodes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-14\"><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465974307</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-15\"><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465971278</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-16\"><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myself</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-17\"><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465972288</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-18\"><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465973298</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">connected</span></div><div class=\"crayon-line\" id=\"crayon-5aaa1f6338ad1379629315-19\"><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465969258</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aaa1f6338ad1379629315-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113760\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113760votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113760\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-13", "praise_nums": 1}
{"url_obj_id": "742e67917a72f6ef4997410757b7b877", "url": "http://blog.jobbole.com/113699/", "title": "剖析内存中的程序之秘", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/916f9d62e323d9f101c7d545e3fc030e.jpg"], "tags": "C/C++,内存", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/\">Gustavo Duarte</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9255-1.html\">Linux中国</a>   </div><p>内存管理是操作系统的核心任务；它对程序员和系统管理员来说也是至关重要的。在接下来的几篇文章中，我将从实践出发着眼于内存管理，并深入到它的内部结构。虽然这些概念很通用，但示例大都来自于 32 位 x86 架构的 Linux 和 Windows 上。这第一篇文章描述了在内存中程序如何分布。</p>\n<p>在一个多任务操作系统中的每个进程都运行在它自己的内存“沙箱”中。这个沙箱是一个<strong><span style=\"color: #ff0000\">虚拟地址空间</span></strong><span style=\"color: #ff0000\">（virtual address space）</span>，在 32 位的模式中它总共有 4GB 的内存地址块。这些虚拟地址是通过内核<strong><span style=\"color: #ff0000\">页表</span></strong><span style=\"color: #ff0000\">（page table）</span>映射到物理地址的，并且这些虚拟地址是由操作系统内核来维护，进而被进程所消费的。每个进程都有它自己的一组页表，但是这里有点玄机。一旦虚拟地址被启用，这些虚拟地址将被应用到这台电脑上的 <strong><span style=\"color: #ff0000\"><em>所有软件</em>，<em>包括内核本身</em></span></strong>。因此，一部分虚拟地址空间必须保留给内核使用：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3e27c63a998ba0d994ce525cf44ffb4a.png\" alt=\"Kernel/User Memory Split\"></p>\n<p>但是，这并<span style=\"color: #ff0000\"><strong>不是</strong></span>说内核就使用了很多的物理内存，恰恰相反，它只使用了很少一部分可用的地址空间映射到其所需要的物理内存。内核空间在内核页表中被标记为独占使用于 <a href=\"http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection\">特权代码</a> （ring 2 或更低），因此，如果一个用户模式的程序尝试去访问它，将触发一个页面故障错误。在 Linux 中，内核空间是始终存在的，并且在所有进程中都映射相同的物理内存。内核代码和数据总是可寻址的，准备随时去处理中断或者系统调用。相比之下，用户模式中的地址空间，在每次进程切换时都会发生变化：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/88f9c9eb62a7e791bae979dd65ee60a5.png\" alt=\"Process Switch Effects on Virtual Memory\"></p>\n<p>蓝色的区域代表映射到物理地址的虚拟地址空间，白色的区域是尚未映射的部分。在上面的示例中，众所周知的内存“饕餮” Firefox 使用了大量的虚拟内存空间。在地址空间中不同的条带对应了不同的内存段，像<strong><span style=\"color: #ff0000\">堆</span></strong><span style=\"color: #ff0000\">（heap）</span>、<strong><span style=\"color: #ff0000\">栈</span></strong><span style=\"color: #ff0000\">（stack）</span>等等。请注意，这些段只是一系列内存地址的简化表示，它与 <a href=\"http://duartes.org/gustavo/blog/post/memory-translation-and-segmentation\">Intel 类型的段</a> <em>并没有任何关系</em> 。不过，这是一个在 Linux 进程的标准段布局：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3d53f82d37d856ac7cc70e2e2617bd45.png\" alt=\"Flexible Process Address Space Layout In Linux\"></p>\n<p>当计算机还是快乐、安全的时代时，在机器中的几乎每个进程上，那些段的起始虚拟地址都是<span style=\"color: #ff0000\"><strong>完全相同</strong></span>的。这将使远程挖掘安全漏洞变得容易。漏洞利用经常需要去引用绝对内存位置：比如在栈中的一个地址，一个库函数的地址，等等。远程攻击可以闭着眼睛选择这个地址，因为地址空间都是相同的。当攻击者们这样做的时候，人们就会受到伤害。因此，地址空间随机化开始流行起来。Linux 会通过在其起始地址上增加偏移量来随机化<a href=\"http://lxr.linux.no/linux+v2.6.28.1/fs/binfmt_elf.c#L542\">栈</a>、<a href=\"http://lxr.linux.no/linux+v2.6.28.1/arch/x86/mm/mmap.c#L84\">内存映射段</a>、以及<a href=\"http://lxr.linux.no/linux+v2.6.28.1/arch/x86/kernel/process_32.c#L729\">堆</a>。不幸的是，32 位的地址空间是非常拥挤的，为地址空间随机化留下的空间不多，因此 <a href=\"http://www.stanford.edu/%7Eblp/papers/asrandom.pdf\">妨碍了地址空间随机化的效果</a>。</p>\n<p>在进程地址空间中最高的段是栈，在大多数编程语言中它存储本地变量和函数参数。调用一个方法或者函数将推送一个新的栈帧stack frame到这个栈。当函数返回时这个栈帧被删除。这个简单的设计，可能是因为数据严格遵循 <a href=\"http://en.wikipedia.org/wiki/Lifo\">后进先出（LIFO）</a> 的次序，这意味着跟踪栈内容时不需要复杂的数据结构 —— 一个指向栈顶的简单指针就可以做到。推入和弹出也因此而非常快且准确。也可能是，持续的栈区重用往往会在 <a href=\"http://duartes.org/gustavo/blog/post/intel-cpu-caches\">CPU 缓存</a> 中保持活跃的栈内存，这样可以加快访问速度。进程中的每个线程都有它自己的栈。</p>\n<p>向栈中推送更多的而不是刚合适的数据可能会耗尽栈的映射区域。这将触发一个页面故障，在 Linux 中它是通过 <a href=\"http://lxr.linux.no/linux+v2.6.28/mm/mmap.c#L1716\"><code>expand_stack()</code></a> 来处理的，它会去调用 <a href=\"http://lxr.linux.no/linux+v2.6.28/mm/mmap.c#L1544\"><code>acct_stack_growth()</code></a> 来检查栈的增长是否正常。如果栈的大小低于 <code>RLIMIT_STACK</code> 的值（一般是 8MB 大小），那么这是一个正常的栈增长和程序的合理使用，否则可能是发生了未知问题。这是一个栈大小按需调节的常见机制。但是，栈的大小达到了上述限制，将会发生一个栈溢出，并且，程序将会收到一个段故障Segmentation Fault错误。当映射的栈区为满足需要而扩展后，在栈缩小时，映射区域并不会收缩。就像美国联邦政府的预算一样，它只会扩张。</p>\n<p>动态栈增长是 <a href=\"http://lxr.linux.no/linux+v2.6.28.1/arch/x86/mm/fault.c#L692\">唯一例外的情况</a> ，当它去访问一个未映射的内存区域，如上图中白色部分，是允许的。除此之外的任何其它访问未映射的内存区域将触发一个页面故障，导致段故障。一些映射区域是只读的，因此，尝试去写入到这些区域也将触发一个段故障。</p>\n<p>在栈的下面，有内存映射段。在这里，内核将文件内容直接映射到内存。任何应用程序都可以通过 Linux 的 <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html\"><code>mmap()</code></a> 系统调用（ <a href=\"http://lxr.linux.no/linux+v2.6.28.1/arch/x86/kernel/sys_i386_32.c#L27\">代码实现</a>）或者 Windows 的 <a href=\"http://msdn.microsoft.com/en-us/library/aa366537(VS.85).aspx\"><code>CreateFileMapping()</code></a> / <a href=\"http://msdn.microsoft.com/en-us/library/aa366761(VS.85).aspx\"><code>MapViewOfFile()</code></a> 来请求一个映射。内存映射是实现文件 I/O 的方便高效的方式。因此，它经常被用于加载动态库。有时候，也被用于去创建一个并不匹配任何文件的匿名内存映射，这种映射经常被用做程序数据的替代。在 Linux 中，如果你通过 <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html\"><code>malloc()</code></a> 去请求一个大的内存块，C 库将会创建这样一个匿名映射而不是使用堆内存。这里所谓的“大”表示是超过了<code>MMAP_THRESHOLD</code> 设置的字节数，它的缺省值是 128 kB，可以通过 <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man3/undocumented.3.html\"><code>mallopt()</code></a> 去调整这个设置值。</p>\n<p>接下来讲的是“堆”，就在我们接下来的地址空间中，堆提供运行时内存分配，像栈一样，但又不同于栈的是，它分配的数据生存期要长于分配它的函数。大多数编程语言都为程序提供了堆管理支持。因此，满足内存需要是编程语言运行时和内核共同来做的事情。在 C 中，堆分配的接口是 <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html\"><code>malloc()</code></a> 一族，然而在支持垃圾回收的编程语言中，像 C#，这个接口使用 <code>new</code> 关键字。</p>\n<p>如果在堆中有足够的空间可以满足内存请求，它可以由编程语言运行时来处理内存分配请求，而无需内核参与。否则将通过 <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man2/brk.2.html\"><code>brk()</code></a> 系统调用（<a href=\"http://lxr.linux.no/linux+v2.6.28.1/mm/mmap.c#L248\">代码实现</a>）来扩大堆以满足内存请求所需的大小。堆管理是比较 <a href=\"http://g.oswego.edu/dl/html/malloc.html\">复杂的</a>，在面对我们程序的混乱分配模式时，它通过复杂的算法，努力在速度和内存使用效率之间取得一种平衡。服务一个堆请求所需要的时间可能是非常可观的。实时系统有一个 <a href=\"http://rtportal.upv.es/rtmalloc/\">特定用途的分配器</a> 去处理这个问题。堆也会出现  <span style=\"color: #ff0000\"><em>碎片化</em> </span>，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/d00072799463f32077204b75b2ed28d4.png\" alt=\"Fragmented Heap\"></p>\n<p>最后，我们抵达了内存的低位段：BSS、数据、以及程序文本。在 C 中，静态（全局）变量的内容都保存在 BSS 和数据中。它们之间的不同之处在于，BSS 保存 <span style=\"color: #ff0000\"><em>未初始化的</em></span>  静态变量的内容，它的值在源代码中并没有被程序员设置。BSS 内存区域是 <span style=\"color: #ff0000\"><em>匿名</em></span> 的：它没有映射到任何文件上。如果你在程序中写这样的语句 <code>static int cntActiveUsers</code>，<code>cntActiveUsers</code> 的内容就保存在 BSS 中。</p>\n<p>反过来，数据段，用于保存在源代码中静态变量 <span style=\"color: #ff0000\"><em>初始化后</em> </span>的内容。这个内存区域是 <span style=\"color: #ff0000\"><em>非匿名</em></span> 的。它映射了程序的二进值镜像上的一部分，包含了在源代码中给定初始化值的静态变量内容。因此，如果你在程序中写这样的语句 <code>static int cntWorkerBees = 10</code>，那么，<code>cntWorkerBees</code> 的内容就保存在数据段中，并且初始值为 <code>10</code>。尽管可以通过数据段映射到一个文件，但是这是一个私有内存映射，意味着，如果改变内存，它并不会将这种变化反映到底层的文件上。必须是这样的，否则，分配的全局变量将会改变你磁盘上的二进制文件镜像，这种做法就太不可思议了！</p>\n<p>用图去展示一个数据段是很困难的，因为它使用一个指针。在那种情况下，指针 <code>gonzo</code> 的<span style=\"color: #ff0000\"><em>内容</em></span>（一个 4 字节的内存地址）保存在数据段上。然而，它并没有指向一个真实的字符串。而这个字符串存在于文本段中，文本段是只读的，它用于保存你的代码中的类似于字符串常量这样的内容。文本段也会在内存中映射你的二进制文件，但是，如果你的程序写入到这个区域，将会触发一个段故障错误。尽管在 C 中，它比不上从一开始就避免这种指针错误那么有效，但是，这种机制也有助于避免指针错误。这里有一个展示这些段和示例变量的图：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/22b60ebab0d1036b0f016b8feaec7594.png\" alt=\"ELF Binary Image Mapped Into Memory\"></p>\n<p>你可以通过读取 <code>/proc/pid_of_process/maps</code> 文件来检查 Linux 进程中的内存区域。请记住，一个段可以包含很多的区域。例如，每个内存映射的文件一般都在 mmap 段中的它自己的区域中，而动态库有类似于 BSS 和数据一样的额外的区域。下一篇文章中我们将详细说明“<strong><span style=\"color: #ff0000\">区域</span></strong><span style=\"color: #ff0000\">（area）</span>”的真正含义是什么。此外，有时候人们所说的“<strong><span style=\"color: #ff0000\">数据段</span></strong><span style=\"color: #ff0000\">（data segment）</span>”是指“<strong><span style=\"color: #ff0000\">数据</span></strong><span style=\"color: #ff0000\">（data）</span> + BSS + 堆”。</p>\n<p>你可以使用 <a href=\"http://manpages.ubuntu.com/manpages/intrepid/en/man1/nm.1.html\">nm</a> 和 <a href=\"http://manpages.ubuntu.com/manpages/intrepid/en/man1/objdump.1.html\">objdump</a> 命令去检查二进制镜像，去显示它们的符号、地址、段等等。最终，在 Linux 中上面描述的虚拟地址布局是一个“弹性的”布局，这就是这几年来的缺省情况。它假设 <code>RLIMIT_STACK</code> 有一个值。如果没有值的话，Linux 将恢复到如下所示的“经典” 布局：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/6d496238b477a0c12363d116e642fa13.png\" alt=\"Classic Process Address Space Layout In Linux\"></p>\n<p>这就是虚拟地址空间布局。接下来的文章将讨论内核如何对这些内存区域保持跟踪、内存映射、文件如何读取和写入、以及内存使用数据的意义。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113699\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113699votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113699\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 5, "create_date": "2018-03-04", "praise_nums": 2}
{"url_obj_id": "26b61ecede402bb81e74b4370bf364d7", "url": "http://blog.jobbole.com/113696/", "title": "使用 sar 和 kSar 来发现 Linux 性能瓶颈", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/3791503078cd56e080b61c9795d145e9.jpg"], "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/tips/identifying-linux-bottlenecks-sar-graphs-with-ksar.html\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9398-1.html\">Linux中国/qhwdw</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3791503078cd56e080b61c9795d145e9.jpg\"></p>\n<p><code>sar</code> 命令用用收集、报告、或者保存 UNIX / Linux 系统的活动信息。它保存选择的计数器到操作系统的 <code>/var/log/sa/sadd</code> 文件中。从收集的数据中，你可以得到许多关于你的服务器的信息：</p>\n<ol>\n<li>CPU 使用率</li>\n<li>内存页面和使用率</li>\n<li>网络 I/O 和传输统计</li>\n<li>进程创建活动</li>\n<li>所有的块设备活动</li>\n<li>每秒中断数等等</li>\n</ol>\n<p><code>sar</code> 命令的输出能够用于识别服务器瓶颈。但是，分析 <code>sar</code> 命令提供的信息可能比较困难，所以要使用 kSar 工具。kSar 工具可以将 <code>sar</code> 命令的输出绘制成基于时间周期的、易于理解的图表。</p>\n<h3 id=\"toc_1\">sysstat 包</h3>\n<p><code>sar</code>、<code>sa1</code>、和 <code>sa2</code> 命令都是 sysstat 包的一部分。它是 Linux 包含的性能监视工具集合。</p>\n<ol>\n<li><code>sar</code>：显示数据</li>\n<li><code>sa1</code> 和 <code>sa2</code>：收集和保存数据用于以后分析。<code>sa2</code> shell 脚本在 <code>/var/log/sa</code> 目录中每日写入一个报告。<code>sa1</code> shell 脚本将每日的系统活动信息以二进制数据的形式写入到文件中。</li>\n<li>sadc —— 系统活动数据收集器。你可以通过修改 <code>sa1</code> 和 <code>sa2</code> 脚本去配置各种选项。它们位于以下的目录：\n<ul>\n<li><code>/usr/lib64/sa/sa1</code> （64 位）或者 <code>/usr/lib/sa/sa1</code> （32 位） —— 它调用 <code>sadc</code> 去记录报告到 <code>/var/log/sa/sadX</code> 格式。</li>\n<li><code>/usr/lib64/sa/sa2</code> （64 位）或者 <code>/usr/lib/sa/sa2</code> （32 位） —— 它调用 <code>sar</code> 去记录报告到 <code>/var/log/sa/sarX</code> 格式。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"toc_2\">如何在我的系统上安装 sar？</h4>\n<p>在一个基于 CentOS/RHEL 的系统上，输入如下的 <a title=\"See Linux/Unix yum command examples for more info\" href=\"https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/\">yum 命令</a> 去安装 sysstat：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c80220ec145809273\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# yum install sysstat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220ec145809273-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220ec145809273-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c80220ec145809273-1\"><span class=\"crayon-p\"># yum install sysstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220ec145809273-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c80220f6843313928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLoaded plugins: downloadonly, fastestmirror, priorities,\r\n              : protectbase, security\r\nLoading mirror speeds from cached hostfile\r\n * addons: mirror.cs.vt.edu\r\n * base: mirror.ash.fastserv.com\r\n * epel: serverbeach1.fedoraproject.org\r\n * extras: mirror.cogentco.com\r\n * updates: centos.mirror.nac.net\r\n0 packages excluded due to repository protections\r\nSetting up Install Process\r\nResolving Dependencies\r\n--&gt; Running transaction check\r\n---&gt; Package sysstat.x86_64 0:7.0.2-3.el5 set to be updated\r\n--&gt; Finished Dependency Resolution\r\n\r\nDependencies Resolved\r\n\r\n====================================================================\r\n Package        Arch          Version             Repository   Size\r\n====================================================================\r\nInstalling:\r\n sysstat        x86_64        7.0.2-3.el5         base        173 k\r\n\r\nTransaction Summary\r\n====================================================================\r\nInstall      1 Package(s)\r\nUpdate       0 Package(s)\r\nRemove       0 Package(s)\r\n\r\nTotal download size: 173 k\r\nIs this ok [y/N]: y\r\nDownloading Packages:\r\nsysstat-7.0.2-3.el5.x86_64.rpm               | 173 kB     00:00\r\nRunning rpm_check_debug\r\nRunning Transaction Test\r\nFinished Transaction Test\r\nTransaction Test Succeeded\r\nRunning Transaction\r\n  Installing     : sysstat                                      1/1\r\n\r\nInstalled:\r\n  sysstat.x86_64 0:7.0.2-3.el5\r\n\r\nComplete!\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220f6843313928-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220f6843313928-45\">45</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-1\"><span class=\"crayon-e\">Loaded </span><span class=\"crayon-v\">plugins</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">downloadonly</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fastestmirror</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">priorities</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-2\"><span class=\"crayon-h\">              </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">protectbase</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">security</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-3\"><span class=\"crayon-e\">Loading </span><span class=\"crayon-e\">mirror </span><span class=\"crayon-e\">speeds </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">cached </span><span class=\"crayon-e \">hostfile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-4\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addons</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirror</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">edu</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-5\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">base</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirror</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fastserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-6\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">epel</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">serverbeach1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fedoraproject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">org</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-7\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extras</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirror</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cogentco</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-8\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">updates</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mirror</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nac</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">net</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-9\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">packages </span><span class=\"crayon-e\">excluded </span><span class=\"crayon-e\">due </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repository </span><span class=\"crayon-e\">protections</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-10\"><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-e\">Install </span><span class=\"crayon-e\">Process</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-11\"><span class=\"crayon-e\">Resolving </span><span class=\"crayon-v\">Dependencies</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-12\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">check</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-13\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sysstat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.0.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.el5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">updated</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-14\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Finished </span><span class=\"crayon-e\">Dependency </span><span class=\"crayon-e\">Resolution</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-16\"><span class=\"crayon-e\">Dependencies </span><span class=\"crayon-v\">Resolved</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-18\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">==</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Arch          </span><span class=\"crayon-e\">Version             </span><span class=\"crayon-e\">Repository   </span><span class=\"crayon-v\">Size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-20\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">==</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-21\"><span class=\"crayon-v\">Installing</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-22\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sysstat        </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">        </span><span class=\"crayon-cn\">7.0.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.el5</span><span class=\"crayon-h\">         </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">173</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-24\"><span class=\"crayon-e\">Transaction </span><span class=\"crayon-v\">Summary</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-25\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">==</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-26\"><span class=\"crayon-i\">Install</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-27\"><span class=\"crayon-i\">Update</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-28\"><span class=\"crayon-i\">Remove</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-30\"><span class=\"crayon-e\">Total </span><span class=\"crayon-e\">download </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">173</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-31\"><span class=\"crayon-st\">Is</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ok</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-32\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">Packages</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-33\"><span class=\"crayon-v\">sysstat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.0.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.el5.x86_64.rpm</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">173</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-34\"><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">rpm_check_debug</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-35\"><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">Transaction </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-36\"><span class=\"crayon-e\">Finished </span><span class=\"crayon-e\">Transaction </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-37\"><span class=\"crayon-e\">Transaction </span><span class=\"crayon-e\">Test </span><span class=\"crayon-e\">Succeeded</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-38\"><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">Transaction</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-39\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">Installing</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sysstat</span><span class=\"crayon-h\">                                      </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-40\"> </div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-41\"><span class=\"crayon-v\">Installed</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-42\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sysstat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.0.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.el5</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-43\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220f6843313928-44\"><span class=\"crayon-v\">Complete</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220f6843313928-45\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0068 seconds] -->\r\n<p></p>\n<h4 id=\"toc_3\">为 sysstat 配置文件</h4>\n<p>编辑 <code>/etc/sysconfig/sysstat</code> 文件去指定日志文件保存多少天（最长为一个月）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c80220fb035890652\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# vi /etc/sysconfig/sysstat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220fb035890652-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220fb035890652-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c80220fb035890652-1\"><span class=\"crayon-p\"># vi /etc/sysconfig/sysstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220fb035890652-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出如下 ：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c80220ff360362229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# keep log for 28 days\r\n# the default is 7\r\nHISTORY=28\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220ff360362229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220ff360362229-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c80220ff360362229-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c80220ff360362229-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c80220ff360362229-1\"><span class=\"crayon-p\"># keep log for 28 days</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220ff360362229-2\"><span class=\"crayon-p\"># the default is 7</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c80220ff360362229-3\"><span class=\"crayon-v\">HISTORY</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">28</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c80220ff360362229-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>保存并关闭这个文件。</p>\n<h3 id=\"toc_4\">找到 sar 默认的 cron 作业</h3>\n<p><a href=\"https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/\">默认的 cron 作业位于</a> <code>/etc/cron.d/sysstat</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022102121154601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# cat /etc/cron.d/sysstat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022102121154601-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022102121154601-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022102121154601-1\"><span class=\"crayon-p\"># cat /etc/cron.d/sysstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022102121154601-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022105967245501\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# run system activity accounting tool every 10 minutes\r\n*/10 * * * * root /usr/lib64/sa/sa1 1 1\r\n# generate a daily summary of process accounting at 23:53\r\n53 23 * * * root /usr/lib64/sa/sa2 -A\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022105967245501-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022105967245501-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022105967245501-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022105967245501-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022105967245501-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022105967245501-1\"><span class=\"crayon-p\"># run system activity accounting tool every 10 minutes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022105967245501-2\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022105967245501-3\"><span class=\"crayon-p\"># generate a daily summary of process accounting at 23:53</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022105967245501-4\"><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022105967245501-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h4 id=\"toc_5\">告诉 sadc 去报告磁盘的统计数据</h4>\n<p>使用一个文本编辑器去编辑 <code>/etc/cron.d/sysstat</code> 文件，比如使用 <code>vim</code> 命令，输入如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022108137175221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# vi /etc/cron.d/sysstat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022108137175221-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022108137175221-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022108137175221-1\"><span class=\"crayon-p\"># vi /etc/cron.d/sysstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022108137175221-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>像下面的示例那样更新这个文件，以记录所有的硬盘统计数据（<code>-d</code> 选项强制记录每个块设备的统计数据，而 <code>-I</code> 选项强制记录所有系统中断的统计数据）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802210b292528230\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# run system activity accounting tool every 10 minutes\r\n*/10 * * * * root /usr/lib64/sa/sa1 -I -d 1 1\r\n# generate a daily summary of process accounting at 23:53\r\n53 23 * * * root /usr/lib64/sa/sa2 -A \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210b292528230-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802210b292528230-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210b292528230-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802210b292528230-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210b292528230-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802210b292528230-1\"><span class=\"crayon-p\"># run system activity accounting tool every 10 minutes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802210b292528230-2\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802210b292528230-3\"><span class=\"crayon-p\"># generate a daily summary of process accounting at 23:53</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802210b292528230-4\"><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802210b292528230-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>在 CentOS/RHEL 7.x 系统上你需要传递 <code>-S DISK</code> 选项去收集块设备的数据。传递 <code>-S XALL</code> 选项去采集如下所列的数据：</p>\n<ol>\n<li>磁盘</li>\n<li>分区</li>\n<li>系统中断</li>\n<li>SNMP</li>\n<li>IPv6</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802210f600486287\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# Run system activity accounting tool every 10 minutes\r\n*/10 * * * * root /usr/lib64/sa/sa1 -S DISK 1 1\r\n# 0 * * * * root /usr/lib64/sa/sa1 600 6 &amp;\r\n# Generate a daily summary of process accounting at 23:53\r\n53 23 * * * root /usr/lib64/sa/sa2 -A\r\n# Run system activity accounting tool every 10 minutes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210f600486287-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802210f600486287-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210f600486287-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802210f600486287-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210f600486287-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802210f600486287-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802210f600486287-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802210f600486287-1\"><span class=\"crayon-p\"># Run system activity accounting tool every 10 minutes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802210f600486287-2\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DISK</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802210f600486287-3\"><span class=\"crayon-p\"># 0 * * * * root /usr/lib64/sa/sa1 600 6 &amp;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802210f600486287-4\"><span class=\"crayon-p\"># Generate a daily summary of process accounting at 23:53</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802210f600486287-5\"><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802210f600486287-6\"><span class=\"crayon-p\"># Run system activity accounting tool every 10 minutes</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802210f600486287-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>保存并关闭这个文件。</p>\n<h4 id=\"toc_6\">打开 CentOS/RHEL 版本 5.x/6.x 的服务</h4>\n<p>输入如下命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022112012888668\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchkconfig sysstat on\r\nservice sysstat start\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022112012888668-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022112012888668-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022112012888668-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022112012888668-1\"><span class=\"crayon-e\">chkconfig </span><span class=\"crayon-e\">sysstat </span><span class=\"crayon-e\">on</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022112012888668-2\"><span class=\"crayon-e\">service </span><span class=\"crayon-e\">sysstat </span><span class=\"crayon-i\">start</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022112012888668-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>示例输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022116744592837\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCalling the system activity data collector (sadc):\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022116744592837-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022116744592837-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022116744592837-1\"><span class=\"crayon-e\">Calling </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">system </span><span class=\"crayon-e\">activity </span><span class=\"crayon-e\">data </span><span class=\"crayon-e\">collector</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sadc</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022116744592837-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>对于 CentOS/RHEL 7.x，运行如下的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022119333073871\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# systemctl enable sysstat\r\n# systemctl start sysstat.service\r\n# systemctl status sysstat.service \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022119333073871-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022119333073871-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022119333073871-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022119333073871-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022119333073871-1\"><span class=\"crayon-p\"># systemctl enable sysstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022119333073871-2\"><span class=\"crayon-p\"># systemctl start sysstat.service</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022119333073871-3\"><span class=\"crayon-p\"># systemctl status sysstat.service </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022119333073871-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802211c772295088\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n● sysstat.service - Resets System Activity Logs\r\n   Loaded: loaded (/usr/lib/systemd/system/sysstat.service; enabled; vendor preset: enabled)\r\n   Active: active (exited) since Sat 2018-01-06 16:33:19 IST; 3s ago\r\n  Process: 28297 ExecStart=/usr/lib64/sa/sa1 --boot (code=exited, status=0/SUCCESS)\r\n Main PID: 28297 (code=exited, status=0/SUCCESS)\r\n\r\nJan 06 16:33:19 centos7-box systemd[1]: Starting Resets System Activity Logs...\r\nJan 06 16:33:19 centos7-box systemd[1]: Started Resets System Activity Logs.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211c772295088-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802211c772295088-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211c772295088-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802211c772295088-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211c772295088-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802211c772295088-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211c772295088-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802211c772295088-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211c772295088-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802211c772295088-1\">●<span class=\"crayon-h\"> </span><span class=\"crayon-v\">sysstat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Resets </span><span class=\"crayon-e\">System </span><span class=\"crayon-e\">Activity </span><span class=\"crayon-e\">Logs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802211c772295088-2\"><span class=\"crayon-e\">   </span><span class=\"crayon-v\">Loaded</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loaded</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sysstat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vendor </span><span class=\"crayon-v\">preset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802211c772295088-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">active</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">since </span><span class=\"crayon-i\">Sat</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IST</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ago</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802211c772295088-4\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">Process</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28297</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ExecStart</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">boot</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">code</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SUCCESS</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802211c772295088-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Main </span><span class=\"crayon-v\">PID</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28297</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">code</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SUCCESS</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802211c772295088-6\"> </div><div class=\"crayon-line\" id=\"crayon-5aa99c802211c772295088-7\"><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos7</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">box </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">Resets </span><span class=\"crayon-e\">System </span><span class=\"crayon-e\">Activity </span><span class=\"crayon-v\">Logs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802211c772295088-8\"><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos7</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">box </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-e\">Resets </span><span class=\"crayon-e\">System </span><span class=\"crayon-e\">Activity </span><span class=\"crayon-v\">Logs</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802211c772295088-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">如何使用 sar？如何查看统计数据？</h3>\n<p>使用 <code>sar</code> 命令去显示操作系统中选定的累积活动计数器输出。在这个示例中，运行 <code>sar</code> 命令行，去实时获得 CPU 使用率的报告：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802211f996616843\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -u 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802211f996616843-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802211f996616843-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802211f996616843-1\"><span class=\"crayon-p\"># sar -u 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802211f996616843-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022123837630621\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLinux 2.6.18-164.2.1.el5 (www-03.nixcraft.in)   12/14/2009\r\n\r\n09:49:47 PM CPU %user %nice %system %iowait %steal %idle\r\n09:49:50 PM all 5.66 0.00 1.22 0.04 0.00 93.08\r\n09:49:53 PM all 12.29 0.00 1.93 0.04 0.00 85.74\r\n09:49:56 PM all 9.30 0.00 1.61 0.00 0.00 89.10\r\n09:49:59 PM all 10.86 0.00 1.51 0.04 0.00 87.58\r\n09:50:02 PM all 14.21 0.00 3.27 0.04 0.00 82.47\r\n09:50:05 PM all 13.98 0.00 4.04 0.04 0.00 81.93\r\n09:50:08 PM all 6.60 6.89 1.26 0.00 0.00 85.25\r\n09:50:11 PM all 7.25 0.00 1.55 0.04 0.00 91.15\r\n09:50:14 PM all 6.61 0.00 1.09 0.00 0.00 92.31\r\n09:50:17 PM all 5.71 0.00 0.96 0.00 0.00 93.33\r\nAverage: all 9.24 0.69 1.84 0.03 0.00 88.20\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022123837630621-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022123837630621-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-1\"><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.18</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">164.2.1.el5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">www</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03.nixcraft.in</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2009</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-2\"> </div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-3\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">47</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">nice</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">system</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">iowait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">steal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">idle</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-4\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.66</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">93.08</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-5\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.93</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">85.74</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-6\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.61</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">89.10</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-7\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.86</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.51</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">87.58</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-8\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">82.47</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-9\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">05</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.98</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">81.93</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-10\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.60</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.89</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.26</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">85.25</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-11\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.25</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.55</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">91.15</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-12\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.61</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">92.31</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-13\"><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.71</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.96</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">93.33</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022123837630621-14\"><span class=\"crayon-v\">Average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.24</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.69</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.84</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">88.20</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022123837630621-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0054 seconds] -->\r\n<p>其中：</p>\n<ul>\n<li>3 表示间隔时间</li>\n<li>10 表示次数</li>\n</ul>\n<p>查看进程创建的统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022126109549387\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -c 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022126109549387-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022126109549387-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022126109549387-1\"><span class=\"crayon-p\"># sar -c 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022126109549387-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p>查看 I/O 和传输率统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022129486541696\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -b 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022129486541696-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022129486541696-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022129486541696-1\"><span class=\"crayon-p\"># sar -b 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022129486541696-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看内存页面统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802212c363653800\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -B 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802212c363653800-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802212c363653800-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802212c363653800-1\"><span class=\"crayon-p\"># sar -B 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802212c363653800-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看块设备统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802212f566989174\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -d 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802212f566989174-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802212f566989174-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802212f566989174-1\"><span class=\"crayon-p\"># sar -d 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802212f566989174-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看所有中断的统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022132292878719\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -I XALL 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022132292878719-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022132292878719-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022132292878719-1\"><span class=\"crayon-p\"># sar -I XALL 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022132292878719-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看网络设备特定的统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022135388396413\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -n DEV 3 10\r\n# sar -n EDEV 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022135388396413-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022135388396413-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022135388396413-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022135388396413-1\"><span class=\"crayon-p\"># sar -n DEV 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022135388396413-2\"><span class=\"crayon-p\"># sar -n EDEV 3 10</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022135388396413-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看 CPU 特定的统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022138722797938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -P ALL\r\n# Only 1st CPU stats\r\n# sar -P 1 3 10 \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022138722797938-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022138722797938-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022138722797938-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022138722797938-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022138722797938-1\"><span class=\"crayon-p\"># sar -P ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022138722797938-2\"><span class=\"crayon-p\"># Only 1st CPU stats</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c8022138722797938-3\"><span class=\"crayon-p\"># sar -P 1 3 10 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022138722797938-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>查看队列长度和平均负载的统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802213b448649591\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -q 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802213b448649591-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802213b448649591-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802213b448649591-1\"><span class=\"crayon-p\"># sar -q 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802213b448649591-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看内存和交换空间的使用统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802213e537704597\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -r 3 10\r\n# sar -R 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802213e537704597-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802213e537704597-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802213e537704597-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802213e537704597-1\"><span class=\"crayon-p\"># sar -r 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802213e537704597-2\"><span class=\"crayon-p\"># sar -R 3 10</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802213e537704597-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看 inode、文件、和其它内核表统计数据状态，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022142203081066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -v 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022142203081066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022142203081066-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022142203081066-1\"><span class=\"crayon-p\"># sar -v 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022142203081066-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p>查看系统切换活动统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022145732619899\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -w 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022145732619899-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022145732619899-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022145732619899-1\"><span class=\"crayon-p\"># sar -w 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022145732619899-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看交换统计数据，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022148385859879\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -W 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022148385859879-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022148385859879-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022148385859879-1\"><span class=\"crayon-p\"># sar -W 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022148385859879-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看一个 PID 为 3256 的 Apache 进程，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802214b967892609\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -x 3256 3 10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802214b967892609-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802214b967892609-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802214b967892609-1\"><span class=\"crayon-p\"># sar -x 3256 3 10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802214b967892609-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">kSar 介绍</h3>\n<p><code>sar</code> 和 <code>sadf</code> 提供了基于命令行界面的输出。这种输出可能会使新手用户/系统管理员感到无从下手。因此，你需要使用 kSar，它是一个图形化显示你的 <code>sar</code> 数据的 Java 应用程序。它也允许你以 PDF/JPG/PNG/CSV 格式导出数据。你可以用三种方式去加载数据：本地文件、运行本地命令、以及通过 SSH 远程运行的命令。kSar 可以处理下列操作系统的 <code>sar</code> 输出：</p>\n<ol>\n<li>Solaris 8, 9 和 10</li>\n<li>Mac OS/X 10.4+</li>\n<li>Linux (Systat Version &gt;= 5.0.5)</li>\n<li>AIX (4.3 &amp; 5.3)</li>\n<li>HPUX 11.00+</li>\n</ol>\n<h4 id=\"toc_9\">下载和安装 kSar</h4>\n<p>访问 <a href=\"https://github.com/vlsi/ksar\">官方</a> 网站去获得最新版本的源代码。使用 <a href=\"https://www.cyberciti.biz/tips/linux-wget-your-ultimate-command-line-downloader.html\">wget</a> 去下载源代码，输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802214e200496441\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ wget https://github.com/vlsi/ksar/releases/download/v5.2.4-snapshot-652bf16/ksar-5.2.4-SNAPSHOT-all.jar\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802214e200496441-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802214e200496441-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802214e200496441-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/vlsi/ksar/releases/download/v5.2.4-snapshot-652bf16/ksar-5.2.4-SNAPSHOT-all.jar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802214e200496441-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_10\">如何运行 kSar？</h4>\n<p>首先要确保你的机器上 <a href=\"https://www.cyberciti.biz/faq/howto-ubuntu-linux-install-configure-jdk-jre/\">JAVA jdk</a> 已安装并能够正常工作。输入下列命令去启动 kSar：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022152225359202\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ java -jar ksar-5.2.4-SNAPSHOT-all.jar\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022152225359202-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022152225359202-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022152225359202-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">jar </span><span class=\"crayon-v\">ksar</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2.4</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">SNAPSHOT</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">jar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022152225359202-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><img class=\"aligncenter\" title=\"kSar welcome screen\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/de7b487cdd0d16c068da5e020a933153.png\" alt=\"Fig.01: kSar welcome screen\"></p>\n<p>接下来你将看到 kSar 的主窗口，和有两个菜单的面板。</p>\n<p><img class=\"aligncenter\" title=\"kSar - the main window\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/7f0eff3ffad0261ed61f0ccb6e2b0f9a.png\" alt=\"Fig.02: kSar - the main window\"></p>\n<p>左侧有一个列表，是 kSar 根据数据已经解析出的可用图表的列表。右侧窗口将展示你选定的图表。</p>\n<h4 id=\"toc_11\">如何使用 kSar 去生成 sar 图表？</h4>\n<p>首先，你需要从命名为 server1 的服务器上采集 <code>sar</code> 命令的统计数据。输入如下的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022155609712705\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[ server1 ]# LC_ALL=C sar -A  &gt; /tmp/sar.data.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022155609712705-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022155609712705-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022155609712705-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">server1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># LC_ALL=C sar -A  &gt; /tmp/sar.data.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022155609712705-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>接下来，使用 <code>scp</code> 命令从本地桌面拷贝到远程电脑上：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c8022158935016549\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[ desktop ]$ scp user@server1.nixcraft.com:/tmp/sar.data.txt /tmp/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c8022158935016549-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c8022158935016549-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c8022158935016549-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">desktop</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scp </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">server1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nixcraft</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c8022158935016549-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>切换到 kSar 窗口，点击 “Data” &gt; “Load data from text file” &gt; 从 <code>/tmp/</code> 中选择 <code>sar.data.txt</code> &gt; 点击 “Open” 按钮。</p>\n<p>现在，图表类型树已经出现在左侧面板中并选定了一个图形：</p>\n<p><img class=\"aligncenter\" title=\"Linux kSar Processes for server1 \" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/f0e4252fa05e49357a881852e587df9e.png\" alt=\"Fig.03: Processes for server1\"></p>\n<p><img class=\"aligncenter\" title=\"Linux Disk I/O Stats Using kSar\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/d64946c52de493b2ffcd5d48fff084ce.png\" alt=\"Fig.03: Disk stats (blok device) stats for server1\"></p>\n<p><img class=\"aligncenter\" title=\"Linux Memory paging and its utilization stats\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/84fec8712e1eec1559a758b2973e7318.png\" alt=\"Fig.05: Memory stats for server1\"></p>\n<h5 id=\"toc_12\">放大和缩小</h5>\n<p>通过移动你可以交互式缩放图像的一部分。在要缩放的图像的左上角点击并按下鼠标，移动到要缩放区域的右下角，可以选定要缩放的区域。返回到未缩放状态，点击并拖动鼠标到除了右下角外的任意位置，你也可以点击并选择 zoom 选项。</p>\n<h5 id=\"toc_13\">了解 kSar 图像和 sar 数据</h5>\n<p>我强烈建议你去阅读 <code>sar</code> 和 <code>sadf</code> 命令的 man 页面：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa99c802215c500281569\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man sar\r\n$ man sadf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa99c802215c500281569-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa99c802215c500281569-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa99c802215c500281569-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa99c802215c500281569-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">sar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa99c802215c500281569-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">sadf</span></div><div class=\"crayon-line\" id=\"crayon-5aa99c802215c500281569-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_14\">案例学习：识别 Linux 服务器的 CPU 瓶颈</h3>\n<p>使用 <code>sar</code> 命令和 kSar 工具，可以得到内存、CPU、以及其它子系统的详细快照。例如，如果 CPU 使用率在一个很长的时间内持续高于 80%，有可能就是出现了一个 CPU 瓶颈。使用 <code>sar -x ALL</code> 你可以找到大量消耗 CPU 的进程。</p>\n<p><a href=\"https://www.cyberciti.biz/tips/how-do-i-find-out-linux-cpu-utilization.html\">mpstat 命令</a> 的输出（sysstat 包的一部分）也会帮你去了解 CPU 的使用率。但你可以使用 kSar 很容易地去分析这些信息。</p>\n<h4 id=\"toc_15\">找出 CPU 瓶颈后 …</h4>\n<p>对 CPU 执行如下的调整：</p>\n<ol>\n<li>确保没有不需要的进程在后台运行。关闭 <a href=\"https://www.cyberciti.biz/faq/check-running-services-in-rhel-redhat-fedora-centoslinux/\">Linux 上所有不需要的服务</a>。</li>\n<li>使用 <a href=\"https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/\">cron</a> 在一个非高峰时刻运行任务（比如，备份）。</li>\n<li>使用 <a href=\"https://www.cyberciti.biz/faq/show-all-running-processes-in-linux/\">top 和 ps 命令</a> 去找出所有非关键的后台作业/服务。使用 <a href=\"https://www.cyberciti.biz/faq/howto-change-unix-linux-process-priority/\">renice 命令</a> 去调整低优先级作业。</li>\n<li>使用 <a href=\"https://www.cyberciti.biz/faq/taskset-cpu-affinity-command/\">taskset 命令去设置进程使用的 CPU </a> （卸载所使用的 CPU），即，绑定进程到不同的 CPU 上。例如，在 2# CPU 上运行 MySQL 数据库，而在 3# CPU 上运行 Apache。</li>\n<li>确保你的系统使用了最新的驱动程序和固件。</li>\n<li>如有可能在系统上增加额外的 CPU。</li>\n<li>为单线程应用程序使用更快的 CPU（比如，Lighttpd web 服务器应用程序）。</li>\n<li>为多线程应用程序使用多个 CPU（比如，MySQL 数据库服务器应用程序）。</li>\n<li>为一个 web 应用程序使用多个计算节点并设置一个 <a href=\"https://www.cyberciti.biz/tips/load-balancer-open-source-software.html\">负载均衡器</a>。</li>\n</ol>\n<h3 id=\"toc_16\">isag —— 交互式系统活动记录器（替代工具）</h3>\n<p><code>isag</code> 命令图形化显示了以前运行 <code>sar</code> 命令时存储在二进制文件中的系统活动数据。<code>isag</code> 命令引用 <code>sar</code> 并提取出它的数据来绘制图形。与 kSar 相比，<code>isag</code> 的选项比较少。</p>\n<p><img class=\"aligncenter\" title=\"Fig.06: isag CPU utilization graphs\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/30a572f1cb4ccde5bb7c7be8a49a0b88.png\" alt=\"Fig.06: isag CPU utilization graphs\"></p>\n<h3 id=\"toc_17\">关于作者</h3>\n<p>本文作者是 nixCraft 的创始人和一位经验丰富的 Linux 操作系统/Unix shell 脚本培训师。他与包括 IT、教育、国防和空间研究、以及非营利组织等全球各行业客户一起合作。可以在 <a href=\"https://twitter.com/nixcraft\">Twitter</a>、<a href=\"https://facebook.com/nixcraft\">Facebook</a>、<a href=\"https://plus.google.com/+CybercitiBiz\">Google+</a> 上关注他。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113696\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113696votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113696\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-04", "praise_nums": 1}
{"url_obj_id": "c5b87c22be1fbc4b5d456243c449d9bb", "url": "http://blog.jobbole.com/113710/", "title": "100 倍价值的工程师", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/90129c6662feee86738bd3663ce83108.png"], "tags": "职场,,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://zef.me/the-100x-engineer-6d50a690a866\">zef.me</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：工程师如何花同样的时间比其他人生产的价值多100倍：知道自己在做什么，不需要别人过多干预；不断对自己发出挑战，使工作更有效；一个人是无法成为100 倍价值工程师的，需要带动周围人一起提升生产力。</p>\n<hr>\n<p>几个月前一个新工程师加入了我们的团队。和往常一样，我花了些时间和他相处，来更好地了解他是哪种类型的人、他的驱动力是什么。我们经常讨论过去的经历，但更重要的是：未来的目标。结果发现，他有个有趣的目标：</p>\n<p style=\"text-align: center;\"><em><strong>「我想成为世界上最好的程序员」</strong></em></p>\n<p>野心勃勃。我喜欢。</p>\n<p>但是，这让我思考了一个问题：成为“最好的程序员”实际上意味着什么。怎么衡量“好”？怎么知道他（她）是“<em>最好的程序员</em>”？</p>\n<p>这让我想起了上世纪 60 年代，Sackman、 Erikson 和 Grant 撰写的论文《Exploratory Experimental Studies Comparing Online and Offline Programming Performance》。该研究的目的是调查程序员在编程的多个方面的表现，无论他有电脑——那时是主机——的交互权限还是用“纸和笔”高效工作。尽管这个问题的答案几乎要过时了——谁还在纸上编程啊——仍然有几点发现现在仍然适用：</p>\n<p>研究对象中，</p>\n<ul>\n<li>最好和最差的程序员完成一个编程练习所用的编程时间有 <strong>20 倍</strong>的差距。</li>\n<li>调试时间有<strong> 25 倍</strong>的差距。</li>\n<li>所写程序大小有<strong> 5 倍</strong>差距。</li>\n<li>程序执行速度有 <strong>10 倍</strong>差距。</li>\n</ul>\n<p>研究对象都有几年的经验，事实上经验年数对这些数字似乎没有显著的影响。总之，差距还是挺显著的，不是吗？</p>\n<h3>10 倍价值的程序员</h3>\n<p>“10 倍价值程序员”这个概念起源于这篇论文。这个概念吸引了人们数十年，而且及其有争议。<a href=\"https://www.google.pl/search?q=10x+programmer&amp;ie=UTF-8&amp;oe=UTF-8&amp;hl=en-us&amp;client=safari\">直接 Google 一下这个英文短语</a>（10x programmer）。</p>\n<p>公平来讲，Sackman 等人的数字一定被夸大了，很多人都对他们的方法提出了质疑。但是几乎没有人反对在糟糕的程序员与优秀的程序员之间有着显著差距。甚至据传，每个人都认识一个人，他能在极短时间内写出惊人的软件。</p>\n<h3>谁在乎？</h3>\n<p>“所以……谁在乎？”你可能会问。为什么 10 倍价值程序员这么重要呢？</p>\n<p>一方面来说，10 倍价值程序员至少表面上对雇主来说是桩好买卖。理论上，雇主可以：</p>\n<ul>\n<li>1.炒掉 90% 的员工</li>\n<li>2.剩余 10% 雇佣 10 倍价值程序员</li>\n<li>3.付给他们大约 2 倍工资</li>\n<li>4.盈利</li>\n</ul>\n<p>简单，对吧？</p>\n<p>然而现实会有点不一样。首先，这假设你能招到一个 10 倍价值程序员的团队……祝你好运。由于你很可能做不到这一点，你得把他们整合进现存的一倍价值程序员团队中去。结果发现，团队中有一个比你<strong>更更更</strong>高产的程序员并不是那么鼓舞人心。</p>\n<p>但是实际上，我不想太过详述 10 倍价值程序员这个概念。因为在我看来，有这么一群不同的“人种”，他们的影响力远超过 10 倍价值程序员。</p>\n<p>是谁呢？</p>\n<p>我们先来仔细研究一下“程序员”这个概念。在 Sackman 的研究中，他们完全只关注编程能力。练习是高度与算法相关的，像“假定某网格代表一个迷宫，编写一个程序找到通路”这样的类型。好“程序员”擅长这种类型的工作：输入编程挑战，输出代码。每个程序员都有自己的任务列，并且在逐个完成。</p>\n<p>输入代码。</p>\n<p>如果这是你喜欢的工作，我肯定你能找到如此工作的地方。</p>\n<p>然而，在我曾经工作的任何地方，实际编程都不是这样的。实话实说——谢天谢地。我觉得长期这样编程会无聊透顶的。</p>\n<p>我觉得更有趣的角色是<strong>工程师</strong>的角色。工程师把想法变成实实在在的产品，他们也因此有更广阔的视野。他们手头有大量工具可以完成工作，当然编程也是工具之一。</p>\n<p>但是实话实说，并且我想我也可以在此说，我们真的超级不擅长在那些被过分吹嘘的技能。</p>\n<p><a href=\"https://www.mayerdan.com/ruby/2012/11/11/bugs-per-line-of-code-ratio\">统计量不会说谎：</a></p>\n<blockquote><p>（a）行业均值：“每 1000 行代码中大约有 15 到 50 处错误。”他进一步声明这对那些背后有一定程度结构化编程、可能混有一些代码技巧的代码具有代表性。</p></blockquote>\n<blockquote><p>（b）微软应用：“内部测试时每 1000 行代码中大约有 10 到 20 处错误，发布产品中每 1000 行代码中大约有 0.5 处错误（Moore 1992）。”他将其归功于代码阅读技巧和独立检测的组合（在其著作的另一章中有进一步讨论）。</p></blockquote>\n<blockquote><p>（c）“Harlan Mills 开创了名为 ‘cleanroom development’ 的技巧，能实现在内部测试时每 1000 行代码有 3 处错误，在发布产品中每 1000 行代码有 0.1 处错误（Cobb 和 Mills 1990）。几个项目——例如飞船软件——利用了格式开发方法系统、同行审查和统计测试实现了在 500,000 行代码中有 0 处错误的水平。</p></blockquote>\n<p>要我说——我们应该尽力避免编程，使世界免受每次在集成开发环境（IDE）中按下某键产生的所有 bug 的侵害。</p>\n<p>所以没错，10 倍价值程序员是个好主意，但是我要把门槛设置得高一点。到 2018 年了，世界已经变了。</p>\n<p style=\"text-align: center;\">…………</p>\n<h3>100 倍价值工程师</h3>\n<p>我喜欢延伸目标。它们经常引导我们后退一步，并带来思维的巨大转变。这个目标也一样。如果我们想成为 100 倍价值工程师——其影响力是老一倍价值工程师的 100 倍，该怎么实现呢？</p>\n<p><b>做到自己</b>高产并不够——当然单单有编程天赋就可能实现 10 倍价值，但达到 100 倍价值就不可能了。<strong>为了拥有有 100 倍的影响力，你得让团队和组织的生产率均大幅提高，并最终领导其他人用同样的工作方式。</strong></p>\n<p>尽管 100 倍价值听起来很极端，我在职业生涯中仍然和许多我认为有“100 倍价值的观念模式”、独特的思考、说话和行动方式的人合作过。</p>\n<p>可能让某些人吃惊的是，这些与编程能力、科技和编程语言没有任何关系。常见的口号是：“为什么我们还在用 Java？如果我们能只用 Scala、Clojure、Node，&lt;&lt;在此输入今日便好 insert flavor of the day here&gt;&gt;就会更高产！”现实是，一种不同的编程语言可能最多让你达到 1.5 倍到 2 倍。这与 100 倍价值相比简直是小巫见大巫。100 倍价值是完全不同的游戏。</p>\n<p>所以，到底什么是“100 倍价值的的观念模式”？让我们一起来讨论两个方面。</p>\n<p><strong>1. Ownership 所有权</strong></p>\n<p>100 倍价值工程师掌控他们所做的事。他们知道为什么这么做、怎么做、所做的是什么。在<a href=\"https://www.amazon.com/Extreme-Ownership-U-S-Navy-SEALs-ebook/dp/B00VE4Y0Z2\">《Extreme Ownership》</a>这本书中，两位前海豹突击队队员解释了他们的极端所有权（extreme ownership）概念。这个概念的核心是，当我说“拥有某物”时到底意味着什么。这意味着：接受你要对你所做的任何事情负责。</p>\n<p>最重要的是这意味着：<strong>不能指别人</strong>。这不意味着所有事情都在你的控制之下，却意味着：当事情不可避免地出错时，你要对你如何反应负责。这意味着：你要负责预期可能发生的事情，并做好应急措施。这意味着你要从错误中学习，甚至从中汲取价值。掌控你所做事情的各个方面。</p>\n<p>要得到这种程度的所有权，我只知道一个方法：挑战。挑战你和<strong>你的团队</strong>被要求做的任何事情，这样你能理解并掌控每一个决定。</p>\n<p><strong>2. Challenging the status quo 挑战现状</strong></p>\n<p>100 倍价值工程师在三个维度进行挑战：</p>\n<p>1.<em>做什么（What）？</em></p>\n<p>这主要是关于范围的：我们在开发什么？是否仔细研究过？要求是否明确？我们确定所有这些都是重要的并且需要（马上）完成吗？</p>\n<p>2.<em>怎么做（How）？</em></p>\n<p>这是关于在怎样机智地执行某事。有可以得到同样结果的更轻松方法吗？这也是关于过程的：我们怎么样得到想要的结果，以及怎样提高？</p>\n<p>3.<em>为什么（Why）？</em></p>\n<p>这是关于业务环境的、关于完全理解为什么需要开发某个特性并检查产品经理的方法是否是满足用户需求的正确方法。</p>\n<p>来逐个看看更多细节。</p>\n<p><strong>What?  做什么？</strong></p>\n<p>更快地提供某产品的唯一最好方法是：缩减范围。它<em>需要</em>拥有的特性是什么。</p>\n<p>可以在此应用我的“5 个真的吗？”技巧：</p>\n<blockquote><p>产品经理：我们需要有所有这 10 个特性</p>\n<p>100 倍价值工程师：真的吗？</p>\n<p>产品经理：嗯。</p>\n<p>100 倍价值工程师：真的吗？</p>\n<p>产品经理：好吧，好吧，可能不需要第七个特性。但是剩下的都要。</p>\n<p>100 倍价值工程师：真的吗？</p>\n<p>产品经理：嗯，是的，我是这么想的……让我跟客户确认一下。</p>\n<p>好吧，他们可能需要第四个和第五个特性，但是我们可以之后再做这两个。剩下的都是必须的。</p>\n<p>100 倍价值工程师：真的吗？</p>\n<p>产品经理：是的。</p></blockquote>\n<p>这可能听起来像个玩笑，但是产品经理常常会拿一张长长的必需特性清单出现。然后经过几小时、几天、有时是几个月的谈判后，你得到了一张几乎只有原清单四分之一的清单。这是自然的，想出要加上的新特性要比移除特性更容易。</p>\n<p>另一个在将范围降低到较低水平的方法，是使用“帕累托法则”，二八法则。<a href=\"https://en.wikipedia.org/wiki/Pareto_principle\">维基百科</a>：</p>\n<blockquote><p>帕累托法则（也叫二八法则，关键少数法则，或者稀疏因子法则）表明，对很多事件来说，大约 80% 的影响来自于 20% 的原因。</p></blockquote>\n<p>该法则有很多应用，软件开发就是其一。往往有很多种实现某特性的方法，使用极少的精力（比如说 20%）就能带来大多数收益（例如 80%）。这点吸引人，不仅仅是因为更少的工作量，还因为你能更经济地彻底检查特性，并且只在这些特性有价值、使用过后才进行完全开发。</p>\n<p><strong>How?  怎么做？</strong></p>\n<p>既然<em>需要开发的清单</em>已经减少到一小部分了，仍然要通过挑战特性的实现方法来获得机动空间和好处。一般来说，实现某特性有很多方法。一旦团队想出一种方法，很多团队就满意了。100 倍价值工程师总会进一步寻找替代方法，根据各自的优缺点评估所有选择。</p>\n<p>“怎么做”也会被技术债务影响。经常有“变态的”方法来实现某些快、脏的特性，“合适的”方法来首先还清技术债务，再干净地实现特性。什么是最好的方法？100 倍价值工程师认识到不只有一个正确答案，并且这取决于不同情况和累积技术债务的费用。一个 100 倍价值工程师能在不同的情景中作出正确抉择，能在合适的时机和产品谈判来降低技术债务。</p>\n<p>“怎么做”的另一个方面是过程。我对 Scrum 很喜欢的一点是，它能有效设定一个基础，如果用得合适可以鼓励 100 倍价值的行为：</p>\n<p>•<b>改进</b>是讨论和挑战做什么、怎么做和为什么的好平台。产品所有者提出要开发的新特性，开发团队挑战做什么和为什么，来得到全面的背景，并相互挑战如何实现特性。</p>\n<p>•<strong>Plannings</strong> 针对下一步冲刺（sprint）做什么的<strong>计划，</strong>计划也是通往“辉煌和头脑”的手段：记起到底需要做什么，并且计划团队如何合作来交付产品</p>\n<p>•<strong>Retrospectives</strong> <strong>回顾</strong>是团队提升的方法。在一次冲刺循环中，有些事情出错了，有些事情进展不顺利。回顾是 100 倍价值工程师挑战团队来提升、下次做得更好的时刻。回顾也能练习所有权。100 倍价值工程师不抱怨低产，不指向自己以外的其他人。</p>\n<p><strong>Why?  为什么？</strong></p>\n<p>上周我和一个工程师聊了聊，他刚刚发现自己花了整整 3 个月时间实现某特性，后来有发现对用户来说同样的价值本可以在 3 日内实现。显然不会是同一种功能，但是实现的目标是一样的。</p>\n<p>这种事情怎么会发生呢？</p>\n<p>除非工程师退后一步、扩大视野、挑战为什么，这种事情就会发生。为什么要开发这个特性？用户想要实现什么？他们的需求是什么？产品经理往往会提出非常具体的特性要求，偶尔具体化程度会比较低。他们的出发点是好的。然而更可能的情况是：产品经理也是人，也会遗漏。此外，风险在于工程师不再挑战更基础的问题：为什么我们要这么做？不是还有用其他更少的精力实现同样结果的方法吗？</p>\n<p><strong>但是，等等</strong></p>\n<p>说起来容易做起来难。做起来也应该难，不是什么人都应该能跻身 100 倍价值工程师。然而，我们都可以渴望变得更好，并找到相应的方法。</p>\n<p>因此，看看 100 倍价值工程师的技能集合是值得的。你会注意到，这与 10 倍价值程序员是非常非常不同的。</p>\n<p>•<strong>沟通</strong>——这点几乎明显得不用提了，但是它是重要的一点。100 倍价值工程师有优秀的沟通技巧。沟通是拥有 100 倍影响力的关键部分。</p>\n<p>•<strong>创造力</strong>——显然这在 10 倍价值程序员中是常见的，但是所要求的创造力不是关于算法的，也不是关于灵巧的类继承结构（class inheritance structures）的，而是关于想出更有效的方法来实现目标。</p>\n<p>•<strong>同理心</strong>——在“挑战所有”的长篇大论中隐藏着“生产力挑战”。那么我这么说意味着什么？让我用我的大儿子做例子来解释一下。他 4 岁了。4 岁小孩最喜欢的问题是什么？“为什么！？”这意味着我儿子是个 100 倍价值工程师吗？不。为什么不呢？因为他总是问“为什么？”，无论时机正确与否，无论有没有意义，无论他是不是让他的父母想自杀。拥有知道该挑战什么、怎么挑战和何时挑战的同理心也是 100 倍价值工程师的重要技能。</p>\n<p>•<strong>谈判</strong>——好主意被高估了。人人都有好主意，但几乎没人真正实现这些想法。你知道需要实现一个想法，实现它的一个重要因素就是谈判——与其他开发人员谈判，与产品经理谈判，与其他利益相关者谈判。解释为什么某个主意是个好主意，以及为什么需要时间执行它们。100 倍价值工程师知道怎么做。所以当他们在场时，所有事情都似乎有可能实现。</p>\n<p>•<strong>技术</strong>——这是清单上的最后一点，但依然重要。虽然大多数提到的技巧都是“软实力”，但这并不意味着 100 倍价值工程师不需要技术。事实上，他（她）拥有领先的技术天赋是先决条件，原因有二：（1）挑战技术层面上的事情会产生巨大收益，也因此要求对技术有深层次的理解；（2）<a href=\"https://en.wikipedia.org/wiki/Ethos\">理念</a>是重要的，如果 100 倍价值工程师没有高技术，就不会被同辈接受。你得是“我们的一员”。</p>\n<p style=\"text-align: center;\">…………</p>\n<p style=\"text-align: left;\">几个月后，“我想成为世界上最好的程序员”先生作为程序员工作得非常顺利。他有天赋、努力工作、高产而且非常聪明。他会成为世界上最好的程序员吗？我不知道。</p>\n<p>但是私下里，我希望这不重要。</p>\n<p>我希望某一天，不是现在，但是可能是几年后，他会想做更多事。那时他会调整他的理想，不仅仅要擅长这个叫“编程”狭窄领域，而且渴望拥有 100 倍价值工程师的影响力。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113710\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113710votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113710\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 5, "fav_nums": 4, "create_date": "2018-03-06", "praise_nums": 2}
{"url_obj_id": "478668b98ba578838009ccb38b2d6a09", "url": "http://blog.jobbole.com/113713/", "title": "6 个开源的家庭自动化工具", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/1503a298ec77047d9314ddceef5e4ff7.jpg"], "tags": "IT技术,智能家居,自动化", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/life/17/12/home-automation-tools\">Jason Baker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9410-1.html\">Linux中国/qhwdw</a>   </div><blockquote><p>用这些开源软件解决方案构建一个更智能的家庭。</p></blockquote>\n<p><a href=\"https://opensource.com/resources/internet-of-things\">物联网</a> 不仅是一个时髦词，在现实中，自 2016 年我们发布了一篇关于家庭自动化工具的评论文章以来，它也在迅速占领着我们的生活。在 2017，<a href=\"https://www.statista.com/outlook/279/109/smart-home/united-states\">26.5% 的美国家庭</a> 已经使用了一些智能家居技术；预计五年内，这一数字还将翻倍。</p>\n<p>随着这些数量持续增加的各种设备的使用，可以帮助你实现对家庭的自动化管理、安保、和监视，在家庭自动化方面，从来没有像现在这样容易和更加吸引人过。不论你是要远程控制你的 HVAC 系统，集成一个家庭影院，保护你的家免受盗窃、火灾、或是其它威胁，还是节省能源或只是控制几盏灯，现在都有无数的设备可以帮到你。</p>\n<p>但同时，还有许多用户担心安装在他们家庭中的新设备带来的安全和隐私问题 —— 这是一个很现实也很 <a href=\"http://www.crn.com/slide-shows/internet-of-things/300089496/black-hat-2017-9-iot-security-threats-to-watch.htm\">严肃的问题</a>。他们想要去控制有谁可以接触到这个重要的系统，这个系统管理着他们的应用程序，记录了他们生活中的点点滴滴。这种想法是可以理解的：毕竟在一个连你的冰箱都是智能设备的今天，你不想要一个基本的保证吗？甚至是如果你授权了设备可以与外界通讯，它是否是仅被授权的人访问它呢？</p>\n<p><a href=\"https://opensource.com/business/15/5/why-open-source-means-stronger-security\">对安全的担心</a> 是为什么开源对我们将来使用的互联设备至关重要的众多理由之一。由于源代码运行在他们自己的设备上，完全可以去搞明白控制你的家庭的程序，也就是说你可以查看它的代码，如果必要的话甚至可以去修改它。</p>\n<p>虽然联网设备通常都包含它们专有的组件，但是将开源引入家庭自动化的第一步是确保你的设备和这些设备可以共同工作 —— 它们为你提供一个接口 —— 并且是开源的。幸运的是，现在有许多解决方案可供选择，从 PC 到树莓派，你可以在它们上做任何事情。</p>\n<p>这里有几个我比较喜欢的。</p>\n<h3 id=\"toc_1\">Calaos</h3>\n<p><a href=\"https://calaos.fr/en/\">Calaos</a> 是一个设计为全栈的家庭自动化平台，包含一个服务器应用程序、触摸屏界面、Web 应用程序、支持 iOS 和 Android 的原生移动应用、以及一个运行在底层的预配置好的 Linux 操作系统。Calaos 项目出自一个法国公司，因此它的支持论坛以法语为主，不过大量的介绍资料和文档都已经翻译为英语了。</p>\n<p>Calaos 使用的是 <a href=\"https://github.com/calaos/calaos-os/blob/master/LICENSE\">GPL</a> v3 的许可证，你可以在 <a href=\"https://github.com/calaos\">GitHub</a> 上查看它的源代码。</p>\n<h3 id=\"toc_2\">Domoticz</h3>\n<p><a href=\"https://domoticz.com/\">Domoticz</a> 是一个有大量设备库支持的家庭自动化系统，在它的项目网站上有大量的文档，从气象站到远程控制的烟雾探测器，以及大量的第三方 <a href=\"https://www.domoticz.com/wiki/Integrations_and_Protocols\">集成软件</a> 。它使用一个 HTML5 前端，可以从桌面浏览器或者大多数现代的智能手机上访问它，它是一个轻量级的应用，可以运行在像树莓派这样的低功耗设备上。</p>\n<p>Domoticz 是用 C++ 写的，使用 <a href=\"https://github.com/domoticz/domoticz/blob/master/License.txt\">GPLv3</a> 许可证。它的 <a href=\"https://github.com/domoticz/domoticz\">源代码</a> 在 GitHub 上。</p>\n<h3 id=\"toc_3\">Home Assistant</h3>\n<p><a href=\"https://home-assistant.io/\">Home Assistant</a> 是一个开源的家庭自动化平台，它可以轻松部署在任何能运行 Python 3 的机器上，从树莓派到网络存储（NAS），甚至可以使用 Docker 容器轻松地部署到其它系统上。它集成了大量的开源和商业的产品，允许你去连接它们，比如，IFTTT、天气信息、或者你的 Amazon Echo 设备，去控制从锁到灯的各种硬件。</p>\n<p>Home Assistant 以 <a href=\"https://github.com/home-assistant/home-assistant/blob/dev/LICENSE.md\">MIT 许可证</a> 发布，它的源代码可以从 <a href=\"https://github.com/balloob/home-assistant\">GitHub</a> 上下载。</p>\n<h3 id=\"toc_4\">MisterHouse</h3>\n<p>从 2016 年起，<a href=\"http://misterhouse.sourceforge.net/\">MisterHouse</a> 取得了很多的进展，我们把它作为一个“可以考虑的另外选择”列在这个清单上。它使用 Perl 脚本去监视任何东西，它可以通过一台计算机来查询或者控制任何可以远程控制的东西。它可以响应语音命令，查询当前时间、天气、位置、以及其它事件，比如去打开灯、唤醒你、记下你喜欢的电视节目、通报呼入的来电、开门报警、记录你儿子上了多长时间的网、如果你女儿汽车超速它也可以告诉你等等。它可以运行在 Linux、macOS、以及 Windows 计算机上，它可以读/写很多的设备，包括安全系统、气象站、来电显示、路由器、机动车位置系统等等。</p>\n<p>MisterHouse 使用 <a href=\"http://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html\">GPLv2</a> 许可证，你可以在 <a href=\"https://github.com/hollie/misterhouse\">GitHub</a> 上查看它的源代码。</p>\n<h3 id=\"toc_5\">OpenHAB</h3>\n<p><a href=\"http://www.openhab.org/\">OpenHAB</a>（开放家庭自动化总线的简称）是在开源爱好者中所熟知的家庭自动化工具，它拥有大量用户的社区以及支持和集成了大量的设备。它是用 Java 写的，OpenHAB 非常轻便，可以跨大多数主流操作系统使用，它甚至在树莓派上也运行的很好。支持成百上千的设备，OpenHAB 被设计为与设备无关的，这使开发者在系统中添加他们的设备或者插件很容易。OpenHAB 也支持通过 iOS 和 Android 应用来控制设备以及设计工具，因此，你可以为你的家庭系统创建你自己的 UI。</p>\n<p>你可以在 GitHub 上找到 OpenHAB 的 <a href=\"https://github.com/openhab/openhab\">源代码</a>，它使用 <a href=\"https://github.com/openhab/openhab/blob/master/LICENSE.TXT\">Eclipse 公共许可证</a>。</p>\n<h3 id=\"toc_6\">OpenMotics</h3>\n<p><a href=\"https://www.openmotics.com/\">OpenMotics</a> 是一个开源的硬件和软件家庭自动化系统。它的设计目标是为控制设备提供一个综合的系统，而不是从不同的供应商处将各种设备拼接在一起。不像其它的系统主要是为了方便改装而设计的，OpenMotics 专注于硬件解决方案。更多资料请查阅来自 OpenMotics 的后端开发者 Frederick Ryckbosch的 <a href=\"https://opensource.com/life/14/12/open-source-home-automation-system-opemmotics\">完整文章</a> 。</p>\n<p>OpenMotics 使用 <a href=\"http://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html\">GPLv2</a> 许可证，它的源代码可以从 <a href=\"https://github.com/openmotics\">GitHub</a> 上下载。</p>\n<p>当然了，我们的选择不仅有这些。许多家庭自动化爱好者使用不同的解决方案，甚至是他们自己动手做。其它用户选择使用单独的智能家庭设备而无需集成它们到一个单一的综合系统中。</p>\n<p>如果上面的解决方案并不能满足你的需求，下面还有一些潜在的替代者可以去考虑：</p>\n<ul>\n<li><a href=\"http://www.eventghost.net/\">EventGhost</a> 是一个开源的（<a href=\"http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\">GPL v2</a>）家庭影院自动化工具，它只能运行在 Microsoft Windows PC 上。它允许用户去控制多媒体电脑和连接的硬件，它通过触发宏指令的插件或者定制的 Python 脚本来使用。</li>\n<li><a href=\"http://iobroker.net/\">ioBroker</a> 是一个基于 JavaScript 的物联网平台，它能够控制灯、锁、空调、多媒体、网络摄像头等等。它可以运行在任何可以运行 Node.js 的硬件上，包括 Windows、Linux、以及 macOS，它使用 <a href=\"https://github.com/ioBroker/ioBroker#license\">MIT 许可证</a>。</li>\n<li><a href=\"https://www.jeedom.com/site/en/index.html\">Jeedom</a> 是一个由开源软件（<a href=\"http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\">GPL v2</a>）构成的家庭自动化平台，它可以控制灯、锁、多媒体等等。它包含一个移动应用程序（Android 和 iOS），并且可以运行在 Linux PC 上；该公司也销售 hub，它为配置家庭自动化提供一个现成的解决方案。</li>\n<li><a href=\"http://www.linuxmce.com/\">LinuxMCE</a> 标称它是你的多媒体与电子设备之间的“数字粘合剂”。它运行在 Linux（包括树莓派）上，它基于 Pluto 开源 <a href=\"http://wiki.linuxmce.org/index.php/License\">许可证</a> 发布，它可以用于家庭安全、电话（VoIP 和语音信箱）、A/V 设备、家庭自动化、以及玩视频游戏。</li>\n<li><a href=\"http://opennethome.org/\">OpenNetHome</a>，和这一类中的其它解决方案一样，是一个控制灯、报警、应用程序等等的一个开源软件。它基于 Java 和 Apache Maven，可以运行在 Windows、macOS、以及 Linux —— 包括树莓派，它以 <a href=\"https://github.com/NetHome/NetHomeServer/blob/master/LICENSE\">GPLv3</a> 许可证发布。</li>\n<li><a href=\"https://www.smarthomatic.org/\">Smarthomatic</a> 是一个专注于硬件设备和软件的开源家庭自动化框架，而不仅是用户界面。它基于 <a href=\"https://github.com/breaker27/smarthomatic/blob/develop/GPL3.txt\">GPLv3</a> 许可证，它可用于控制灯、电器、以及空调、检测温度、提醒给植物浇水。</li>\n</ul>\n<p>现在该轮到你了：你已经准备好家庭自动化系统了吗？或者正在研究去设计一个。你对家庭自动化的新手有什么建议，你会推荐什么样的系统？</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113713\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113713votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113713\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 1, "create_date": "2018-03-06", "praise_nums": 2}
{"url_obj_id": "1c7d5802b140adefb9805592b6a7e332", "url": "http://blog.jobbole.com/113771/", "title": "在 Linux 中自动配置 IPv6 地址", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "tags": "IT技术,IPv6,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/12/ipv6-auto-configuration-linux\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9434-1.html\">Linux中国/qhwdw</a>   </div><p>在 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">KVM 中测试 IPv6 网络：第 1 部分</a> 一文中，我们学习了关于唯一本地地址unique local addresses（ULA）的相关内容。在本文中，我们将学习如何为 ULA 自动配置 IP 地址。</p>\n<h3 id=\"toc_1\">何时使用唯一本地地址</h3>\n<p>唯一本地地址unique local addresses（ULA）使用 <code>fd00::/8</code> 地址块，它类似于我们常用的 IPv4 的私有地址：<code>10.0.0.0/8</code>、<code>172.16.0.0/12</code>、以及 <code>192.168.0.0/16</code>。但它们并不能直接替换。IPv4 的私有地址分类和网络地址转换（NAT）功能是为了缓解 IPv4 地址短缺的问题，这是个明智的解决方案，它延缓了本该被替换的 IPv4 的生命周期。IPv6 也支持 NAT，但是我想不出使用它的理由。IPv6 的地址数量远远大于 IPv4；它是不一样的，因此需要做不一样的事情。</p>\n<p>那么，ULA 存在的意义是什么呢？尤其是在我们已经有了本地链路地址link-local addresses（<code>fe80::/10</code>）时，到底需不需要我们去配置它们呢？它们之间（LCTT 译注：指的是唯一本地地址和本地链路地址）有两个重要的区别。一是，本地链路地址是不可路由的，因此，你不能跨子网使用它。二是，ULA 是你自己管理的；你可以自己选择它用于子网的地址范围，并且它们是可路由的。</p>\n<p>使用 ULA 的另一个好处是，如果你只是在局域网中“混日子”的话，你不需要为它们分配全局单播 IPv6 地址。当然了，如果你的 ISP 已经为你分配了 IPv6 的全局单播地址global unicast addresses，就不需要使用 ULA 了。你也可以在同一个网络中混合使用全局单播地址和 ULA，但是，我想不出这样使用的一个好理由，并且要一定确保你不使用网络地址转换（NAT）以使 ULA 可公共访问。在我看来，这是很愚蠢的行为。</p>\n<p>ULA 是仅为私有网络使用的，并且应该阻止其流出你的网络，不允许进入因特网。这很简单，在你的边界设备上只要阻止整个 <code>fd00::/8</code> 范围的 IPv6 地址即可实现。</p>\n<h3 id=\"toc_2\">地址自动配置</h3>\n<p>ULA 不像本地链路地址那样自动配置的，但是使用 radvd 设置自动配置是非常容易的，radva 是路由器公告守护程序。在你开始之前，运行 <code>ifconfig</code> 或者 <code>ip addr show</code> 去查看你现有的 IP 地址。</p>\n<p>在生产系统上使用时，你应该将 radvd 安装在一台单独的路由器上，如果只是测试使用，你可以将它安装在你的网络中的任意 Linux PC 上。在我的小型 KVM 测试实验室中，我使用 <code>apt-get install radvd</code> 命令把它安装在 Ubuntu 上。安装完成之后，我先不启动它，因为它还没有配置文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48ed9352242567\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl status radvd\r\n● radvd.service - LSB: Router Advertising Daemon\r\n   Loaded: loaded (/etc/init.d/radvd; bad; vendor preset: enabled)\r\n   Active: active (exited) since Mon 2017-12-11 20:08:25 PST; 4min 59s ago\r\n     Docs: man:systemd-sysv-generator(8)\r\n\r\nDec 11 20:08:25 ubunut1 systemd[1]: Starting LSB: Router Advertising Daemon...\r\nDec 11 20:08:25 ubunut1 radvd[3541]: Starting radvd:\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * /etc/radvd.conf does not exist or is empty.\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * See /usr/share/doc/radvd/README.Debian\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * radvd will *not* be started.\r\nDec 11 20:08:25 ubunut1 systemd[1]: Started LSB: Router Advertising Daemon.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ed9352242567-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ed9352242567-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-2\">●<span class=\"crayon-h\"> </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-e\">Daemon</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-3\"><span class=\"crayon-e\">   </span><span class=\"crayon-v\">Loaded</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loaded</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bad</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vendor </span><span class=\"crayon-v\">preset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">active</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">since </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PST</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4min</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">59s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ago</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-5\"><span class=\"crayon-e\">     </span><span class=\"crayon-v\">Docs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sysv</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">generator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-6\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-7\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-8\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-9\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exist </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-10\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">See</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">doc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Debian</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-11\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">radvd </span><span class=\"crayon-e \">will *</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">started</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ed9352242567-12\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ed9352242567-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p>这些所有的消息有点让人困惑，实际上 radvd 并没有运行，你可以使用经典命令 <code>ps | grep radvd</code> 来验证这一点。因此，我们现在需要去创建 <code>/etc/radvd.conf</code> 文件。拷贝这个示例，将第一行的网络接口名替换成你自己的接口名字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48ee4385138692\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface ens7 {\r\n  AdvSendAdvert on;\r\n  MinRtrAdvInterval 3;\r\n  MaxRtrAdvInterval 10;\r\n  prefix fd7d:844d:3e17:f3ae::/64\r\n        {\r\n                AdvOnLink on;\r\n                AdvAutonomous on;\r\n        };\r\n\r\n};\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee4385138692-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee4385138692-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ens7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">AdvSendAdvert </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MinRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MaxRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">prefix </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvOnLink </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvAutonomous </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-10\"> </div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee4385138692-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee4385138692-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>前缀（<code>prefix</code>）定义了你的网络地址，它是地址的前 64 位。前两个字符必须是 <code>fd</code>，前缀接下来的剩余部分你自己定义它，最后的 64 位留空，因为 radvd 将去分配最后的 64 位。前缀后面的 16 位用来定义子网，剩余的地址定义为主机地址。你的子网必须总是 <code>/64</code>。RFC 4193 要求地址必须随机生成；查看 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">在 KVM 中测试 IPv6 Networking：第 1 部分</a> 学习创建和管理 ULAs 的更多知识。</p>\n<h3 id=\"toc_3\">IPv6 转发</h3>\n<p>IPv6 转发必须要启用。下面的命令去启用它，重启后生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48ee9368967906\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sysctl -w net.ipv6.conf.all.forwarding=1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ee9368967906-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ee9368967906-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ee9368967906-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sysctl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ee9368967906-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>取消注释或者添加如下的行到 <code>/etc/sysctl.conf</code> 文件中，以使它永久生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48eec612380035\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnet.ipv6.conf.all.forwarding = 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48eec612380035-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48eec612380035-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48eec612380035-1\"><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48eec612380035-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>启动 radvd 守护程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48eef482556194\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl stop radvd\r\n$ sudo systemctl start radvd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48eef482556194-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48eef482556194-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48eef482556194-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48eef482556194-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">stop </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48eef482556194-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">start </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48eef482556194-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这个示例在我的 Ubuntu 测试系统中遇到了一个怪事；radvd 总是停止，我查看它的状态却没有任何问题，做任何改变之后都需要重新启动 radvd。</p>\n<p>启动成功后没有任何输出，并且失败也是如此，因此，需要运行 <code>sudo systemctl status radvd</code> 去查看它的运行状态。如果有错误，<code>systemctl</code> 会告诉你。一般常见的错误都是 <code>/etc/radvd.conf</code> 中的语法错误。</p>\n<p>在 Twitter 上抱怨了上述问题之后，我学到了一件很酷的技巧：当你运行 <code>journalctl -xe --no-pager</code> 去调试 <code>systemctl</code> 错误时，你的输出会被换行，然后，你就可以看到错误信息。</p>\n<p>现在检查你的主机，查看它们自动分配的新地址：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5aa9e36c48ef3809373789\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ifconfig\r\nens7      Link encap:Ethernet  HWaddr 52:54:00:57:71:50  \r\n          [...]\r\n          inet6 addr: fd7d:844d:3e17:f3ae:9808:98d5:bea9:14d9/64 Scope:Global\r\n          [...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ef3809373789-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ef3809373789-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ef3809373789-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ef3809373789-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5aa9e36c48ef3809373789-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5aa9e36c48ef3809373789-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ef3809373789-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ifconfig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ef3809373789-2\"><span class=\"crayon-e\">ens7      </span><span class=\"crayon-e\">Link </span><span class=\"crayon-v\">encap</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">Ethernet  </span><span class=\"crayon-i\">HWaddr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">54</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">57</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">71</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ef3809373789-3\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ef3809373789-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-e\">inet6 </span><span class=\"crayon-v\">addr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9808</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">98d5</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">bea9</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">14d9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Scope</span><span class=\"crayon-o\">:</span><span class=\"crayon-m\">Global</span></div><div class=\"crayon-line\" id=\"crayon-5aa9e36c48ef3809373789-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5aa9e36c48ef3809373789-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>本文到此为止，下周继续学习如何为 ULA 管理 DNS，这样你就可以使用一个合适的主机名来代替这些长长的 IPv6 地址。</p>\n<p>通过来自 Linux 基金会和 edX 的 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Linux 入门”</a> 免费课程学习更多 Linux 的知识。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113771\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113771votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113771\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 0, "create_date": "2018-03-14", "praise_nums": 1}
{"url_obj_id": "23b91f36b0e3c52751b33dea744a641b", "url": "http://blog.jobbole.com/113740/", "title": "AI 从业者都会用到的 10 个深度学习方法", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "tags": "IT技术,机器学习,深度学习", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a> 翻译，<a href=\"http://www.jobbole.com/members/paradise_FD\">郑芸</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://towardsdatascience.com/the-10-deep-learning-methods-ai-practitioners-need-to-apply-885259f402c1\">James Le</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>过去十年里，人们对机器学习的兴趣经历了爆炸式的整长。我们几乎每天都可以在计算机程序、行业会议和媒体上看到机器学习的身影。很多关于机器学习的讨论都混淆了“机器学习能做什么”和“人类希望机器学习能做什么”。从根本上讲，机器学习是运用算法从原始数据中提取信息，并用某种类型的模型进行表示，然后使用该模型对一些尚未用模型表示的其他数据来进行推断。</p>\n<p>神经网络就是机器学习各类模型中的其中一类，并且已经存在了至少50年。神经网络的基本单位是节点，它的想法大致来源于哺乳动物大脑中的生物神经元。生物大脑中的神经元节点之间的链接是随着时间推移不断演化的，而神经网络中的神经元节点链接也借鉴了这一点，会不断演化（通过“训练”的方式）。</p>\n<p>神经网络中很多重要框架的建立和改进都完成于二十世纪八十年代中期和九十年代初期。然而，要想获得较好结果需要大量的时间和数据，由于当时计算机的能力有限，神经网络的发展受到了一定的阻碍，人们的关注度也随之下降。二十一世纪初期，计算机的运算能力呈指数级增长，业界也见证了计算机技术发展的“寒武纪爆炸”——这在之前都是无法想象的。深度学习以一个竞争者的姿态出现，在计算能力爆炸式增长的十年里脱颖而出，并且赢得了许多重要的机器学习竞赛。其热度在2017年仍然不减。如今，在机器学习的出现的地方我们都能看到深度学习的身影。</p>\n<p>为了跟上时代的潮流，我参加了 Udacity 的“深度学习”课程。这是一个很好的入门课程，包括深度学习的动机和在 TensorFlow 中针对复杂的和/或大规模数据集进行学习的智能系统的设计。 对于课程作业，我使用和开发了用于图像识别的卷积神经网络，带有嵌入的自然语言处理以及运用递归神经网络/长期短期记忆的基于字符的文本生成程序。所有 Jupyter Notebook 的代码都在我的 <a href=\"https://github.com/khanhnamle1994/deep-learning\">GitHub</a>。</p>\n<p>下图是课程作业的一个结果，词向量的 t-SNE 投影，通过相似性进行聚类。<a href=\"https://cdn-images-1.medium.com/max/1600/1*5gUqFLOyQrB4kgjAicn0og.png\"><br>\n</a></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4ymntinj20m80legrb.jpg\" width=\"690\" height=\"664\"></p>\n<p>最近，我开始阅读关于深度学习的学术论文。根据我的个人研究，以下文章对这个领域的发展产生了巨大的影响：</p>\n<ul>\n<li>NYU 1998 年的文章<a href=\"http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf\">《基于梯度学习的文档识别》（Gradient-Based Learning Applied to Document Recognition）</a> 介绍了卷积神经网络在机器学习中的应用。</li>\n<li>Toronto 2009年的文章<a href=\"http://proceedings.mlr.press/v5/salakhutdinov09a/salakhutdinov09a.pdf\">《深度波兹曼机器》（Deep Boltzmann Machines）</a> 针对波兹曼机提出了一种新的学习算法，其中包含许多隐藏层。</li>\n<li>Stanford 和 Google 2012年联合发表的文章<a href=\"http://icml.cc/2012/papers/73.pdf\">《使用大规模非监督学习构建高层特征》（Building High-Level Features Using Large-Scale Unsupervised Learning）</a> 解决了仅利用未标记的数据构建高级、特定类的特征检测器的问题。</li>\n<li>Berkeley 2013年的文章<a href=\"http://proceedings.mlr.press/v32/donahue14.pdf\">《用于一般视觉识别的深层卷积激活特征》（DeCAF——A Deep Convolutional Activation Feature for Generic Visual Recognition）</a> 发布了名为 DeCAF 的算法，这是深度卷积激活特征的一个开源实现，使用相关的网络参数，视觉研究人员能够利用一系列视觉概念学习范例进行深入实验。</li>\n<li>DeepMind 2016年的文章<a href=\"https://www.cs.toronto.edu/~vmnih/docs/dqn.pdf\">《用深度强化学习玩Atari》（Playing Atari with Deep Reinforcement Learning）</a> 提出了第一个可以成功地通过强化学习从高维感官输入中直接学习控制策略的深度学习模型。</li>\n</ul>\n<p>通过研究和学习，我学到了大量关于深度学习的相关知识。在这里，我想分享人工智能工程师 10 个用于解决机器学习问题的强大的深度学习方法。但是，我们首先需要定义什么是深度学习。</p>\n<p>如何定义深度学习是很多人面临的一个挑战，因为它的形式在过去的十年中已经慢慢地发生了改变。下图直观地展示了人工智能，机器学习和深度学习之间的关系。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4ynluzaj20m80mjgmr.jpg\" width=\"690\" height=\"699\"></p>\n<p>人工智能领域广泛，存在时间较长。深度学习是机器学习领域的一个子集，而机器学习是人工智能领域的一个子集。一般将深度学习网络与“典型”前馈多层网络从如下方面进行区分：</p>\n<ul>\n<li>深度学习网络具有比前馈网络更多的神经元</li>\n<li>深度学习网络连接层之间的方式更复杂</li>\n<li>深度学习网络需要有像“寒武纪大爆发”式的计算能力进行训练</li>\n<li>深度学习网络能够自动提取特征</li>\n</ul>\n<p>上文提到的“更多的神经元”是指近年来神经元的数量不断增加，就可以用更复杂的模型来表示。层也从多层网络中每一层完全连接，发展到卷积神经网络中神经元片段的局部连接，以及与递归神经网络中的同一神经元的循环连接（与前一层的连接除外）。</p>\n<p>因此，深度学习可以被定义为以下四个基本网络框架中具有大量参数和层数的神经网络：</p>\n<ul>\n<li>无监督预训练网络</li>\n<li>卷积神经网络</li>\n<li>循环神经网络</li>\n<li>递归神经网络</li>\n</ul>\n<p>在这篇文章中，我主要讨论三个框架：</p>\n<ol>\n<li><strong>卷积神经网络（</strong><strong>Convolutional Neural Network</strong><strong>）</strong>基本上就是用共享权重在空间中进行扩展的标准神经网络。卷积神经网络主要是通过内部卷积来识别图片，内部卷积可以看到图像上识别对象的边缘。</li>\n<li><strong>循环神经网络（</strong><strong>Recurrent Neural Network</strong><strong>）</strong>基本上就是在时间上进行扩展的标准神经网络，它提取进入下一时间步的边沿，而不是在同一时间进入下一层。循环神经网络主要是为了识别序列，例如语音信号或者文本。其内部的循环意味着网络中存在短期记忆。</li>\n<li><strong>递归神经网络（</strong><strong>Recursive Neural Network</strong><strong>）</strong>更类似于分层网络，其中输入序列没有真正的时间面，但是必须以树状方式分层处理。以下10种方法均可应用于这些框架。</li>\n</ol>\n<h2>1、反向传播</h2>\n<p>反向传播是一种计算函数偏导数（或梯度）的简单方法，它的形式是函数组合（如神经网络）。在使用基于梯度的方法求解最优化问题（梯度下降只是其中之一）时，需要在每次迭代中计算函数梯度。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yox71ej20go0csju0.jpg\" width=\"600\" height=\"460\"></p>\n<p>对于一个神经网络，其目标函数是组合形式。那么应该如何计算梯度呢？有2种常规方法：（i）<strong>微分解析法</strong>。函数形式已知的情况下，只需要用链式法则（基础微积分）计算导数。（ii）<strong>有限差分法近似微分</strong>。这种方法运算量很大，因为函数评估的数量级是 O(N)，其中 N 是参数的个数。与微分解析法相比，这种方法运算量更大，但是在调试时，通常会使用有限差分验证反向传播的效果。</p>\n<h2>2、随机梯度下降</h2>\n<p>梯度下降的一个直观理解就是想象一条源自山顶的河流。这条河流会沿着山势的方向流向山麓的最低点，而这也正是梯度下降法的目标。</p>\n<p>我们所期望的最理想的情况就是河流在到达最终目的地（最低点）之前不会停下。在机器学习中，这等价于我们已经找到了从初始点（山顶）开始行走的全局最小值（或最优值）。然而，可能由于地形原因，河流的路径中会出现很多坑洼，而这会使得河流停滞不前。在机器学习术语中，这种坑洼称为局部最优解，而这不是我们想要的结果。有很多方法可以解决局部最优问题（这里不再讨论）。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4yq0fr5j20ld0fvq5h.jpg\" width=\"690\" height=\"512\"></p>\n<p>因此，由于地形（即函数性质）的限制，梯度下降算法很容易卡在局部最小值。但是，如果能够找到一个特殊的山地形状（比如碗状，术语称作凸函数），那么算法总是能够找到最优点。在进行最优化时，遇到这些特殊的地形（凸函数）自然是最好的。另外，山顶初始位置（即函数的初始值）不同，最终到达山底的路径也完全不同。同样，不同的流速（即梯度下降算法的学习速率或步长）也会导致到达目的地的方式有差异。是否会陷入或避开一个坑洼（局部最小值），都会受到这两个因素的影响。</p>\n<h2>3、学习率衰减</h2>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4yqxkkhj20go09d3zd.jpg\" width=\"600\" height=\"337\"></p>\n<p>调整随机梯度下降优化算法的学习速率可以提升性能并减少训练时间。这被称作学习率退火或自适应学习率。训练中最简单也最常用的学习率自适应方法就是逐渐降低学习率。在训练初期使用较大的学习率，可以对学习率进行大幅调整；在训练后期，降低学习率，以一个较小的速率更新权重。这种方法在早期可以快速学习获得较好的权重，并在后期对权重进行微调。</p>\n<p>两个流行而简单的学习率衰减方法如下：</p>\n<ul>\n<li>线性地逐步降低学习率</li>\n<li>在特定时点大幅降低学习率</li>\n</ul>\n<h2>4、Dropout</h2>\n<p>拥有大量参数的深度神经网络是非常强大的机器学习系统。然而，在这样的网络中,过拟合是一个很严重的问题。而且大型网络的运行速度很慢，这就使得在测试阶段通过结合多个不同的大型神经网络的预测来解决过拟合问题是很困难的。Dropout 方法可以解决这个问题。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4yrul7ij20h2094jsu.jpg\" width=\"614\" height=\"328\"></p>\n<p>其主要思想是，在训练过程中随机地从神经网络中删除单元（以及相应的连接），这样可以防止单元间的过度适应。训练过程中，在指数级不同“稀疏度”的网络中剔除样本。在测试阶段，很容易通过使用具有较小权重的单解开网络（single untwined network），将这些稀疏网络的预测结果求平均来进行近似。这能有效地避免过拟合，并且相对于其他正则化方法能得到更大的性能提升。Dropout 技术已经被证明在计算机视觉、语音识别、文本分类和计算生物学等领域的有监督学习任务中能提升神经网络的性能，并在多个基准数据集中达到最优秀的效果。</p>\n<h2>5、最大池</h2>\n<p>最大池是一种基于样本的离散化方法。目标是对输入表征（图像、隐藏层输出矩阵等）进行下采样，降低维度并且允许对子区域中的特征进行假设。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4ysgia7j20ea0ba3z0.jpg\" width=\"514\" height=\"406\"></p>\n<p>通过提供表征的抽象形式，这种方法可以在某种程度上解决过拟合问题。同样，它也通过减少学习参数的数目以及提供基本的内部表征转换不变性来减少计算量。最大池是通过将最大过滤器应用于通常不重叠的初始表征子区域来完成的。</p>\n<h2>6、批量标准化</h2>\n<p>当然，包括深度网络在内的神经网络需要仔细调整权重初始值和学习参数。批量标准化能够使这个过程更加简单。</p>\n<p><strong>权重问题：</strong></p>\n<ul>\n<li>无论怎么设置权重初始值，比如随机或按经验选择，初始权重和学习后的权重差别都很大。考虑一小批权重，在最初时，对于所需的特征激活可能会有很多异常值。</li>\n<li>深度神经网络本身就具有病态性，即初始层的微小变化就会导致后一层的巨大变化。</li>\n</ul>\n<p>在反向传播过程中，这些现象会导致梯度的偏移，这就意味着在学习权重以产生所需要的输出之前，梯度必须补偿异常值。而这将导致需要额外的时间才能收敛。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpa4ytiz1qj20m80g0myk.jpg\" width=\"690\" height=\"497\"></p>\n<p>批量标准化将这些梯度从异常值调整为正常值，并在小批量范围内（通过标准化）使其向共同的目标收敛。</p>\n<p><strong>学习率问题：</strong>通常来说，学习率都比较小，这样只有一小部分的梯度用来校正权重，因为异常激活的梯度不应该影响已经学习好的权重。通过批量标准化，这些异常激活的可能性会被降低，就可以使用更大的学习率加速学习过程。</p>\n<h2>7、长短期记忆</h2>\n<p>长短期记忆网络（LSTM）和其他递归神经网络中的神经元有以下三个不同点：</p>\n<ul>\n<li>它可以决定何时让输入进入神经元</li>\n<li>它可以决定何时记住上一个时间步中计算的内容</li>\n<li>它可以决定何时让输出传递到下一个时间戳</li>\n</ul>\n<p>LSTM的强大之处在于它可以只基于当前的输入就决定上述所有。请看下方的图表：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yu8kw1j20m10clwf0.jpg\" width=\"690\" height=\"394\"></p>\n<p>当前时间戳的输入信号 x(t) 决定了上述三点。输入门（input gate）决定了第一点，遗忘门（forget gate）决定了第二点，输出门（output gate）决定了第三点。只依赖输入就可以完成这三项决定。这是受到大脑工作机制的启发，大脑可以基于输入来处理突然的上下文语境切换。</p>\n<h2>8、Skip-gram</h2>\n<p>词嵌入模型的目的是针对每个词学习一个高维密集表征，其中嵌入向量之间的相似性显示了相应词语之间语义或句法的相似性。Skip-gram 是一种学习词嵌入算法的模型。</p>\n<p>skip-gram 模型（包括很多其它词嵌入模型）背后的主要思想是：<em>如果两个词汇项有相似的上下文，则它们是相似的。</em></p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpa4yux250j20go0ci74u.jpg\" width=\"600\" height=\"450\"></p>\n<p>换句话说，假设有一个句子，比如“cats are mammals”，如果用“dogs”替换“cats”，该句子仍然是有意义的。因此在这个例子中，“dogs”和“cats”有相似的上下文（即“are mammals”）。</p>\n<p>基于以上假设，我们可以考虑一个上下文窗口（包含 K 个连续项）。然后跳过其中一个词，试着学习一个可以得到除了跳过的这个词以外所有词项，并且可以预测跳过的词的神经网络。因此，如果两个词在一个大语料库中多次具有相似的上下文，那么这些词的嵌入向量将会是相似的。</p>\n<h2>9、连续词袋模型</h2>\n<p>在自然语言处理中，我们希望将文档中的每一个单词表示为一个数值向量，使得出现在相似上下文中的单词具有相似或相近的向量表示。在连续词袋模型中，我们的目标是利用一个特定单词的上下文，预测该词。</p>\n<p> </p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yvt7j6j20go09d3yv.jpg\"></p>\n<p>首先在一个大的语料库中抽取大量的句子，每看到一个单词，同时抽取它的上下文。然后我们将上下文单词输入到一个神经网络，并预测在这个上下文中心的单词。</p>\n<p>当我们有成千上万个这样的上下文词汇和中心词时，我们就得到了一个神经网络数据集的实例。然后训练这个神经网络，在经过编码的隐藏层的最终输出中，我们得到了特定单词的嵌入式表达。当我们对大量的句子进行训练时也能发现，类似上下文中的单词都可以得到相似的向量。</p>\n<h2>10、迁移学习</h2>\n<p>我们来考虑一下卷积神经网络是如何处理图像的。假设有一张图像，对其应用卷积，并得到像素的组合作为输出。假设这些输出是边缘，再次应用卷积，那么现在的输出将是边缘或线的组合。然后再次应用卷积，此时的输出将是线的组合，以此类推。可以把它想象成是在每一层寻找一个特定的模式。神经网络的最后一层通常会变得非常特别。如果基于 ImageNet 进行训练，那么神经网络的最后一层或许就是在寻找儿童、狗或者飞机之类的完整图像。再往后倒退几层，可能会看到神经网络在寻找眼睛、耳朵、嘴巴或者轮子等组成部分。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4ywms3fj20hq09zgm8.jpg\" width=\"638\" height=\"359\"></p>\n<p>深度卷积神经网络中的每一层逐步建立起越来越高层次的特征表征，最后几层通常是专门针对输入数据。另一方面，前面的层则更为通用，主要用来在一大类图片中有找到许多简单的模式。</p>\n<p>迁移学习就是在一个数据集上训练卷积神经网络时，去掉最后一层，在不同的数据集上重新训练模型的最后一层。直观来讲，就是重新训练模型以识别不同的高级特征。因此，训练时间会减少很多，所以在没有足够的数据或者需要太多的资源时，迁移学习是一个很有用的工具。</p>\n<p>本文只是简单地对这些方法进行了概述，若想深入理解，建议继续阅读以下文章：</p>\n<ul>\n<li>Andrew Beam 的 <a href=\"http://beamandrew.github.io/deeplearning/2017/02/23/deep_learning_101_part1.html\">“Deep Learning 101”</a></li>\n<li>Andrey Kurenkov 的 <a href=\"http://www.andreykurenkov.com/writing/a-brief-history-of-neural-nets-and-deep-learning/\">“A Brief History of Neural Nets and Deep Learning”</a></li>\n<li>Adit Deshpande 的  <a href=\"https://adeshpande3.github.io/adeshpande3.github.io/A-Beginner%27s-Guide-To-Understanding-Convolutional-Neural-Networks/\">“A Beginner’s Guide to Understanding Convolutional Neural Networks”</a></li>\n<li>Chris Olah： <a href=\"http://colah.github.io/posts/2015-08-Understanding-LSTMs/\">“Understanding LSTM Networks”</a></li>\n<li>Algobean： <a href=\"https://algobeans.com/2016/03/13/how-do-computers-recognise-handwriting-using-artificial-neural-networks/\">“Artificial Neural Networks”</a></li>\n<li>Andrej Karpathy： <a href=\"http://karpathy.github.io/2015/05/21/rnn-effectiveness/\">“The Unreasonable Effectiveness of Recurrent Neural Networks”</a></li>\n</ul>\n<p>深度学习是非常注重技术实践的。本文对每个新想法都没有太多具体的解释。大多数新想法的提出都会附带实验结果以证明它们的可行性。学习深度学习就像玩乐高，玩好乐高和掌握其他艺术一样具有挑战性，但是入门就相对容易很多的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113740\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113740votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113740\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">\r\n\t\t\t<img src=\"http://tp4.sinaimg.cn/2010222395/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            统计学小硕，R/Python，数据挖掘，机器学习        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2010222395\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2010222395/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2010222395\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：676462459\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：13306016503\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/MentosZ\"><i class=\"fa fa-github\"></i></a> <a title=\"Facebook主页\" target=\"_blank\" href=\"https://www.facebook.com/mengtao.zhao\"><i class=\"fa fa-facebook\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 0, "fav_nums": 0, "create_date": "2018-03-12", "praise_nums": 1}
{"url_obj_id": "b531dd3dbe9f166d522d5fbe6829f74d", "url": "http://blog.jobbole.com/113705/", "title": "我只想安静地写代码，领导却跟我谈大局、讲奉献", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/a0d3ddbd4770543de0a261f2585f4306.jpg"], "tags": "职场,,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://hackernoon.com/why-your-programmers-just-want-to-code-36da9973388e\">Marcus Blankenship</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5121539.html\">36Kr</a>   </div><p>编者按：是的，为什么你们这帮程序猿整天就只想写代码？难道做什么不比怎么做更重要吗？但凡你对公司有点奉献精神对业务有点关心的话都不会这样，一切都是你的错，对吧？不对，《Habits That Harm Your Technical Team》作者 Marcus Blankenship 说<a href=\"https://hackernoon.com/why-your-programmers-just-want-to-code-36da9973388e\" target=\"_blank\">错不在程序员，错在你们这帮领导</a>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a0d3ddbd4770543de0a261f2585f4306.jpg\" alt=\"\"></p>\n<p>我面试 Jamie 的时候，他看起来就像一位狂热的工程师。技术技能可靠，对流程和产品改进有想法，也有着很好的团队合作态度，是个明显的选择。</p>\n<blockquote><p>不过 2 年后，Jamie 变成了“那个家伙”。你懂的，就是那个只想不被打扰、埋头写自己代码的家伙。</p></blockquote>\n<p>我本来应该注意到迹象。现在回想起来，他没有站出来说过话，他没有像我预期那样贡献自己对流程或产品的想法，而他的“团队友好”型互动通常是挖苦别人。他经常讨论技术债务，说我们缺乏创新，以及拖我们后腿的“愚蠢”决定。而他的评论和反馈显示出他已经深受“我早就告诉过你了”的情绪之困扰。</p>\n<p>Jamie 可能曾考虑过要离开公司。如果他这么做，那我就不能说了。尽管我肯定希望他离开。不过我们现在人手不足，而且我需要能找到的所有帮助。</p>\n<p>结果呢？</p>\n<p>结果还是老一套，又一位只想着写代码的程序员被孤立了。</p>\n<p><strong>环境塑造人</strong></p>\n<p>太多经理认为问题出在 Jamie 身上了。如果他是一位好一点的员工、有奉献精神的员工，或者至少多一点关心的话，都不会发生这样的事情，对吧？</p>\n<p>不幸的是，不对。</p>\n<blockquote><p>冰冻三尺非一日之寒，热忱的程序员变成偏执的程序员不是一夜之间的事情。但是事情的发展速度比你想象的要快。</p></blockquote>\n<p><strong>第一次建议非常重要</strong></p>\n<p>你如何处置新程序员的想法会发出重要信号。不管好坏，这都为他们的预期做好了准备。这决定了他们会不会在将来分享更多的想法……或者闭嘴不再多管闲事。</p>\n<p>当然，一些想法在你的环境未必可行。有的可能需要“等我们没那么忙”的时候再进行讨论。有的想法看起来很好，但跟这里的潜规则是有冲突的。</p>\n<p>不管是什么理由，鄙视或者贬低你的程序员的想法，尤其是在他们刚来的几个月内做出这种举动是糟糕的做法。</p>\n<p>满腔热情被泼冷水之后，他会试着换种方式表达自己的想法，为的是想得到成功的结果。但是如果还是好心被当成驴肝肺的话，他就会意识到唯一的取胜之道就是不玩了。</p>\n<p>这恰恰是你不希望你的程序员吸取的教训。</p>\n<p>他不再提出想法，不再要求跟客户见面，并且真诚地试图去理解业务。</p>\n<p>到最后就变成了双输的局面。</p>\n<p><strong>想法越大，风险越大</strong></p>\n<p>记住，你的程序员在提出新想法的时候其实是在冒险。想法越大，风险越大。</p>\n<p>为什么是风险？因为我们的想法反映了我们自己、我们的观点以及我们的热情。我们不会推动自己不关心或者认为不可行的想法。我们把自己最好的想法贡献出来，希望能够被接受。</p>\n<p>这需要有暴露脆弱的勇气，我们只有在相当确定不会受辱的情况才会大胆吐露自己的想法。如果我们认为自己的想法不会被接受的话，就不会再说出去了。</p>\n<p><strong>对想法的反馈塑造了行为</strong></p>\n<p>那么你的程序员退回去只做能让自己成功的事情，也就是写代码，就是很自然的事了。</p>\n<p>令人悲哀地，他满腔的创造、创新和开发热忱都没了。</p>\n<p>也许它已经变成了对代码质量或者代码指标不切实际的想法。</p>\n<p>他对市场份额和业务健康的担忧已经被对头衔和工资的担忧所取代。他变得更加关心自己挣了多少，自己的头衔是什么，以及自己 LinkedIn 的形象怎么样。</p>\n<p>他对改变世界的热情已经被对开发过程的挑剔所替代。</p>\n<blockquote><p>不过更糟糕的是，他对“我们没有开发正确的东西”的担心会被“我们没有把东西开发正确。”的担心取代。</p></blockquote>\n<p>他已经学会了不对要开发什么提供输入，于是他开始对怎么去开发变得痴迷。</p>\n<p>对于他来说，你的文化已经变成了适者生存。</p>\n<p><strong>你的培训都教了些什么？</strong></p>\n<p>尽管你永远都不会直接说这些，但你的培训和文化也许会教这些：</p>\n<ul>\n<li>“我们的公司不喜欢小人物的大想法。”</li>\n<li>“你做好开发的事情就行了。我们会找出客户想要什么的。”</li>\n<li>“你就是个程序猿。”</li>\n<li>“嗯……为什么你有十万个为什么。你没有代码可写了吗？”</li>\n</ul>\n<p><strong>你的真正文化是什么？</strong></p>\n<p>文化不是贴在墙上的口号，也不是在面试的时候你介绍的公司使命。文化是大家的做事之道，是大家真正关心的东西。</p>\n<p>德州农工大学教授 Ifte Choudhury 指出：</p>\n<blockquote><p>文化是一群人的生活方式——行为、理念、价值观以及他们接受的象征，一般都是潜移默化，通过一代代人的沟通和模仿而传递下去的。</p></blockquote>\n<p><strong>如果你想知道自己的文化是什么类型，那就看看大家是怎么做的。</strong></p>\n<p>如果你不喜欢自己看到的东西，那就去改变它。文化不是命令。而是学习、榜样以及模仿。</p>\n<blockquote><p>作为领导，值得别人效仿是你的工作。</p></blockquote>\n<p>因为文化不是 Jamie 的错。文化是我们的错——团队领导、软件经理以及 CTO 的错。</p>\n<p>所以，别再指责 Jamie 了，开始做出你的文化需要的改变吧。越快越好。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113705\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113705votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113705\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "fav_nums": 6, "create_date": "2018-03-04", "praise_nums": 1}
